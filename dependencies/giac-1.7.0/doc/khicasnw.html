<!DOCTYPE html>
<html >
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="hevea 2.32">
<style type="text/css">
.li-itemize{margin:1ex 0ex;}
.li-enumerate{margin:1ex 0ex;}
.dd-description{margin:0ex 0ex 1ex 4ex;}
.dt-description{margin:0ex;}
.toc{list-style:none;}
.footnotetext{margin:0ex; padding:0ex;}
div.footnotetext P{margin:0px; text-indent:1em;}
.thefootnotes{text-align:left;margin:0ex;}
.dt-thefootnotes{margin:0em;}
.dd-thefootnotes{margin:0em 0em 0em 2em;}
.footnoterule{margin:1em auto 1em 0px;width:50%;}
.caption{padding-left:2ex; padding-right:2ex; margin-left:auto; margin-right:auto}
.title{margin:2ex auto;text-align:center}
.titlemain{margin:1ex 2ex 2ex 1ex;}
.titlerest{margin:0ex 2ex;}
.center{text-align:center;margin-left:auto;margin-right:auto;}
.flushleft{text-align:left;margin-left:0ex;margin-right:auto;}
.flushright{text-align:right;margin-left:auto;margin-right:0ex;}
div table{margin-left:inherit;margin-right:inherit;margin-bottom:2px;margin-top:2px}
td table{margin:auto;}
table{border-collapse:collapse;}
td{padding:0;}
.cellpadding0 tr td{padding:0;}
.cellpadding1 tr td{padding:1px;}
pre{text-align:left;margin-left:0ex;margin-right:auto;}
blockquote{margin-left:4ex;margin-right:4ex;text-align:left;}
td p{margin:0px;}
.boxed{border:1px solid black}
.textboxed{border:1px solid black}
.vbar{border:none;width:2px;background-color:black;}
.hbar{border:none;height:2px;width:100%;background-color:black;}
.hfill{border:none;height:1px;width:200%;background-color:black;}
.vdisplay{border-collapse:separate;border-spacing:2px;width:auto; empty-cells:show; border:2px solid red;}
.vdcell{white-space:nowrap;padding:0px; border:2px solid green;}
.display{border-collapse:separate;border-spacing:2px;width:auto; border:none;}
.dcell{white-space:nowrap;padding:0px; border:none;}
.dcenter{margin:0ex auto;}
.vdcenter{border:solid #FF8000 2px; margin:0ex auto;}
.minipage{text-align:left; margin-left:0em; margin-right:auto;}
.marginpar{border:solid thin black; width:20%; text-align:left;}
.marginparleft{float:left; margin-left:0ex; margin-right:1ex;}
.marginparright{float:right; margin-left:1ex; margin-right:0ex;}
.theorem{text-align:left;margin:1ex auto 1ex 0ex;}
.part{margin:2ex auto;text-align:center}
.lstlisting{font-family:monospace;white-space:pre;margin-right:auto;margin-left:0pt;text-align:left}
</style>
<script language="javascript"> 
var ua = window.navigator.userAgent;  
var old_ie = ua.indexOf('MSIE ');  
var new_ie = ua.indexOf('Trident/');  
if ((old_ie > -1) || (new_ie > -1) || Boolean(window.chrome)){
 (function () {
  var script = document.createElement("script");
  script.type = "text/javascript";
  script.src  = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML";
  document.getElementsByTagName("head")[0].appendChild(script);
})();
}
</script>
<title>&#36;chi&#36;CAS pour Numworks N0110
</title>
</head>
<body >
<!--HEVEA command line is: hevea -fix khicasnw.tex -->
<!--CUT STYLE article--><!--CUT DEF section 1 --><p>

<div>
<div id="maindiv" style="max-height: 500px; overflow:auto">

</p><table class="title"><tr><td style="padding:1ex"><h1 class="titlemain"><math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS pour Numworks N0110</h1><h3 class="titlerest">Bernard.Parisse@ujf-grenoble.fr</h3><h3 class="titlerest">2021</h3></td></tr>
</table><p><span style="font-weight:bold">Avertissement</span>
Numworks va fermer ses calculatrices aux développements tiers. À partir
de la version stable 16 prévue pour la rentrée 2021, 
il sera impossible d’installer <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS sur votre
Numworks et impossible de revenir en arrière. <span style="font-weight:bold">Il est donc essentiel
de ne pas mettre à jour votre calculatrice sur le site de
Numworks. Si vous achetez une calculatrice, demandez un numéro
de version du logiciel </span><math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mo>&leq;</mo></mrow><annotation encoding='application/x-tex'>\leq</annotation></semantics></math><span style="font-weight:bold">15.</span>
Diffusez cette information aux personnes susceptibles de faire une
mise à jour.
Prenez garde en particulier lorsque vous vous connectez sur le workshop
de Numworks, il est fort possible que le site vous propose (voire
impose) une mise à jour sans vous avertir que cela bloque <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS .
Utilisez de préférence une version à jour de 
<a href="https://www-fourier.univ-grenoble-alpes.fr/~parisse/install_fr.html">Xcas</a>.
(1.7.0-23 au moins) qui permet dorénavant d’échanger des programmes
entre la calculatrice et votre ordinateur.</p><p>Plus d’informations <a href="https://tiplanet.org/forum/viewtopic.php?f=97&t=24968">sur le site TI-Planet</a>. Si vous trouvez cette évolution désastreuse,
vous pouvez signer <a href="https://www.change.org/freenumworks">une pétition en ligne</a> ou mieux contacter
Numworks et leur faire part de votre opinion.</p><!--TOC section id="sec1" Table des matières-->
<h2 id="sec1" class="section">Table des matières</h2><!--SEC END --><ul class="toc"><li class="li-toc">
<a href="#sec2">1  Introduction</a>
</li><li class="li-toc"><a href="#sec3">2  Installation</a>
</li><li class="li-toc"><a href="#sec4">3  Premiers pas</a>
</li><li class="li-toc"><a href="#sec5">4  Échange de données avec Xcas.</a>
<ul class="toc"><li class="li-toc">
<a href="#sec6">4.1  Depuis un navigateur comme Chromium ou Chrome, compatible
webusb</a>
</li><li class="li-toc"><a href="#sec7">4.2  Depuis Xcas pour Windows, Linux</a>
</li></ul>
</li><li class="li-toc"><a href="#sec8">5  Commandes usuelles de calcul formel</a>
<ul class="toc"><li class="li-toc">
<a href="#sec9">5.1  Développer et factoriser</a>
</li><li class="li-toc"><a href="#sec10">5.2  Analyse</a>
</li><li class="li-toc"><a href="#sec11">5.3  Résoudre</a>
</li><li class="li-toc"><a href="#sec12">5.4  Arithmétique</a>
<ul class="toc"><li class="li-toc">
<a href="#sec13">5.4.1  Entiers</a>
</li><li class="li-toc"><a href="#sec14">5.4.2  Polynômes</a>
</li><li class="li-toc"><a href="#sec15">5.4.3  <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&Zopf;</mi><mo stretchy="false">/</mo><mi>n</mi><mi>&Zopf;</mi></mrow><annotation encoding='application/x-tex'>\mathbb{Z}/n\mathbb{Z}</annotation></semantics></math> et corps finis</a>
</li></ul>
</li><li class="li-toc"><a href="#sec16">5.5  Algèbre linéaire, vecteurs, matrices</a>
</li></ul>
</li><li class="li-toc"><a href="#sec17">6  Probabilités et statistiques</a>
<ul class="toc"><li class="li-toc">
<a href="#sec18">6.1  Tirages aléatoires</a>
</li><li class="li-toc"><a href="#sec19">6.2  Lois de probabilités</a>
</li><li class="li-toc"><a href="#sec20">6.3  Statistiques descriptives 1-d</a>
</li><li class="li-toc"><a href="#sec21">6.4  Statistiques descriptives 2-d, régressions.</a>
</li></ul>
</li><li class="li-toc"><a href="#sec22">7  Courbes et autres représentations graphiques</a>
</li><li class="li-toc"><a href="#sec23">8  Géométrie analytique.</a>
</li><li class="li-toc"><a href="#sec24">9  Unités et constantes physiques.</a>
</li><li class="li-toc"><a href="#sec25">10  L’éditeur d’expressions</a>
</li><li class="li-toc"><a href="#sec26">11  Sessions de calculs</a>
<ul class="toc"><li class="li-toc">
<a href="#sec27">11.1  Edition de l’historique.</a>
</li><li class="li-toc"><a href="#sec28">11.2  Variables</a>
</li></ul>
</li><li class="li-toc"><a href="#sec29">12  Programmation</a>
<ul class="toc"><li class="li-toc">
<a href="#sec30">12.1  Prise en main (programmation)</a>
</li><li class="li-toc"><a href="#sec31">12.2  Quelques exemples</a>
</li><li class="li-toc"><a href="#sec32">12.3  Commandes utilisables</a>
</li></ul>
</li><li class="li-toc"><a href="#sec33">13  Interpréteur MicroPython intégré</a>
<ul class="toc"><li class="li-toc">
<a href="#sec34">13.1  Les modules math, cmath, random</a>
</li><li class="li-toc"><a href="#sec35">13.2  Le module graphic</a>
</li><li class="li-toc"><a href="#sec36">13.3  Le module matplotl</a>
</li><li class="li-toc"><a href="#sec37">13.4  Le module arit</a>
</li><li class="li-toc"><a href="#sec38">13.5  Le module linalg</a>
</li><li class="li-toc"><a href="#sec39">13.6  Le module numpy</a>
</li></ul>
</li><li class="li-toc"><a href="#sec40">14  Applications additionnelles</a>
</li><li class="li-toc"><a href="#sec41">15  Le tableur</a>
</li><li class="li-toc"><a href="#sec42">16  Raccourcis claviers.</a>
</li><li class="li-toc"><a href="#sec43">17  Remarques</a>
</li><li class="li-toc"><a href="#sec44">18  Copyright, licences et remerciements</a>
</li><li class="li-toc"><a href="#sec45">19  Développement en C/C++.</a>
<ul class="toc"><li class="li-toc">
<a href="#sec46">19.1  Installation de l’environnement de développement.</a>
<ul class="toc"><li class="li-toc">
<a href="#sec47">19.1.1  Epsilon/Delta 14.4 (calculatrice), 12.3 (simulateur)</a>
</li></ul>
</li><li class="li-toc"><a href="#sec48">19.2  Utilisation du débuggueur</a>
</li><li class="li-toc"><a href="#sec49">19.3  Intégration avec le shell Khicas</a>
</li><li class="li-toc"><a href="#sec50">19.4  Fonctions de base de l’OS.</a>
</li><li class="li-toc"><a href="#sec51">19.5  Commandes graphiques complémentaires</a>
</li><li class="li-toc"><a href="#sec52">19.6  Interaction avec l’UI Khicas</a>
</li><li class="li-toc"><a href="#sec53">19.7  Interaction avec giac</a>
</li><li class="li-toc"><a href="#sec54">19.8  Sauvegardes et restauration</a>
</li></ul>
</li><li class="li-toc"><a href="#sec55">20  Quelques mots sur les calculatrices</a>
</li></ul>
<!--TOC section id="sec2" Introduction-->
<h2 id="sec2" class="section">1  Introduction</h2><!--SEC END --><p>
Ce document explique comment prendre en main et utiliser efficacement
sur calculatrices Numworks N0110
le système de calcul formel <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS, une version adaptée
du <a href="https://www-fourier.ujf-grenoble.fr/~parisse/giac_fr.html">logiciel Xcas</a> pour cette calculatrice.
<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS permet de transformer votre calculatrice graphique
en calculatrice graphique formelle (CAS) pour faire du
calcul littéral (développer, factoriser, calculer
une limite, une dérivée, une primitive, résoudre
des équations, faire du calcul
matriciel exact ou approché, ...) et ajoute
aussi des fonctionnalités
pour les élèves qui envisagent une poursuite d’études
en sciences ou en maths : gestion des unités de mesure,
table périodique des éléments, plus grande varitété de
représentations graphiques (suite récurrentes,
champ de tangentes et solution
d’une équation différentielle, lignes de niveau...),
géométrie analytique, arithmétique et cryptographie
(corps finis premiers et extensions, polynômes, etc.), algèbre,
algèbre linéaire, analyse numérique, calcul flottant
multi-précision et certifié (arithmétique d’intervalle), etc.</p><p><math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS propose aussi une application tableur, qui permet
de combler l’absence de cette fonctionnalité dans le système
Epsilon fourni par Numworks. Enfin, un interpréteur MicroPython
est maintenant inclus dans <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS pour les programmes qui nécessitent
une compatibilité stricte avec Python. Ce MicroPython comprend 
un module d’arithmétique (test de primalité, PGCD, identité de
Bézout),
et deux modules pour faire du calcul vectoriel et matriciel
et trouver des racines de polynome, Le tas MicroPython peut être
configuré jusqu’à 64K (le double de ce qui est possible dans
Epsilon).</p><p>Toutes ces fonctionnalités sont
intégrées, on peut représenter sur un même graphique
un histogramme et un graphe de fonction et une droite, on peut écrire
un programme pour faire une simulation et représenter
les résultats graphiquement, ou utiliser les fonctions
mathématiques dans un programme en syntaxe Python ou utiliser
un programme en syntaxe Python dans le tableur.</p><p>La philosophie de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS est très éloignée de celle
du système Epsilon de la Numworks qui a des applications
ciblées, faciles à utiliser,
mais aux fonctionnalités mathématiques relativement limitées
et qui communiquent peu entre elles.
Ici, on passera un peu de temps à apprendre
comment utiliser le shell et les outils d’édition pour
ensuite les faire travailler harmonieusement ensemble, sans autres
limites que la mémoire (malheureusement très limitée) et la vitesse
de la Numworks (tout à fait raisonnable pour une calculatrice).
Il est donc fortement recommandé de lire cette documentation pour une
utilisation optimale de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>cas, à l’exception
de la section <a href="#sec%3Adev">19</a> qui
s’adresse uniquement aux programmeurs
qui souhaitent programmer leur calculatrice en C ou C++.</p><p>N.B. :
Ce document est interactif, vous pouvez modifier les commandes
et voir le résultat de l’exécution des commandes
proposées en exemple en cliquant sur le bouton <span class="textboxed">exe</span> (ou en
validant avec la touche Entrée).</p>
<!--TOC section id="sec3" Installation-->
<h2 id="sec3" class="section">2  Installation</h2><!--SEC END --><p> <a id="sec:install"></a>
<span style="font-weight:bold">Attention, certains concours ou examens interdisent l’utilisation
de calculatrices formelles. Il est de la responsabilité de l’utilisateur
de vérifier que les calculatrices formelles sont autorisées
avant d’utiliser ces deux firmwares dans un examen ou concours. Les auteurs
ne sauraient être tenus pour responsables en cas d’utilisation
non autorisée.</span></p><p>Avant d’installer ou mettre à jour <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS, pensez à sauvegarder
vos données, car elles pourraient être effacées. Puis choisir une des
méthodes :
</p><ol class="enumerate" type=1><li class="li-enumerate">
<span style="font-weight:bold">Depuis Xcas</span> (Windows et Linux)<br>
C’est la méthode conseillée, car elle permet ensuite d’échanger
facilement des programmes avec la calculatrice sans avoir
à passer par le site de Numworks<sup><a id="text1" href="#note1">1</a></sup>.<br>
Connecter la calculatrice, ouvrez Xcas, puis dans le menu Fich,
sous-menu Numworks, sélectionner <code>Installer KhiCAS sur la
calculatrice</code>. Lorsqu’on vous demande de faire un reset de la
calculatrice, appuyez sur le bouton
<code>RESET</code> à l’arrière de la calculatrice.
</li><li class="li-enumerate"><span style="font-weight:bold">Via Internet avec un navigateur compatible avec webUSB</span><br>
Cliquez sur <a href="https://parisseb.github.io/nw-external-apps">ce lien</a>
avec Chromium ou Google Chrome. Suivez les instructions pour
installer un firmware compatible, puis installez KhiCAS.
</li><li class="li-enumerate"><span style="font-weight:bold">Installation manuelle</span><br>
Pour installer ou mettre à jour <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS sur votre 
Numworks N0110 :
récupérez sur votre ordinateur le fichier
<a href="https://www-fourier.ujf-grenoble.fr/~parisse/numworks/delta.zip">delta.zip</a>.
<ul class="itemize"><li class="li-itemize">
Si nécessaire, installez dfu-util
<ul class="itemize"><li class="li-itemize">
sur Mac, installez <a href="https://brew.sh/">brew</a> si nécessaire puis
depuis un Terminal (dans Utilitaires) faire<br>
 <code>brew install dfu-util</code>
</li><li class="li-itemize">sous Linux debian compatible, ouvrir un Terminal et faire<br>
 <code>sudo apt-get install dfu-util</code><br>
Vous pouvez aussi compilez et installer à partir du <a href="http://dfu-util.sourceforge.net/">source</a>.<br>
 Récupérez 
<a href="https://www-fourier.univ-grenoble-alpes.fr/~parisse/numworks/50-numworks-calculator.rules">ce fichier</a> et copiez le
dans <code>/etc/udev/rules.d</code>. Si vous avez installé un package
debian, cela peut se faire par la commande<br>
<code>sudo cp /usr/share/giac/doc/50-numworks-calculator.rules /etc/udev/rules.d</code>
Vous pouvez aussi créer un fichier
<code>/etc/udev/rules.d/50-numworks-calculator.rules</code> de contenu :
<pre class="verbatim">SUBSYSTEM=="usb", ATTR{idVendor}=="0483", ATTR{idProduct}=="a291", TAG+="uaccess"
SUBSYSTEM=="usb", ATTR{idVendor}=="0483", ATTR{idProduct}=="df11", TAG+="uaccess"
</pre>
</li><li class="li-itemize">sous Windows, téléchargez et installez la version
<a href="http://dfu-util.sourceforge.net/releases/dfu-util-0.9-win64.zip">64 bits</a>
ou <a href="https://www-fourier.ujf-grenoble.fr/~parisse/numworks/dfu-win32.zip">32 bits</a>
(<a href="http://dfu-util.sourceforge.net/releases/">provenance</a>).
L’exécutable s’appelle <code>dfu-util-static.exe</code>.
Si nécessaire éditez le fichier <code>updaten110.bat</code> (64 bits)
ou <code>updaten110_32.bat</code> (32 bits)
pour adapter les chemins d’installation. Le fichier actuel
suppose que l’on a desarchivé <code>delta.zip</code>
et <code>dfu-util-0.9-win64.zip</code> depuis le même répertoire racine
(par exemple <code>c:\temp</code>)
et qu’on lance <code>updaten110.bat</code> (64 bits)
ou <code>updaten110_32.bat</code> (32 bits) en cliquant sur le fichier
dans l’explorateur de fichiers. 
</li></ul>
</li><li class="li-itemize">Tapez la commande <code>./updaten110</code> (Linux/Mac) ou
exécutez <code>updaten110.bat</code> (Windows 64 bits)
ou <code>updaten110_32.bat</code> (Windows 32 bits).
Les commandes <code>dfu-util</code> sont les suivantes
<pre class="verbatim">dfu-util -i0 -a0 -D epsilon.dfu
dfu-util -i 0 -a 0 -s 0x90200000 -D apps.tar
</pre>
</li></ul>
</li></ol><p>
Après installation, redémarrez la calculatrice par appui sur le
bouton RESET si nécessaire.
Tapez sur la touche HOME puis Entree pour lancer <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS.
</p><p>Licence d’utilisation : la licence choisie par Numworks
pour son système d’exploitation rend impossible la publication
d’un firmware binaire unique contenant également un logiciel libre.
Le firmware est donc décomposé en deux parties,
<code>epsilon.dfu</code>, sous licence
<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode">Creative Commons Attribution-NonCommercial-
ShareAlike 4.0 International Public License</a>
et <code>apps.tar</code> sous
licence <a href="https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html">GPL2</a>.</p>
<!--TOC section id="sec4" Premiers pas-->
<h2 id="sec4" class="section">3  Premiers pas</h2><!--SEC END --><p>
Depuis le menu principal de la Numworks, tapez la touche HOME ou
déplacez le curseur jusqu’à l’icone (Extension)
puis tapez EXE. Ceci ouvre un “shell” dans lequel vous pouvez
taper la plupart des commandes de calcul formel de Xcas.
Au premier lancement, vous avez le choix de l’évaluateur entre
Xcas et MicroPython, on suppose ici que vous choisissez Xcas en tapant
OK ou EXE. Si vous avez choisi MicroPython, lisez la section
correspondante <a href="#sec%3Amicropy">13</a>. Pour passer à Xcas
(respectivement Python), depuis une ligne de commande vide, taper les
touches <code>shift ) 8 OK</code>.</p><p>Pour revenir au menu principal de la Numworks,
il faut taper HOME plusieurs fois (2 fois depuis le shell).</p><p>Par exemple, tapez 
<code>1/2+1/6</code>
puis EXE, vous devriez voir le résultat <code>2/3</code> s’afficher
sur la ligne du dessous. </p><p>Vous pouvez recopier dans la ligne de commande
une commande de l’historique en utilisant le
curseur vers le haut ou vers le bas puis EXE, puis vous pouvez
modifier la commande et l’exécuter. Par exemple, taper sur la
touche curseur vers le haut, EXE et remplacez <code>1/6</code> par <code>1/3</code>.</p><p>Vous pouvez utiliser le résultat de la dernière commande
avec la touche <code>Ans</code> de la calculatrice.
Il vaut en général mieux définir une variable comme résultat 
d’une commande si on souhaite la réutiliser. Pour cela, on
utilise une des deux instructions d’affectation :
</p><ul class="itemize"><li class="li-itemize">
l’affectation vers la droite <code>=&gt;</code> s’obtient avec la 
touche <code>sto</code><math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mo>&rightarrow;</mo></mrow><annotation encoding='application/x-tex'>\rightarrow</annotation></semantics></math> de la 
calculatrice, par exemple <code>2=&gt;a</code> met 2 dans la variable a.
Vous pouvez ensuite utiliser <code>a</code> dans un calcul, sa
valeur sera remplacée par 2.
</li><li class="li-itemize">l’affectation vers la gauche <code>=</code>.
Par exemple <code>a=2</code> fait la même chose que <code>2=&gt;a</code>.
</li></ul><p>Pour vous aider à saisir les commandes Xcas les plus utiles,
<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS dispose d’un catalogue d’une centaine de commandes,
avec une courte description et le plus souvent un exemple 
d’exécution facile à recopier. 
Appuyez sur 
la touche Toolbox, choisissez une catégorie avec le curseur, 
par exemple <code>Algebre</code>, tapez EXE,
puis choisissez une commande avec le curseur, par exemple <code>factor</code>.
Un deuxième appui sur la
touche Toolbox vous affiche une courte description de la commande,
en général avec un exemple. En tapant sur Ans (ou EXE), vous recopiez
l’exemple en ligne de commande. Vous pouvez alors valider (EXE) ou
modifier la commande et valider (EXE) 
pour factoriser un autre polynôme que celui
donné en exemple. Essayez avec <code>factor</code> (touche Toolbox,
puis <code>Algebre</code>).</p><p>Parmi ces commandes, celles qui sont le plus utilisées sont accessibles
par des menus rapides activés par la touche shift suivi d’un chiffre,
de <code>.</code>, de <span style="font-family:monospace">10^x</span>, de <code>(</code> ou de <code>)</code>, comme
le rappelle la ligne en bas de l’écran, par exemple shift suivi
de 1 affiche un menu d’algèbre où on retrouve la commande
<code>factor</code>.</p><p>Lorsqu’une commande est entrée sans arguments, un “tooltip”
(petit rectangle sur fonds jaune) affiche une courte description de ce que fait
la commande et la syntaxe, pour voir en entier l’aide sur la commande
il suffit de taper sur la touche flèche vers le bas (ou sur la touche var).
Taper sur Ans pour entrer les arguments du premier exemple de l’aide.
Taper sur la touche EXIT (à droite de OK) pour effacer le tooltip.</p><p>Lorsque vous exécutez une commande et qu’elle
renvoie une expression, celle-ci est affichée
en écriture naturelle (affichage 2-d). Vous pouvez faire défiler 
l’affichage avec les touches du curseur lorsque l’expression est grande.
Tapez sur EXIT (à droite de OK) pour revenir au shell.</p><p>Maintenant essayez de taper la commande <code>plot(sin(x))</code>.
Indication: tapez Toolboox, puis sélectionner 
<code>Courbes</code>, ou utilisez le menu rapide shift 3.</p><p>Lorsqu’une commande renvoie un graphe, celui-ci est affiché. Vous
pouvez modifier la fenêtre graphique d’affichage 
avec les touches <code>+</code> ou <code>-</code> 
(zoom in ou out),
les touches du curseur, orthonormaliser le repère (touche <code>/</code>)
ou faire une recherche automatique de l’échelle (autoscale 
touche <code>*</code>). Pour enlever ou remettre les axes et graduations,
tapez sur var.
Tapez sur EXIT pour revenir au shell.</p><p>Vous pouvez effacer l’historique des calculs et les variables
pour commencer un nouvel exercice : depuis le menu HOME
sélectionnez <code>9 Effacer historique</code>.
Vous avez ensuite le choix entre
effacer l’écran en conservant les variables
(OK) ou en les effaçant (EXIT). Vous pouvez visualiser
la place occupée par les variables en tapant sur la touche <code>var</code>.
Pour effacer une variable pour faire de la place en mémoire,
sélectionnez la commande <code>purge</code> dans ce menu, puis
taper le nom de variable à effacer (ou sélectionnez la variable
depuis le menu <code>var</code>).</p><p>Pour quitter <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS depuis le shell, appuyez sur la touche HOME 2 fois.
Lorsque vous lancez
une autre application, les variables et l’historique des calculs
sont sauvegardés, ils seront restaurés lorsque vous reviendrez
dans <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS.</p><p>Remarques :
</p><ul class="itemize"><li class="li-itemize">
Depuis le shell de calcul, les touches 1 à 9, 0, <code>.</code> et
<code>x10</code><math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><msup><mo/><mi>x</mi></msup></mrow><annotation encoding='application/x-tex'>^x</annotation></semantics></math>, <code>(</code>, <code>)</code>
précédées de shift font apparaitre un
petit menu pour saisir rapidement certaines commandes.
</li><li class="li-itemize">Lorsque le curseur est sur la ligne de commande juste après
un nom de commande, l’appui sur la touche curseur vers le bas
permet de voir l’aide sur la commande (si l’aide existe) et
de saisir un exemple. 
</li><li class="li-itemize">Exemple : tapez shift-2, puis 3 (integrate), flèche vers
le bas, puis Ans ou EXE<br>
 Modifiez l’expression à intégrer selon vos besoin puis tapez EXE
</li><li class="li-itemize">Lorsque la mémoire est presque saturée, les calculs
sont automatiquement
interrompus et un message d’avertissement apparait. Il faut alors
effacer des variables avec la commande <code>purge</code>
(accessible depuis la touche <code>var</code>).
</li></ul>
<!--TOC section id="sec5" Échange de données avec Xcas.-->
<h2 id="sec5" class="section">4  Échange de données avec Xcas.</h2><!--SEC END -->
<!--TOC subsection id="sec6" Depuis un navigateur comme Chromium ou Chrome, compatible
webusb-->
<h3 id="sec6" class="subsection">4.1  Depuis un navigateur comme Chromium ou Chrome, compatible
webusb</h3><!--SEC END --><ul class="itemize"><li class="li-itemize">
<a href="https://www-fourier.univ-grenoble-alpes.fr/~parisse/xcasfr.html">La
version web de Xcas</a> utilisée avec un
navigateur compatible webusb, par exemple Chrome ou Chromium
permet d’échanger des données avec la calculatrice Numworks. 
En cliquant sur le bouton Numworks<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mo>&rightarrow;</mo></mrow><annotation encoding='application/x-tex'>\rightarrow</annotation></semantics></math>, on peut importer
un script de la calculatrice vers la feuille de calcul du navigateur,
le modifier, puis le renvoyer vers la calculatrice avec le bouton
Export. En affichant la section Numworks de la documentation
(depuis le bouton Doc) on a également accès à la certification
du firmware Delta+<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS.
</li><li class="li-itemize"><a href="https://www-fourier.univ-grenoble-alpes.fr/~parisse/nws.html">Le
kit de connexion Numworks</a> permet aussi d’échanger des données
avec la calculatrice Numworks : des scripts Python ou des backups.
On peut aussi installer Delta+<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS, porter assistance à une
calculatrice bloquée et certifier un firmware.
</li></ul>
<!--TOC subsection id="sec7" Depuis Xcas pour Windows, Linux-->
<h3 id="sec7" class="subsection">4.2  Depuis Xcas pour Windows, Linux</h3><!--SEC END --><p>
Vérifiez que 
<a href="https://www-fourier.univ-grenoble-alpes.fr/~parisse/install_fr.html">Xcas</a>.
est en version 1.7.0-23 ou ultérieure,
si nécessaire installez ou mettez à jour.</p><p>Sous Linux, vérifiez que
<a href="http://dfu-util.sourceforge.net/">dfu-util</a> 
est bien installé et que le fichier
<a href="https://www-fourier.univ-grenoble-alpes.fr/~parisse/numworks/50-numworks-calculator.rules"><span style="font-family:monospace">50-numworks-calculator.rules</span></a> a été copié dans
<code>/etc/udev/rules.d</code>. Si vous avez installé un package
debian, cela peut se faire par la commande<br>
<code>sudo cp /usr/share/giac/doc/50-numworks-calculator.rules
/etc/udev/rules.d</code></p><p>Les outils pour se connecter avec la Numworks se trouvent dans le menu
<code>Fich</code>, sous-menu <code>Numworks</code>.
Vous pouvez :
</p><ul class="itemize"><li class="li-itemize">
ouvrir un programme de la calculatrice dans la session actuelle
Xcas ou ouvrir une session <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS Numworks
de la calculatrice dans un nouvel onglet de Xcas,
</li><li class="li-itemize">envoyer la session actuelle Xcas comme une session <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS
sur votre calculatrice,
</li><li class="li-itemize">envoyer le programme de l’éditeur de programme courant
sur votre calculatrice
</li><li class="li-itemize">créer une nouvelle session Xcas contenant tous les programmes
de votre calculatrice
</li><li class="li-itemize">effacer les programmes de votre calculatrice et les
remplacer par tous les programmes de la session Xcas actuelle 
</li><li class="li-itemize">faire une sauvegarde de votre calculatrice
</li><li class="li-itemize">restaurer votre calculatrice à partir d’une sauvegarde
</li><li class="li-itemize">installer Delta+<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS sur une calculatrice (il suffit de le
faire une fois pour toutes)
</li><li class="li-itemize">débloquer une calculatrice Numworks. Ceci fonctionnera
sur toute calculatrice N0110 qui n’est pas verrouillée par
une mise à jour faite sur le site de Numworks après septembre
2021. Cela utilise
le bootloader du fabricant du microprocesseur (ST) 
que l’on lance en maintenant la touche 6
de la calculatrice enfoncée en appuyant sur RESET 
à l’arrière de la calculatrice en même temps.
Ce sous-menu envoie un bootloader “rescue mode” dans la RAM de la
calculatrice et l’exécute, on peut ensuite installer Delta+<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS (ou toute
autre version dérivée d’Epsilon <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mo>&leq;</mo><mn>15</mn></mrow><annotation encoding='application/x-tex'>\leq 15</annotation></semantics></math>).
</li><li class="li-itemize">certifier que la version de Delta+<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS de la
calculatrice d’un élève est identique à
celle fournie avec Xcas (et n’a donc pas été
modifiée et recompilée en y ajoutant des données
personnelles).
</li></ul><p>
Sur Mac, il est recommandé d’utiliser le kit de connectivité web
Numworks de la section précédente.</p>
<!--TOC section id="sec8" Commandes usuelles de calcul formel-->
<h2 id="sec8" class="section">5  Commandes usuelles de calcul formel</h2><!--SEC END -->
<!--TOC subsection id="sec9" Développer et factoriser-->
<h3 id="sec9" class="subsection">5.1  Développer et factoriser</h3><!--SEC END --><p>
Depuis le catalogue, sélectionner le sous-menu <code>Algebre</code>
(2) ou le menu rapide shift-1
</p><ul class="itemize"><li class="li-itemize">
<code>factor</code> : factorisation. Raccourci clavier shift-*
(préfixé) ou <code>=&gt;*</code> (infixé touche sto puis *),
par exemple <br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">x^4-1=>* 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>
.
Utiliser <code>cfactor</code> pour factoriser sur <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mo lspace="0em" rspace="thinmathspace">C</mo></mrow><annotation encoding='application/x-tex'>\C</annotation></semantics></math>.
</li><li class="li-itemize"><code>partfrac</code> : développement d’un polynôme ou
décomposition en éléments simples pour une fraction. Raccourci
clavier <code>=&gt;+</code> (touche sto puis +), 
par exemple <br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large"> (x+1)^4=>+ 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>
 
ou <br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">1/(x^4-1)=>+ 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>
.
</li><li class="li-itemize"><code>simplify</code> : essai de simplifier une expression.
Raccourci clavier <code>=&gt;/</code> (touche <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mo>&rightarrow;</mo></mrow><annotation encoding='application/x-tex'>\rightarrow</annotation></semantics></math> puis /), 
par exemple <br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">sin(3x)/sin(x)=>/ 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>

Attention, cette commande est gourmande en mémoire, et la Numworks
en a peu, le risque de reset existe.
</li><li class="li-itemize"><code>ratnormal</code> : développer une expression,
écrire une fraction sous forme irréductible.
</li></ul>
<!--TOC subsection id="sec10" Analyse-->
<h3 id="sec10" class="subsection">5.2  Analyse</h3><!--SEC END --><p>
Depuis le catalogue (Toolbox), sélectionner le sous-menu <code>Analyse</code>
(4) ou le menu rapide shift-2
</p><ul class="itemize"><li class="li-itemize">
<code>diff</code> : dérivation. On peut aussi utiliser la notation
<code>'</code> (alpha-shift-") pour dériver par rapport à <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>x</mi></mrow><annotation encoding='application/x-tex'>x</annotation></semantics></math>, ainsi
<br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">diff(sin(x),x) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>
 et <br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">sin(x)' 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>
 sont équivalents.
Pour dériver plusieurs fois, ajouter le nombre de dérivations
par exemple <br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">diff(sin(x^2),x,3) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>
.
</li><li class="li-itemize"><code>integrate</code> : primitive si 1 ou 2 arguments,
par exemple 
<br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">integrate(sin(x)) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>
 ou <br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">integrate(1/(t^4-1),t) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>

pour <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mo>&Integral;</mo><mfrac><mn>1</mn><mrow><msup><mi>t</mi> <mn>4</mn></msup><mo>&minus;</mo><mn>1</mn></mrow></mfrac><mspace width="mediummathspace"/><mi>d</mi><mi>t</mi></mrow><annotation encoding='application/x-tex'>\int \frac{1}{t^4&#x2d;1} \ dt </annotation></semantics></math><br>
Calcul d’intégrale définie si 4 arguments, par
exemple <br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">integrate(sin(x)^4,x,0,pi) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>

pour <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><msubsup><mo>&Integral;</mo> <mn>0</mn> <mi>&pi;</mi></msubsup><mi>sin</mi><mo stretchy="false">(</mo><mi>x</mi><msup><mo stretchy="false">)</mo> <mn>4</mn></msup><mspace width="mediummathspace"/><mi>d</mi><mi>x</mi></mrow><annotation encoding='application/x-tex'>\int_0^\pi \sin(x)^4 \ dx</annotation></semantics></math>. Mettre une des bornes
d’intégration sous forme approchée si on souhaite un calcul
approché d’intégrale définie, par exemple
<br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">integrate(sin(x)^4,x,0.0,pi) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>
<br>
</li><li class="li-itemize"><code>limit</code> : limite d’une expression.
Exemple <br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">limit((cos(x)-1)/x^2,x=0) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>

</li><li class="li-itemize"><code>tabvar</code> : tableau de variations d’une expression.
Par exemple <br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">tabvar(x^3-7x+5) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>

on peut vérifier avec le graphe 
<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">plot(x^3-7x+5,x,-4,4)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>

</li><li class="li-itemize"><code>taylor</code> et <code>series</code> : développement de Taylor
(ou développement limité ou asymptotique). Par exemple

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">taylor(sin(x),x=0,5)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>

</li><li class="li-itemize"><code>sum</code> : somme discrète. Par exemple
<br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">sum(k^2,k,1,n) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>
 calcule <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><msubsup><mo lspace="thinmathspace" rspace="thinmathspace">&Sum;</mo> <mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow> <mi>n</mi></msubsup><msup><mi>k</mi> <mn>2</mn></msup></mrow><annotation encoding='application/x-tex'>\sum_{k=1}^n k^2</annotation></semantics></math>,
<br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">sum(k^2,k,1,n)=>* 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>
 calcule la somme et l’écrit sous
forme factorisée.<br>
</li></ul>
<!--TOC subsection id="sec11" Résoudre-->
<h3 id="sec11" class="subsection">5.3  Résoudre</h3><!--SEC END --><p>
Depuis le catalogue, sélectionner le sous-menu <code>Resoudre</code>
(Toolbox puis touche ln)
</p><ul class="itemize"><li class="li-itemize">
<code>solve</code> permet de résoudre de manière exacte
une équation (se ramenant à une équation polynomiale).
Il faut préciser la variable si ce n’est pas <code>x</code> par
exemple <br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">solve(t^2-1=0,t) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>
.<br>
Si la recheche exacte échoue, la commande <code>fsolve</code>
permet de faire une résolution approchée, soit par
une méthode itérative en partant d’une valeur
initiale <br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">fsolve(cos(x)=x,x=0.0) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>
, soit par
dichotomie <br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">fsolve(cos(x)=x,x=0..1) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>
.<br>
Pour avoir des solutions complexes, utiliser <code>csolve</code>.<br>
On peut faire des hypothèses sur la variable que l’on cherche,
par exemple <br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">assume(m>1) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>
 puis <br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">solve(m^2-4=0,m) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>
.
</li><li class="li-itemize"><code>solve</code> permet aussi de résoudre des systèmes
polynomiaux simples, on donne en 1er argument la liste des
équations, en 2ème argument la liste des variables.
Par exemple intersection d’un cercle et d’une droite
<br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">solve([x^2+y^2+2y=3,x+y=1],[x,y]) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>

</li><li class="li-itemize"><code>linsolve</code> permet de résoudre des systèmes
linéaires. On lui passe la liste des équations et la liste
des variables (par convention une expression équivaut
à l’équation expression=0). Par exemple
<br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">linsolve([x+2y=3,x-y=7],[x,y]) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>

<code>linsolve</code> renvoie la solution générale du système 
(y compris si la solution n’est pas unique).
</li><li class="li-itemize"><code>desolve</code> permet de résoudre de manière exacte
certaines équations différentielles, par exemple 
pour résoudre <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>y</mi><mo>&prime;</mo><mo>=</mo><mn>2</mn><mi>y</mi></mrow><annotation encoding='application/x-tex'>y&apos;=2y</annotation></semantics></math>, on tape <code>desolve(y'=2y)</code>.<br>
Un exemple où on indique une condition initiale, 
la variable indépendante
et la fonction inconnue :<br>
<code>desolve([y'=2y,y(0)=1],x,y)</code>
Utiliser <code>odesolve</code>
pour une résolution approchée et <code>plotode</code> pour une
représentation graphique de solution calculée de manière
approchée. 
</li><li class="li-itemize"><code>rsolve</code> permet de résoudre de manière exacte
certaines relations de récurrences <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><msub><mi>u</mi> <mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><msub><mi>u</mi> <mi>n</mi></msub><mo>,</mo><mo>.</mo><mo>.</mo><mo>.</mo><mo stretchy="false">)</mo></mrow><annotation encoding='application/x-tex'>u_{n+1}=f(u_n,...)</annotation></semantics></math>,
par exemple les suites arithmético-géométriques, par
exemple <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><msub><mi>u</mi> <mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><mn>2</mn><msub><mi>u</mi> <mi>n</mi></msub><mo>+</mo><mn>3</mn><mo>,</mo><msub><mi>u</mi> <mn>0</mn></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding='application/x-tex'>u_{n+1}=2u_n+3, u_0=1</annotation></semantics></math>
<br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">rsolve(u(n+1)=2*u(n)+3,u(n),u(0)=1) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>

</li></ul>
<!--TOC subsection id="sec12" Arithmétique-->
<h3 id="sec12" class="subsection">5.4  Arithmétique</h3><!--SEC END --><p>
Lorsque cela est nécessaire,
on distingue l’arithmétique des entiers de celle des polynômes
par l’existence du préfixe <code>i</code> (comme <code>integer</code>) dans
un nom de commande, par exemple <code>ifactor</code> factorise un entier
(pas trop grand) alors que <code>factor</code> factorise un polynôme
(et <code>cfactor</code> factorise un polynôme sur les complexes).
Certaines commandes fonctionnent à la fois pour les entiers et
les polynômes, par exemple <code>gcd</code> et <code>lcm</code>.</p>
<!--TOC subsubsection id="sec13" Entiers-->
<h4 id="sec13" class="subsubsection">5.4.1  Entiers</h4><!--SEC END --><p>
Depuis le catalogue, sélectionner le sous-menu <code>Arithmetic, Crypto</code>
(Toolbox 5)
</p><ul class="itemize"><li class="li-itemize">
<code>iquo(a,b)</code>, 
<code>irem(a,b)</code> quotient et reste de la division euclidienne
de deux entiers.<br>
<br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">iquo(23,13),irem(23,13) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>

</li><li class="li-itemize"><code>isprime(n)</code> teste si <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>n</mi></mrow><annotation encoding='application/x-tex'>n</annotation></semantics></math> est un nombre premier.
Le test est probabiliste pour de grandes valeurs de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>n</mi></mrow><annotation encoding='application/x-tex'>n</annotation></semantics></math>.
<br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">isprime(2^64+1) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>

</li><li class="li-itemize"><code>ifactor(n)</code> factorise un entier pas trop grand
(les algorithmes utilisés se limitent à la division et Pollard-<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&rho;</mi></mrow><annotation encoding='application/x-tex'>\rho</annotation></semantics></math>,
il n’y avait pas de place pour le crible quadratique).
Par exemple
<br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">ifactor(2^64+1) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>
<br>
Raccourci clavier touches <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mo>&rightarrow;</mo></mrow><annotation encoding='application/x-tex'>\rightarrow</annotation></semantics></math> puis * (<code>=&gt;*</code>)
</li><li class="li-itemize"><code>gcd(a,b)</code>, <code>lcm(a,b)</code> PGCD et PPCM de deux entiers
ou de deux polnômes<br>
<br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">gcd(25,15),lcm(25,15) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>
<br>
<br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">gcd(x^3-1,x^2-1),lcm(x^3-1,x^2-1) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>

</li><li class="li-itemize"><code>iegcd(a,b)</code> renvoie 3 entiers <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>u</mi><mo>,</mo><mi>v</mi><mo>,</mo><mi>d</mi></mrow><annotation encoding='application/x-tex'>u,v,d</annotation></semantics></math> tels que
<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>a</mi><mi>u</mi><mo>+</mo><mi>b</mi><mi>v</mi><mo>=</mo><mi>d</mi></mrow><annotation encoding='application/x-tex'>au+bv=d</annotation></semantics></math> où <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>d</mi></mrow><annotation encoding='application/x-tex'>d</annotation></semantics></math> est le PGCD de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>a</mi></mrow><annotation encoding='application/x-tex'>a</annotation></semantics></math> et <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>b</mi></mrow><annotation encoding='application/x-tex'>b</annotation></semantics></math>, avec <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mo stretchy="false">&vert;</mo><mi>u</mi><mo stretchy="false">&vert;</mo><mi>&lt;</mi><mo stretchy="false">&vert;</mo><mi>b</mi><mo stretchy="false">&vert;</mo></mrow><annotation encoding='application/x-tex'>|u|&amp;lt;|b|</annotation></semantics></math> et
<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mo stretchy="false">&vert;</mo><mi>v</mi><mo stretchy="false">&vert;</mo><mi>&lt;</mi><mo stretchy="false">&vert;</mo><mi>a</mi><mo stretchy="false">&vert;</mo></mrow><annotation encoding='application/x-tex'>|v|&amp;lt;|a|</annotation></semantics></math>.<br>
<br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">u,v,d:=iegcd(23,13); 23u+13v 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>

</li><li class="li-itemize"><code>ichinrem([a,m],[b,n])</code> lorsque cela est possible,
renvoie <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>c</mi></mrow><annotation encoding='application/x-tex'>c</annotation></semantics></math> tel que <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>c</mi><mo>=</mo><mi>a</mi><mrow><mo lspace="mediummathspace">(</mo><mo rspace="thinmathspace">mod</mo><mi>m</mi><mo rspace="mediummathspace">)</mo></mrow></mrow><annotation encoding='application/x-tex'>c=a \pmod m</annotation></semantics></math> et <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>c</mi><mo>=</mo><mi>b</mi><mrow><mo lspace="mediummathspace">(</mo><mo rspace="thinmathspace">mod</mo><mi>n</mi><mo rspace="mediummathspace">)</mo></mrow></mrow><annotation encoding='application/x-tex'>c=b \pmod n</annotation></semantics></math> (si <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>m</mi></mrow><annotation encoding='application/x-tex'>m</annotation></semantics></math> et <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>n</mi></mrow><annotation encoding='application/x-tex'>n</annotation></semantics></math>
sont premiers entre eux, <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>c</mi></mrow><annotation encoding='application/x-tex'>c</annotation></semantics></math> existe).
<br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">c,n:=ichinrem([1,23],[2,13]); irem(c,23); irem(c,13) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>

</li><li class="li-itemize"><code>powmod(a,n,m)</code> calcule <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><msup><mi>a</mi> <mi>n</mi></msup><mrow><mo lspace="mediummathspace">(</mo><mo rspace="thinmathspace">mod</mo><mi>m</mi><mo rspace="mediummathspace">)</mo></mrow></mrow><annotation encoding='application/x-tex'>a^n \pmod m</annotation></semantics></math> par
l’algorithme de la puissance rapide modulaire.
<br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">powmod(7,22,23) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>

</li></ul><p>
Les commandes <code>asc</code> et <code>char</code> permettent de convertir
une chaine de caractères en liste d’entiers (entre 0 et 255) et
réciproquement, ce qui permet de faire facilement de la cryptographie
avec des messages sous forme de chaines de caractères.</p>
<!--TOC subsubsection id="sec14" Polynômes-->
<h4 id="sec14" class="subsubsection">5.4.2  Polynômes</h4><!--SEC END --><p>
Depuis le catalogue, sélectionner le sous-menu <code>Polynomes</code> (8).
La variable est par défaut <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>x</mi></mrow><annotation encoding='application/x-tex'>x</annotation></semantics></math>, sinon il faut la spécifier en
général en dernier argument, par exemple <code>degree(x^2*y)</code>
ou <code>degree(x^2*y,x)</code> renvoient 2, alors que <code>degree(x^2*y,y)</code>
renvoie 1
</p><ul class="itemize"><li class="li-itemize">
<code>coeff(P,n)</code> coefficient de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><msup><mi>x</mi> <mi>n</mi></msup></mrow><annotation encoding='application/x-tex'>x^n</annotation></semantics></math> dans <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>P</mi></mrow><annotation encoding='application/x-tex'>P</annotation></semantics></math>, <code>lcoeff(P)</code>
coefficient dominant de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>P</mi></mrow><annotation encoding='application/x-tex'>P</annotation></semantics></math>, par exemple
<br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">P:=x^3+3x; coeff(P,1); lcoeff(P) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>

</li><li class="li-itemize"><code>degre(P)</code> degré du polynôme <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>P</mi></mrow><annotation encoding='application/x-tex'>P</annotation></semantics></math>.

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">degree(x^3)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>

</li><li class="li-itemize"><code>quo(P,Q)</code>, <code>rem(P,Q)</code> quotient et reste de la division
euclidienne de <code>P</code> par <code>Q</code>
<br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">P:=x^3+7x-5; Q:=x^2+x; quo(P,Q); rem(P,Q) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>

</li><li class="li-itemize"><code>proot(P)</code> : racines approchées de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>P</mi></mrow><annotation encoding='application/x-tex'>P</annotation></semantics></math> (réelles et complexes)<br>

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">proot(x^5+x+1)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>

Représentation graphique :<br>

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">point(proot(x^5+x+1))
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>

</li><li class="li-itemize"><code>interp(X,Y)</code> : pour deux listes
de même taille, polynôme d’interpolation
passant par les points <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mo stretchy="false">(</mo><msub><mi>X</mi> <mi>i</mi></msub><mo>,</mo><msub><mi>Y</mi> <mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding='application/x-tex'>(X_i,Y_i)</annotation></semantics></math>. <br>
<br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">X,Y:=[0,1,2,3],[1,-3,-2,0]; P:=interp(X,Y)=>+ 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>

Représentation graphique<br>

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">scatterplot(X,Y); plot(P,x,-1,4)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>

</li><li class="li-itemize"><code>resultant(P,Q)</code> : résultant des polynômes
<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>P</mi></mrow><annotation encoding='application/x-tex'>P</annotation></semantics></math> et <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>Q</mi></mrow><annotation encoding='application/x-tex'>Q</annotation></semantics></math>

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">P:=x^3+7x-5; Q:=x^2+x; resultant(P,Q)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>

</li><li class="li-itemize"><code>hermite(x,n)</code> : n-ième polynôme de Hermite,
orthogonal pour la densité <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><msup><mi>e</mi> <mrow><mo lspace="verythinmathspace" rspace="0em">&minus;</mo><msup><mi>x</mi> <mn>2</mn></msup></mrow></msup><mi>d</mi><mi>x</mi></mrow><annotation encoding='application/x-tex'>e^{&#x2d;x^2}dx</annotation></semantics></math> sur <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mo lspace="0em" rspace="thinmathspace">R</mo></mrow><annotation encoding='application/x-tex'>\R</annotation></semantics></math>
</li><li class="li-itemize"><code>laguerre(x,n,a)</code> : n-ième polynôme de Laguerre,
</li><li class="li-itemize"><code>legendre(x,n)</code> : n-ième polynôme de Legendre,
orthogonal pour la densité <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>d</mi><mi>x</mi></mrow><annotation encoding='application/x-tex'>dx</annotation></semantics></math> sur <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mo stretchy="false">[</mo><mo lspace="verythinmathspace" rspace="0em">&minus;</mo><mn>1</mn><mo>,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding='application/x-tex'>[&#x2d;1,1]</annotation></semantics></math>
</li><li class="li-itemize"><code>tchebyshev1(n)</code> et <code>tchebyshev2(n)</code>
polynômes de Tchebyshev de 1ère et 2ème espèce
définis par :
<math xmlns='http://www.w3.org/1998/Math/MathML' display='block'><semantics><mrow><msub><mi>T</mi> <mi>n</mi></msub><mo stretchy="false">(</mo><mi>cos</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>=</mo><mi>cos</mi><mo stretchy="false">(</mo><mi>n</mi><mi>x</mi><mo stretchy="false">)</mo><mo>,</mo><mspace width="1em"/><msub><mi>U</mi> <mi>n</mi></msub><mo stretchy="false">(</mo><mi>cos</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mi>sin</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>sin</mi><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding='application/x-tex'>T_n(\cos(x))=\cos(nx), \quad U_n(\cos(x))\sin(x)=\sin((n+1)x) </annotation></semantics></math>
</li></ul>
<!--TOC subsubsection id="sec15" <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&Zopf;</mi><mo stretchy="false">/</mo><mi>n</mi><mi>&Zopf;</mi></mrow><annotation encoding='application/x-tex'>\mathbb{Z}/n\mathbb{Z}</annotation></semantics></math> et corps finis-->
<h4 id="sec15" class="subsubsection">5.4.3  <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&Zopf;</mi><mo stretchy="false">/</mo><mi>n</mi><mi>&Zopf;</mi></mrow><annotation encoding='application/x-tex'>\mathbb{Z}/n\mathbb{Z}</annotation></semantics></math> et corps finis</h4><!--SEC END --><p>
Pour travailler avec des classes modulo <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>n</mi></mrow><annotation encoding='application/x-tex'>n</annotation></semantics></math>, utiliser la notation
<code>a mod n</code>, par exemple <code>sqrt(2 mod 7)</code>.
Ceci s’applique aussi pour travailler sur des corps finis premiers
<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&Zopf;</mi><mo stretchy="false">/</mo><mi>p</mi><mi>&Zopf;</mi></mrow><annotation encoding='application/x-tex'>\mathbb{Z}/p\mathbb{Z}</annotation></semantics></math>. Pour travailler sur des corps finis
non premiers, il faut d’abord définir le corps avec <code>GF</code>,
puis on utilise un polynôme en le générateur du corps.</p>
<!--TOC subsection id="sec16" Algèbre linéaire, vecteurs, matrices-->
<h3 id="sec16" class="subsection">5.5  Algèbre linéaire, vecteurs, matrices</h3><!--SEC END --><p>
Xcas ne fait pas de différence entre vecteur et liste. Par
exemple pour faire le produit scalaire de deux vecteurs, on peut
saisir :

</p><pre class="verbatim">v:=[1,2]; w:=[3,4]</pre><p> 
<button onclick="var field=parentNode.previousSibling; var tmp=field.innerHTML;if(tmp.length==0) tmp=field.value;var t=createElement('TEXTAREA');t.style.fontSize=20;t.cols=60;t.rows=UI.count_newline(tmp);var tmp1=UI.ltgt(tmp)[0];t.value=tmp1;tmp=UI.caseval(tmp);tmp=UI.rmquote(tmp);nextSibling.innerHTML=tmp; UI.render_canvas(nextSibling); field.parentNode.insertBefore(t,field);field.parentNode.removeChild(field);">exe</button><span>onload</span><br>



<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">dot(v,w)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>
</p><p>Pour saisir une matrice élément par élément, taper
sur shift-7 (touche M comme matrice) puis <code>matrix(</code>
ou <code>HOME i</code> (editer matrice). Vous pouvez ensuite
créer une nouvelle matrice ou éditer
une matrice existante parmi la liste de variables proposées. 
Pour de petites matrices, vous pouvez aussi
entrer en ligne de commandes
une liste de listes de même taille. Par exemple
pour définir la matrice
<math xmlns='http://www.w3.org/1998/Math/MathML' display='block'><semantics><mrow><mi>A</mi><mo>=</mo><mrow><mo>(</mo><mtable displaystyle="false" rowspacing="0.5ex" columnalign="center center"><mtr><mtd><mn>1</mn></mtd> <mtd><mn>2</mn></mtd></mtr> <mtr><mtd><mn>3</mn></mtd> <mtd><mn>4</mn></mtd></mtr></mtable><mo>)</mo></mrow></mrow><annotation encoding='application/x-tex'>A=\left(\begin{array}{cc} 1 &amp; 2 \\ 3 &amp; 4 \end{array}\right) </annotation></semantics></math>
on tape 
</p><pre class="verbatim">A:=[[1,2],[3,4]]</pre><p> 
<button onclick="var field=parentNode.previousSibling; var tmp=field.innerHTML;if(tmp.length==0) tmp=field.value;var t=createElement('TEXTAREA');t.style.fontSize=20;t.cols=60;t.rows=UI.count_newline(tmp);var tmp1=UI.ltgt(tmp)[0];t.value=tmp1;tmp=UI.caseval(tmp);tmp=UI.rmquote(tmp);nextSibling.innerHTML=tmp; UI.render_canvas(nextSibling); field.parentNode.insertBefore(t,field);field.parentNode.removeChild(field);">exe</button><span>onload</span><br>

 
ou <br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">[[1,2],[3,4]]=>A 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>
</p><p>Il est fortement conseillé de stocker les matrices dans des variables
pour éviter de les saisir plusieurs fois.</p><p>Pour entrer une matrice dont les coefficients sont
donnés par une formule,
on peut utiliser la commande <code>matrix</code>, par
exemple 
<br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">matrix(2,2,(j,k)->1/(j+k+1)) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>
 
renvoie
la matrice dont le coefficient ligne <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>j</mi></mrow><annotation encoding='application/x-tex'>j</annotation></semantics></math> et colonne <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>k</mi></mrow><annotation encoding='application/x-tex'>k</annotation></semantics></math> vaut
<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mfrac><mn>1</mn><mrow><mi>j</mi><mo>+</mo><mi>k</mi><mo>+</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding='application/x-tex'>\frac{1}{j+k+1}</annotation></semantics></math> (attention les indices commencent à 0). </p><p>La matrice identité de taille <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>n</mi></mrow><annotation encoding='application/x-tex'>n</annotation></semantics></math> 
est renvoyée par la commande <code>idn(n)</code>,
alors que <code>ranm(n,m,loi,[parametres])</code> renvoie
une matrice à coefficients aléatoires de taille <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>n</mi><mo>,</mo><mi>m</mi></mrow><annotation encoding='application/x-tex'>n,m</annotation></semantics></math>.
Par exemple 
<br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">U:=ranm(4,4,uniformd,0,1) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>

<br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">N:=ranm(4,4,normald,0,1) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>
</p><p>Pour exécuter une commande sur des matrices, s’il s’agit
d’arithmétique de base (<code>+,-,*</code> inverse), on utilise
les opérations au clavier. Pour les autres commandes.
depuis le catalogue, sélectionner le sous-menu <code>Matrices</code>
(Toolbox sin)
</p><ul class="itemize"><li class="li-itemize">
<br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">eigenvals(A) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>

<br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">eigenvects(A) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>
 
renvoient les valeurs
propres et vecteurs propres d’une matrice carrée <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>A</mi></mrow><annotation encoding='application/x-tex'>A</annotation></semantics></math>. 
</li><li class="li-itemize"><br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">P,D:=jordan(A) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>
 
calcule la forme normale de Jordan d’une matrice <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>A</mi></mrow><annotation encoding='application/x-tex'>A</annotation></semantics></math>
(à coefficients exacts) et renvoie les matrices <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>P</mi></mrow><annotation encoding='application/x-tex'>P</annotation></semantics></math> et <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>D</mi></mrow><annotation encoding='application/x-tex'>D</annotation></semantics></math> telles que
<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><msup><mi>P</mi> <mrow><mo lspace="verythinmathspace" rspace="0em">&minus;</mo><mn>1</mn></mrow></msup><mi>A</mi><mi>P</mi><mo>=</mo><mi>D</mi></mrow><annotation encoding='application/x-tex'>P^{&#x2d;1}AP=D</annotation></semantics></math>, avec <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>D</mi></mrow><annotation encoding='application/x-tex'>D</annotation></semantics></math> triangulaire supérieure (diagonale si <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>A</mi></mrow><annotation encoding='application/x-tex'>A</annotation></semantics></math> est
diagonalisable)
</li><li class="li-itemize"><br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">Ak:=matpow(A,k) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>
 calcule la puissance <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>k</mi></mrow><annotation encoding='application/x-tex'>k</annotation></semantics></math>-ième
d’une matrice <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>A</mi></mrow><annotation encoding='application/x-tex'>A</annotation></semantics></math> avec <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>k</mi></mrow><annotation encoding='application/x-tex'>k</annotation></semantics></math> une variable formelle.
</li><li class="li-itemize"><code>rref</code> effectue la réduction sous forme échelonnée
d’une matrice <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>A</mi></mrow><annotation encoding='application/x-tex'>A</annotation></semantics></math> (pivot de Gauss)
</li><li class="li-itemize"><code>lu</code> calcule la décomposition <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>L</mi><mi>U</mi></mrow><annotation encoding='application/x-tex'>LU</annotation></semantics></math> d’une matrice <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>A</mi></mrow><annotation encoding='application/x-tex'>A</annotation></semantics></math>
et renvoie une permutation de matrice <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>P</mi></mrow><annotation encoding='application/x-tex'>P</annotation></semantics></math> et deux matrices <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>L</mi></mrow><annotation encoding='application/x-tex'>L</annotation></semantics></math>
triangulaire inférieure et <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>U</mi></mrow><annotation encoding='application/x-tex'>U</annotation></semantics></math> triangulaire supérieure telles que
<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>P</mi><mi>A</mi><mo>=</mo><mi>L</mi><mi>U</mi></mrow><annotation encoding='application/x-tex'>PA=LU</annotation></semantics></math>. Le résultat de la commande 

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">P,L,U:=lu(A)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>
 peut
être passé en argument à la commande 
<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">linsolve(P,L,U,v)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>

pour résoudre un système <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>A</mi><mi>x</mi><mo>=</mo><mi>b</mi></mrow><annotation encoding='application/x-tex'>Ax=b</annotation></semantics></math> de matrice <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>A</mi></mrow><annotation encoding='application/x-tex'>A</annotation></semantics></math> en résolvant
deux systèmes triangulaires (calcul en <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi> <mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding='application/x-tex'>O(n^2)</annotation></semantics></math> au lieu
de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi> <mn>3</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding='application/x-tex'>O(n^3)</annotation></semantics></math>).
</li><li class="li-itemize"><code>qr</code> calcule la décomposition <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>Q</mi><mi>R</mi></mrow><annotation encoding='application/x-tex'>QR</annotation></semantics></math> d’une matrice <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>A</mi></mrow><annotation encoding='application/x-tex'>A</annotation></semantics></math>
et renvoie deux matrices <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>Q</mi></mrow><annotation encoding='application/x-tex'>Q</annotation></semantics></math> orthogonale et <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>R</mi></mrow><annotation encoding='application/x-tex'>R</annotation></semantics></math> triangulaire supérieure
telles que <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>A</mi><mo>=</mo><mi>Q</mi><mi>R</mi></mrow><annotation encoding='application/x-tex'>A=QR</annotation></semantics></math>.
</li><li class="li-itemize"><code>svd(A)</code> calcule la factorisation en valeurs
singulières d’une matrice <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>A</mi></mrow><annotation encoding='application/x-tex'>A</annotation></semantics></math>, et renvoie 
<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>U</mi></mrow><annotation encoding='application/x-tex'>U</annotation></semantics></math> orthogonale, <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>S</mi></mrow><annotation encoding='application/x-tex'>S</annotation></semantics></math> vecteur des valeurs singulières, <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>Q</mi></mrow><annotation encoding='application/x-tex'>Q</annotation></semantics></math>
orthogonale tels que <code>A=U*diag(S)*tran(Q)</code>. Le rapport
de la plus grande valeur singulière de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>S</mi></mrow><annotation encoding='application/x-tex'>S</annotation></semantics></math> sur la plus petite
donne le nombre de condition de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>A</mi></mrow><annotation encoding='application/x-tex'>A</annotation></semantics></math> relativement à la norme euclidienne,
plus ce nombre est grand, plus on perd en précision en résolvant
un système <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>A</mi><mi>x</mi><mo>=</mo><mi>b</mi></mrow><annotation encoding='application/x-tex'>Ax=b</annotation></semantics></math> lorsque <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>b</mi></mrow><annotation encoding='application/x-tex'>b</annotation></semantics></math> n’est pas connu exactement.
</li></ul>
<!--TOC section id="sec17" Probabilités et statistiques-->
<h2 id="sec17" class="section">6  Probabilités et statistiques</h2><!--SEC END -->
<!--TOC subsection id="sec18" Tirages aléatoires-->
<h3 id="sec18" class="subsection">6.1  Tirages aléatoires</h3><!--SEC END --><p>
Depuis le catalogue, sélectionner le sous-menu <code>Probabilites</code>
(Toolbox 9) puis sélectionnez 
<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">rand()
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>
 (réel selon
la loi uniforme dans <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding='application/x-tex'>[0,1]</annotation></semantics></math>) ou 

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">n:=6:; randint(n)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>
 
(entier
entre 1 et <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>n</mi></mrow><annotation encoding='application/x-tex'>n</annotation></semantics></math>). De nombreuses autres fonctions aléatoires
existent, avec comme préfixe <code>rand</code>, suivi par le nom
de la loi, par exemple <code>randbinomial(n,p)</code> renvoie
un entier aléatoire selon la loi binomiale de paramètres <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>n</mi><mo>,</mo><mi>p</mi></mrow><annotation encoding='application/x-tex'>n,p</annotation></semantics></math>.
Pour créer un vecteur ou une matrice aléatoire, utiliser la commande
<code>ranv</code> ou <code>ranm</code> (menu <code>Alglin, Matrice</code>), 
par exemple pour un vecteur de 10 composantes
selon la loi normale centrée réduite 
<br><textarea onkeypress="UI.ckenter(event,this,2)" 
style="width:400px;font-size:large">ranv(10,normald,0,1) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">exe</button><span></span><br>
</p>
<!--TOC subsection id="sec19" Lois de probabilités-->
<h3 id="sec19" class="subsection">6.2  Lois de probabilités</h3><!--SEC END --><p>
Depuis le catalogue, sélectionner le sous-menu <code>Probabilites</code> (9).
Les lois proposées dans le catalogue sont la loi binomiale, la loi normale,
la loi exponentielle et la loi uniforme. 
D’autres lois sont disponibles depuis <code>Tout</code> :
<code>chisquared</code>, <code>geometric</code>, <code>multinomial</code>
<code>studentd</code>, <code>fisherd</code>, <code>poisson</code>.</p><p>Pour obtenir la distribution cumulée d’une loi, on saisit le nom de la loi
et le suffixe <code>_cdf</code> (sélectionner <code>cdf</code> dans le catalogue
sous-menu Probabilités et taper F1). 
Pour obtenir la distribution cumulée inverse,
on saisit le nom de la loi et le suffixe <code>_icdf</code> 
(sélectionner <code>cdf</code> dans le catalogue
sous-menu Probabilités et taper F2).</p><p>Exemple : calcul de l’intervalle centré <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>I</mi></mrow><annotation encoding='application/x-tex'>I</annotation></semantics></math>
pour la loi normale de moyenne 5000 et d’écart-type 200
tel que la probabilité d’être en-dehors de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>I</mi></mrow><annotation encoding='application/x-tex'>I</annotation></semantics></math> soit de 5% :

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">M:=5000; S:=200; normald_icdf(M,S,0.025);normald_icdf(M,S,0.975)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>
</p>
<!--TOC subsection id="sec20" Statistiques descriptives 1-d-->
<h3 id="sec20" class="subsection">6.3  Statistiques descriptives 1-d</h3><!--SEC END --><p>
Ces fonctions agissent sur des listes
par exemple 
</p><pre class="verbatim">l:=[9,11,6,13,17,10]</pre><p> 
<button onclick="var field=parentNode.previousSibling; var tmp=field.innerHTML;if(tmp.length==0) tmp=field.value;var t=createElement('TEXTAREA');t.style.fontSize=20;t.cols=60;t.rows=UI.count_newline(tmp);var tmp1=UI.ltgt(tmp)[0];t.value=tmp1;tmp=UI.caseval(tmp);tmp=UI.rmquote(tmp);nextSibling.innerHTML=tmp; UI.render_canvas(nextSibling); field.parentNode.insertBefore(t,field);field.parentNode.removeChild(field);">exe</button><span>onload</span><br>


Depuis le catalogue, sélectionner le sous-menu <code>Statistiques</code>
(Toolbox log)
</p><ul class="itemize"><li class="li-itemize">

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">mean(l)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>
 : moyenne arithmétique d’une liste
</li><li class="li-itemize">
<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">stddev(l)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>
 : écart-type d’une liste<br>
Utiliser

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">stddevp(l)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>
 pour avoir un estimateur non biaisé
de l’écart-type d’une population dont <code>l</code> est un échantillon
</li><li class="li-itemize">
<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">median(l)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>
, 
<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">quartile1(l)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>
, 

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">quartile3(l)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>

renvoient respectivement la médiane, le 1er et 3ème quartiles
d’une liste
</li></ul><p>
Pour les statistiques 1-d de listes avec effectifs, on remplace
<code>l</code> par deux listes de même longueur, la 1ère liste
est la liste des valeurs de la série statistique, la 2ème
liste est la liste des effectifs.
Voir aussi les commandes du menu <code>shift-3</code> 
<code>histogram</code> et <code>barplot</code>.</p>
<!--TOC subsection id="sec21" Statistiques descriptives 2-d, régressions.-->
<h3 id="sec21" class="subsection">6.4  Statistiques descriptives 2-d, régressions.</h3><!--SEC END --><p> <a id="sec:stat2d"></a>
Voir aussi la section <a href="#sec%3Atableur">15</a> expliquant le tableur.</p><p>Entrez les deux listes de données dans deux variables, par exemple
<code>X:=[1,2,3,4,5]</code> et <code>Y:=[3,5,6,8,11]</code>, ou dans une variable
matrice ayant 2 colonnes,
depuis le shell avec le menu <code>shift-6</code> <code>8 matrix(</code>.<br>
Depuis le catalogue, sélectionner le sous-menu <code>Statistiques</code>
(touches <code>Toolbox log</code>), pour les régressions,
depuis le shell, tapez <code>shift-6</code>.
</p><ul class="itemize"><li class="li-itemize">
<code>correlation(X,Y)</code> calcule la corrélation entre 
2 listes de même taille.
</li><li class="li-itemize"><code>covariance(X,Y)</code> calcule la covariance entre 
2 listes de même taille.
</li><li class="li-itemize">les commandes de suffixe <code>_regression(X,Y)</code> calculent
des ajustements par régression au sens des moindres carrés,
les commandes de suffixe <code>_regression_plot</code> tracent
la courbe représentative de la régression (Ces commandes affichent
de plus le coefficient <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><msup><mi>R</mi> <mn>2</mn></msup></mrow><annotation encoding='application/x-tex'>R^2</annotation></semantics></math> qui permet de quantifier la qualité
de l’ajustement (plus <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><msup><mi>R</mi> <mn>2</mn></msup></mrow><annotation encoding='application/x-tex'>R^2</annotation></semantics></math> est proche de 1, meilleur est
l’ajustement).
Khicas a des commandes pour faire des régressions linéaires,
exponentielles, logarithmiques, puissance, polynomiales et logistique.
</li><li class="li-itemize">Par exemple <code>linear_regression(X,Y)</code> renvoie
les coefficients <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>m</mi><mo>,</mo><mi>p</mi></mrow><annotation encoding='application/x-tex'>m,p</annotation></semantics></math> de la droite de régression linéaire
<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>y</mi><mo>=</mo><mi>m</mi><mi>x</mi><mo>+</mo><mi>p</mi></mrow><annotation encoding='application/x-tex'>y=mx+p</annotation></semantics></math>. <br>
<code>linear_regression_plot(X,Y)</code> trace la droite 
d’ajustement des données contenues dans les listes
<code>X,Y</code> de même taille.
</li><li class="li-itemize">voir aussi les commandes <code>scatterplot</code>, <code>polygonplot</code>
et <code>polygonscatterplot</code> pour afficher les données
sur un graphique. On peut superposer plusieurs courbes de régression
sur le même graphe en les séparant par un <code>;</code> en ligne
de commande.
</li></ul><p>
Ainsi pour afficher la droite de régression linéaire correspondant
aux données <code>X=[1,2,3,4,5]</code> et <code>Y=[3,5,6,8,11]</code>,
tapez les deux commandes ci-dessus ou éditez une matrice ayant 2 colonnes
avec le raccourci <code>shift-6 8</code>. Puis <code>shift-6 EXE</code>
(ou <code>Toolbox log</code> puis
sélectionnez la commande <code>linear_regression_plot(</code>)
complétez la commande par <code>X,Y)</code> ou par le nom de variable
de la matrice puis EXE.</p><p>Remarque : si vos données sont dans une matrice <code>m</code>
ayant 2 lignes au lieu de 2 colonnes, vous pouvez utiliser <code>m^*</code>
pour transposer (en fait cela transconjugue, ce qui est identique
pour des données réelles).</p>
<!--TOC section id="sec22" Courbes et autres représentations graphiques-->
<h2 id="sec22" class="section">7  Courbes et autres représentations graphiques</h2><!--SEC END --><p>
Depuis le catalogue, sélectionner le sous-menu <code>Courbes</code>
(accès rapide par Toolbox 7, ou shift-3 depuis le shell).
</p><ul class="itemize"><li class="li-itemize">
<code>plot(f(x),x=a..b)</code> trace le graphe de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding='application/x-tex'>f(x)</annotation></semantics></math> pour <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>x</mi><mo>&Element;</mo><mo stretchy="false">[</mo><mi>a</mi><mo>,</mo><mi>b</mi><mo stretchy="false">]</mo></mrow><annotation encoding='application/x-tex'>x\in [a,b]</annotation></semantics></math>.
On peut spécifier un pas de discrétisation avec <code>xstep=</code>,
par exemple 
<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">plot(x^2,x=-4..4,xstep=1)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>

</li><li class="li-itemize"><code>LineTan(f(x),x,x0)</code> trace la tangente au graphe
de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding='application/x-tex'>f(x)</annotation></semantics></math> en <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>x</mi><mo>=</mo><msub><mi>x</mi> <mn>0</mn></msub></mrow><annotation encoding='application/x-tex'>x=x_0</annotation></semantics></math>.
</li><li class="li-itemize"><code>plotarea(f(x),x=a..b,n,methode)</code>
trace le graphe de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding='application/x-tex'>f(x)</annotation></semantics></math> pour <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>x</mi><mo>&Element;</mo><mo stretchy="false">[</mo><mi>a</mi><mo>,</mo><mi>b</mi><mo stretchy="false">]</mo></mrow><annotation encoding='application/x-tex'>x\in [a,b]</annotation></semantics></math>, et noircit
une portion du plan qui approche l’aire sous la courbe,
on peut préciser une méthode d’intégration avec <code>n</code>
subdivisions parmi <code>rectangle_droit</code>, <code>rectangle_gauche</code>,
<code>trapezes</code>, <code>simpson</code> (aller dans Toolbox , Options
puis taper le début du nom de la méthode pour la saisir plus
rapidement)
</li><li class="li-itemize"><code>plotseq(f(x),x=[u0,a,b])</code> graphe “en toile d’araignée”
de la suite récurrente <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><msub><mi>u</mi> <mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><msub><mi>u</mi> <mi>n</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding='application/x-tex'>u_{n+1}=f(u_n)</annotation></semantics></math> de premier terme <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><msub><mi>u</mi> <mn>0</mn></msub></mrow><annotation encoding='application/x-tex'>u_0</annotation></semantics></math> donné.
Par exemple si <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><msub><mi>u</mi> <mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msqrt><mrow><mn>2</mn><mo>+</mo><msub><mi>u</mi> <mi>n</mi></msub></mrow></msqrt><mo>,</mo><msub><mi>u</mi> <mn>0</mn></msub><mo>=</mo><mn>6</mn></mrow><annotation encoding='application/x-tex'>u_{n+1}=\sqrt{2+u_n}, u_0=6</annotation></semantics></math> avec une représentation
sur <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo>,</mo><mn>7</mn><mo stretchy="false">]</mo></mrow><annotation encoding='application/x-tex'>[0,7]</annotation></semantics></math>

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">plotseq(sqrt(2+x),x=[6,0,7])
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>

</li><li class="li-itemize"><code>plotparam([x(t),y(t)],t=tm..tM)</code> courbe en paramétriques
<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>,</mo><mi>y</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding='application/x-tex'>(x(t),y(t))</annotation></semantics></math> pour <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>t</mi><mo>&Element;</mo><mo stretchy="false">[</mo><msub><mi>t</mi> <mi>m</mi></msub><mo>,</mo><msub><mi>t</mi> <mi>M</mi></msub><mo stretchy="false">]</mo></mrow><annotation encoding='application/x-tex'>t\in [t_m,t_M]</annotation></semantics></math>.
On peut spécifier un pas de discrétisation avec <code>tstep=</code>
par exemple

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">plotparam([sin(2t),cos(3t)],t,0,2*pi)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>

</li><li class="li-itemize"><code>plotpolar(r(theta),theta=a..b)</code> courbe
en polaires <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>r</mi><mo stretchy="false">(</mo><mi>&theta;</mi><mo stretchy="false">)</mo></mrow><annotation encoding='application/x-tex'>r(\theta)</annotation></semantics></math> pour <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&theta;</mi><mo>&Element;</mo><mo stretchy="false">[</mo><mi>a</mi><mo>,</mo><mi>b</mi><mo stretchy="false">]</mo></mrow><annotation encoding='application/x-tex'>\theta \in [a,b]</annotation></semantics></math>,
par exemple

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">plotpolar(sin(3*theta),theta,0,2*pi)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>

</li><li class="li-itemize"><code>plotlist(l)</code> pour une liste <code>l</code>,
trace la ligne polygonale reliant
les points de coordonnées <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mo stretchy="false">(</mo><mi>i</mi><mo>,</mo><msub><mi>l</mi> <mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding='application/x-tex'>(i,l_i)</annotation></semantics></math> (indice <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>i</mi></mrow><annotation encoding='application/x-tex'>i</annotation></semantics></math> commençant à 0).<br>
<code>plotlist([X1,Y1],[X2,Y2],...)</code> 
trace la ligne polygonale reliant
les points de coordonnées <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mo stretchy="false">(</mo><msub><mi>X</mi> <mi>i</mi></msub><mo>,</mo><msub><mi>Y</mi> <mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding='application/x-tex'>(X_i,Y_i)</annotation></semantics></math> 
</li><li class="li-itemize"><code>scatterplot(X,Y)</code>, <code>polygonscatterplot(X,Y)</code>
pour 2 listes <code>X,Y</code> de même taille, trace un nuage de points
ou une ligne polygonale reliant
les points de coordonnées <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mo stretchy="false">(</mo><msub><mi>X</mi> <mi>i</mi></msub><mo>,</mo><msub><mi>Y</mi> <mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding='application/x-tex'>(X_i,Y_i)</annotation></semantics></math> 
</li><li class="li-itemize"><code>histogram(l,class_min,class_size)</code> trace
l’histogramme des données de la liste <code>l</code> avec
comme largeur de classe <code>class_size</code> en commençant
à <code>class_min</code>. Par exemple, on peut tester la qualité
du générateur aléatoire avec

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">l:=ranv(500,normald,0,1); histogram(l,-4,0.25); plot(normald(x),x,-4,4)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>

</li><li class="li-itemize"><code>plotcontour(f(x,y),[x=xmin..xmax,y=ymin..ymax],[l0,l1,...])</code>
trace les courbes de niveaux <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>l</mi> <mn>0</mn></msub><mo>,</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>l</mi> <mn>1</mn></msub><mo>,</mo><mo>.</mo><mo>.</mo><mo>.</mo></mrow><annotation encoding='application/x-tex'>f(x,y)=l_0, f(x,y)=l_1, ...</annotation></semantics></math>.
</li><li class="li-itemize"><code>plotdensity(f(x,y),[x=xmin..xmax,y=ymin..ymax])</code>
représentation par niveaux de couleurs de la fonction de 2 variables
<code>x</code> et <code>y</code> dans le rectangle spécifié (par défaut
entre -4 et 4).
</li><li class="li-itemize"><code>plotfield(f(t,y),[t=tmin..tmax,y=ymin..ymax])</code>
trace le champ des tangentes à l’équation différentielle
<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>y</mi><mo>&prime;</mo><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>t</mi><mo>,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding='application/x-tex'>y&apos;=f(t,y)</annotation></semantics></math>. On peut ajouter en dernier paramètre
optionnel <code>,plotode=[t0,y0]</code>
pour tracer simultanément la solution passant par la condition
initiale <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>y</mi><mo stretchy="false">(</mo><msub><mi>t</mi> <mn>0</mn></msub><mo stretchy="false">)</mo><mo>=</mo><msub><mi>y</mi> <mn>0</mn></msub></mrow><annotation encoding='application/x-tex'>y(t_0)=y_0</annotation></semantics></math>. Exemple <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>y</mi><mo>&prime;</mo><mo>=</mo><mi>sin</mi><mo stretchy="false">(</mo><mi>t</mi><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding='application/x-tex'>y&apos;=\sin(ty)</annotation></semantics></math> sur l’intervalle <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mo stretchy="false">[</mo><mo lspace="verythinmathspace" rspace="0em">&minus;</mo><mn>3</mn><mo>,</mo><mn>3</mn><mo stretchy="false">]</mo></mrow><annotation encoding='application/x-tex'>[&#x2d;3,3]</annotation></semantics></math>
en temps et <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mo stretchy="false">[</mo><mo lspace="verythinmathspace" rspace="0em">&minus;</mo><mn>2</mn><mo>,</mo><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding='application/x-tex'>[&#x2d;2,2]</annotation></semantics></math> en <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>y</mi></mrow><annotation encoding='application/x-tex'>y</annotation></semantics></math><br>

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">plotfield(sin(t*y),[t=-3..3,y=-3..3],plotode=[0,1])
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>

On peut aussi utiliser la commande <code>plotode</code> en-dehors d’une commande
<code>plotfield</code>.
</li></ul><p>
On peut tracer simultanément plusieurs graphiques, il suffit de séparer
les commandes de tracé par <code>;</code></p><p>Le menu <code>Options</code> (Toolbox ,)
vous permet de spécifier certaines options graphiques :
</p><ul class="itemize"><li class="li-itemize">
pour les couleurs, on utilise 
<code>display=couleur</code>, par exemple

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">plot(sin(x),display=red)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>

</li><li class="li-itemize">Pour changer l’épaisseur des segments (y compris les lignes
polygonales utilisées pour tracer une courbe), utiliser
<code>display=line_width_2</code> à <code>display=line_width_8</code>.
Pour changer à la fois la couleur et l’épaisseur, additionnez les
attributs, par exemple :
<code>display=red+line_width_2</code>
</li><li class="li-itemize">Les cercles ainsi que les rectangles dont les bords sont
parallèles aux axes peuvent être remplis avec l’attribut
<code>display=filled</code> (qui peut s’additionner à d’autres attributs).
</li><li class="li-itemize">Pour remplacer la fenêtre graphique calculée automatiquement
par des valeurs prédéfinies, utiliser la touche OPTN,
sélectionner <code>gl_x</code> ou/et <code>gl_y</code> et indiquer l’intervalle
en <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>x</mi></mrow><annotation encoding='application/x-tex'>x</annotation></semantics></math> ou en <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>y</mi></mrow><annotation encoding='application/x-tex'>y</annotation></semantics></math> souhaité, la commande doit précder une
commande de tracé. Par exemple 

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">gl_x=-2..2;gl_y=-1..4;plot(exp(x))
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>

</li><li class="li-itemize">Pour enlever les axes, sélectionner <code>axes</code> 
(<code>axes=0</code>). La commande doit précéder une commande de
tracé.
</li></ul>
<!--TOC section id="sec23" Géométrie analytique.-->
<h2 id="sec23" class="section">8  Géométrie analytique.</h2><!--SEC END --><p>
Pour le moment, aucune application de géométrie interactive n’a été
portée, l’utilisation de commandes de géométrie analytique
de Xcas est donc
possible en ligne de commandes, avec des noms de commande en anglais
pour le moment, par exemple <code>point</code>, <code>segment</code>,
<code>circle</code>, <code>circumcircle</code>, <code>incircle</code>
<code>line</code>, <code>triangle</code>, <code>polygon</code>,
<code>parallel</code>, <code>perpendicular</code>, <code>bisector</code>,
<code>perpen_bisector</code>, <code>center</code>, <code>radius</code>,
<code>distance</code>, ...</p>
<!--TOC section id="sec24" Unités et constantes physiques.-->
<h2 id="sec24" class="section">9  Unités et constantes physiques.</h2><!--SEC END --><p>
Le menu Toolbox, constantes physiques (raccourci <code>Toolbox pi</code>)
et unités physiques (raccourci <code>Toolbox sqrt</code>) affiche
</p><ul class="itemize"><li class="li-itemize">
des commandes de gestion d’unité<br>
 <code>mksa</code> pour convertir vers les unités fondementales du système
international<br>
 <code>usimplify</code> pour simplifier en utilisant une seule
unité lorsque c’est possible, ou un produit de deux.<br>
 <code>ufactor</code> pour forcer l’écriture d’une unité en fonction
d’une autre<br>
 <code>=&gt;</code> (raccourci touche sto) pour convertir entre deux unités
compatibles
</li><li class="li-itemize">une liste non exhaustive d’unités physiques
</li><li class="li-itemize">une liste de constantes physiques fondementales.
</li></ul><p>
Exemples :<br>
<code>60_(km/h) =&gt; _(m/s)</code><br>
<code>mksa(_hbar_)</code><br>
<code>usimplify(1_W*1_s)</code><br>
<code>ufactor(1_W,1_J)</code></p>
<!--TOC section id="sec25" L’éditeur d’expressions-->
<h2 id="sec25" class="section">10  L’éditeur d’expressions</h2><!--SEC END --><p>
Lorsqu’un calcul renvoie une expression, elle est affichée en plein 
écran dans
l’éditeur d’expression 2d. Depuis l’historique des calculs, si le niveau
sélectionné est une expression, l’appui sur shift-5 (2d) affiche
l’expression dans l’éditeur 2d. En ligne de commande, l’appui
sur shift-5 ouvre aussi l’éditeur 2d, soit avec 0 si la ligne
de commande était vide, ou avec le contenu de la ligne de commande si
celle-ci est syntaxiquement correcte.</p><p>Lorsque l’éditeur 2d est ouvert, l’expression est affichée en
plein écran et une
partie de l’expression est sélectionnée. On peut alors agir sur
la sélection en exécutant des commandes saisies via les menus
ou le clavier, on peut aussi éditer la sélection (en mode de saisie
1d). Ceci permet de retravailler des sous-expressions
ou d’éditer une expression en écriture naturelle.</p><p>Vous pouvez annuler la dernière modification effectuée en
tapant sur shift-3 (undo).</p><p>Taper OK pour quitter l’éditeur 2d et copier l’expression en ligne de
commande, taper EXIT pour quitter sans recopier l’expression.</p><p>Exemple 1 : nous allons saisir 
<math xmlns='http://www.w3.org/1998/Math/MathML' display='block'><semantics><mrow><munder><mi>lim</mi> <mrow><mi>x</mi><mo>&rightarrow;</mo><mn>0</mn></mrow></munder><mfrac><mrow><mi>sin</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mi>x</mi></mfrac></mrow><annotation encoding='application/x-tex'>\lim_{x \rightarrow 0} \frac{\sin(x)}{x} </annotation></semantics></math>
Depuis une ligne de commande vide, taper shift-5 (2d), vous devez voir 0 
sélectionné. Tapez sur la touche x et EXE, maintenant c’est x qui
est en surbrillance. Tapez sur la touche sin, c’est <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>sin</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding='application/x-tex'>\sin(x)</annotation></semantics></math> qui
est en surbrillance. Tapez sur la touche de division (au-dessus de -), 
vous devez voir <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mfrac><mrow><mi>sin</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mn>0</mn></mfrac></mrow><annotation encoding='application/x-tex'>\frac{\sin(x)}{0}</annotation></semantics></math> avec 0 en surbrillance, tapez
x puis EXE, vous devez voir <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mfrac><mrow><mi>sin</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mi>x</mi></mfrac></mrow><annotation encoding='application/x-tex'>\frac{\sin(x)}{x}</annotation></semantics></math> avec
x au dénominateur en surbrillance. Tapez sur le curseur
flèche vers le haut pour mettre <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mfrac><mrow><mi>sin</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mi>x</mi></mfrac></mrow><annotation encoding='application/x-tex'>\frac{\sin(x)}{x}</annotation></semantics></math> en surbrillance,
puis shift-2 4 (pour limit). L’expression est correcte, vous pouvez taper OK
pour la recopier en ligne de commande et OK à nouveau pour
exécuter le calcul.
Si on avait voulu
une limite en <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mo lspace="verythinmathspace" rspace="0em">+</mo><mn>&infin;</mn></mrow><annotation encoding='application/x-tex'>+\infty</annotation></semantics></math>, il aurait fallu déplacer la sélection
avec curseur vers la droite, puis faire shift-1 7 (oo) OK.</p><p>Exemple 2 : nous allons saisir
<math xmlns='http://www.w3.org/1998/Math/MathML' display='block'><semantics><mrow><msubsup><mo>&Integral;</mo> <mn>0</mn> <mrow><mo lspace="verythinmathspace" rspace="0em">+</mo><mn>&infin;</mn></mrow></msubsup><mfrac><mn>1</mn><mrow><msup><mi>x</mi> <mn>4</mn></msup><mo>+</mo><mn>1</mn></mrow></mfrac><mspace width="mediummathspace"/><mi>d</mi><mi>x</mi></mrow><annotation encoding='application/x-tex'>\int_0^{+\infty} \frac{1}{x^4+1} \ dx  </annotation></semantics></math>
Depuis une ligne de commande vide, taper shift-5 (2d), puis shift-2 3
(integrate),
vous devez voir
<math xmlns='http://www.w3.org/1998/Math/MathML' display='block'><semantics><mrow><msubsup><mo>&Integral;</mo> <mn>0</mn> <mn>1</mn></msubsup><mn>0</mn><mspace width="mediummathspace"/><mi>d</mi><mi>x</mi></mrow><annotation encoding='application/x-tex'>\int_0^1 0 \ dx </annotation></semantics></math>
avec <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>x</mi></mrow><annotation encoding='application/x-tex'>x</annotation></semantics></math> sélectionné. Il faut donc changer le 1 de la borne supérieure
et le 0 à intégrer. Pour modifier le 0, curseur vers la gauche pour
le sélectionner puis <code>1/(x^4+1)</code> EXE, puis curseur vers
la gauche shift-1 7 EXE. Taper sur OK pour recopier vers la ligne
de commande puis OK pour effectuer le calcul, le résultat s’affiche
dans l’éditeur 2d, OK quitte l’éditeur avec dans l’historique
l’intégrale et sa valeur (en syntaxe algébrique 1d).</p><p>Exemple 3 : nous allons calculer et simplifier 
<math xmlns='http://www.w3.org/1998/Math/MathML' display='block'><semantics><mrow><mo>&Integral;</mo><mfrac><mn>1</mn><mrow><msup><mi>x</mi> <mn>4</mn></msup><mo>+</mo><mn>1</mn></mrow></mfrac><mspace width="mediummathspace"/><mi>d</mi><mi>x</mi></mrow><annotation encoding='application/x-tex'>\int \frac{1}{x^4+1} \ dx  </annotation></semantics></math>
Depuis une ligne de commande vide, taper shift-5 (2d), puis shift-2 3
(integrate),
vous devez voir
<math xmlns='http://www.w3.org/1998/Math/MathML' display='block'><semantics><mrow><msubsup><mo>&Integral;</mo> <mn>0</mn> <mn>1</mn></msubsup><mn>0</mn><mspace width="mediummathspace"/><mi>d</mi><mi>x</mi></mrow><annotation encoding='application/x-tex'>\int_0^1 0 \ dx </annotation></semantics></math>
Déplacez le curseur sur le 0 de la borne inférieure de l’intégrale
et tapez sur la touche DEL, vous devez voir
<math xmlns='http://www.w3.org/1998/Math/MathML' display='block'><semantics><mrow><mo>&Integral;</mo><mn>0</mn><mspace width="mediummathspace"/><mi>d</mi><mi>x</mi></mrow><annotation encoding='application/x-tex'>\int 0 \ dx </annotation></semantics></math>
avec le tout sélectionné. Utilisez le curseur vers le bas
pour sélectionner 0 et tapez <code>1/(x^4+1)</code> EXE puis OK pour
recopier en ligne de commande puis OK pour exécuter le calcul,
le résultat s’affiche maintenant dans l’éditeur 2d.<br>
On peut alors sélectionner avec les touches du curseur par exemple
l’argument d’un des arctangentes et exécuter shift-1 EXE (simplify) 
pour effectuer une simplification partielle du résultat, puis
recommencer avec l’autre arctangente.<br>
On peut simplifier encore plus, en rassemblant les logarithmes. Pour
cela il faut d’abord échanger deux des arguments de la somme. 
Sélectionnez un des logarithmes avec des déplacements du curseur,
puis tapez shift-curseur droit ou gauche,
cela échange l’argument sélectionné avec son frère de droite ou
de gauche. Tapez ensuite 
ALPHA curseur vers la droite ou vers la gauche, ceci augmente la
sélection en ajoutant le frère de droite ou de gauche.
Une fois les deux logarithmes sélectionnés, menu shift-1 2 EXE
(factor), puis
descendez la sélection sur la somme ou différence de logarithmes,
allez dans le menu Toolbox puis EXE (Tout), tapez les lettres l, n, c
ce qui déplace à la première commande commençant par <code>lnc</code>,
sélectionnez <code>lncollect</code>, validez et tapez enfin sur EXE (eval).</p>
<!--TOC section id="sec26" Sessions de calculs-->
<h2 id="sec26" class="section">11  Sessions de calculs</h2><!--SEC END -->
<!--TOC subsection id="sec27" Edition de l’historique.-->
<h3 id="sec27" class="subsection">11.1  Edition de l’historique.</h3><!--SEC END --><p>
En utilisant la touche curseur vers le haut/bas, on se déplace dans
l’historique des calculs, le niveau courant est en surbrillance. </p><p>Pour modifier l’ordre des niveaux dans l’historique des calculs,
tapez ALPHA-curseur vers le haut ou vers le bas.
Pour effacer un niveau, appuyez sur la touche DEL (le niveau
est recopié dans le presse-papiers).</p><p>Pour
modifier un niveau existant, on tape sur shift-5 ou sur shift-4. Dans le
premier cas, c’est l’éditeur 2d qui est appelé si le niveau
est une expression, dans le
deuxième cas, c’est l’éditeur texte qui est appelé.
Taper EXIT pour annuler les modifications ou EXE pour valider.
Si les modifications sont validées, les lignes de commande situées
en-dessous de la ligne modifiée seront automatiquement calculées,
tenant compte des modifications, par exemple si vous modifiez un niveau
comme <code>A:=1</code>, les lignes situées en-dessous dépendant de <code>A</code>
seront actualisées.</p><p>Ce processus peut être automatisé en utilisant un curseur,
que l’on peut créer avec un assistant, depuis le menu HOME,
Parameter. Une fois créé, vous pouvez modifier un curseur
en tapant sur les touches + ou - lorsque le niveau contenant
la commande <code>assume</code> ou <code>parameter</code> est sélectionné
(tapez * ou / pour une modification plus rapide).</p>
<!--TOC subsection id="sec28" Variables-->
<h3 id="sec28" class="subsection">11.2  Variables</h3><!--SEC END --><p>
En appuyant sur la touche <code>var</code> vous affichez la liste
des variables qui ont une valeur, ainsi que des commandes de gestion
de variables. Déplacez le curseur vers une variable puis EXE pour
la recopier en ligne de commande, DEL copie en ligne de commande
la commande d’effacement de la variable (confirmez ensuite avec EXE).
La commande <code>restart</code> permet d’effacer toutes les variables.
La commande <code>assume</code> permet de faire une hypothèse sur
une variable, par exemple <code>assume(x&gt;5)</code> (<code>&gt;</code> se trouve
dans le menu shift-PRGM).</p>
<!--TOC section id="sec29" Programmation-->
<h2 id="sec29" class="section">12  Programmation</h2><!--SEC END --><p>
L’environnement de programmation de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>cas est assez complet:
un éditeur, l’interpréteur de Xcas avec toutes ses commandes
(compatibilité partielle avec les modules Python
math, cmath, random, turtle, numpy, scipy, giacpy, matplotlib
et un sur-ensemble du module kandinsky), avec un outil de mise au point
permttant l’exécution en pas à pas.</p><p>Vous pouvez programmer en utilisant
les structures de commande en français de Xcas
ou en utilisant la compatibilité de
syntaxe Python. Les programmes très courts (en une ligne)
peuvent être saisis directement en ligne de commande. Les
programmes plus longs ou que l’on souhaite sauvegarder
seront saisis dans l’éditeur de programmes sur
la calculatrice, ou bien transférés depuis un PC ou
une autre calculatrice.</p><p>Trois programmes sont installés après un reset de la calculatrice
(des polygones avec la tortue, la fractale de Mandelbrot, le calcul
des racines d’un polynôme de degré 2).
Vous pouvez les visualiser depuis le shell en tapant shift-4 (edit)
puis HOME 4 (Inserer), les interpréter avec la touche OK et les
exécuter depuis le shell (EXIT puis var pour sélectionner la fonction).</p>
<!--TOC subsection id="sec30" Prise en main (programmation)-->
<h3 id="sec30" class="subsection">12.1  Prise en main (programmation)</h3><!--SEC END --><p>
<span style="font-weight:bold">Un premier exemple en ligne de commande </span>:<br>
une fonction définie par une expression algébrique. On
saisit <code>nom_fonction(parametres):=expression</code>
Par exemple, pour définir le périmètre d’un cercle de
rayon <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>r</mi></mrow><annotation encoding='application/x-tex'>r</annotation></semantics></math>, on peut taper

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">peri(r):=2*pi*r
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>

puis on peut calculer 
<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">peri(1)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>
.</p><p><span style="font-weight:bold">Autre exemple, pour calculer l’intervalle de confiance de seconde</span>
connaissant une fréquence <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>p</mi></mrow><annotation encoding='application/x-tex'>p</annotation></semantics></math> et un effectif <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>n</mi></mrow><annotation encoding='application/x-tex'>n</annotation></semantics></math>, on tape<br>

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">F(P,N):=[P-1/sqrt(N),P+1/sqrt(N)]
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>
<br>
puis on teste 
<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">F(0.4,30)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>
</p><p><span style="font-weight:bold">Autre exemple : avec la tortue de Xcas</span><br>
La tortue de Xcas est un petit robot qui se déplace selon des 
ordres qui lui sont donnés en laissant une trace de son passage.
Les commandes de la tortue sont accessibles depuis le dernier item
du menu Toolbox, par le raccourci Toolbox <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><msup><mi>x</mi> <mn>2</mn></msup></mrow><annotation encoding='application/x-tex'>x^2</annotation></semantics></math>.
Saisir la commande <span style="font-family:monospace">avance</span> dans ce menu puis valider, vous
devez voir la tortue (symbolisée par un triangle) avancer de 10 pixels.
Taper EXIT pour revenir en ligne de commande.
Saisir la commande <code>tourne_gauche</code> et valider, la tortue a tourné
de 90 degrés. Répéter
3 fois ces deux commandes pour afficher un carré.<br>
Pour effacer le dessin et ramener la tortue à l’origine,
saisir la commande <span style="font-family:monospace">efface</span>.
Pour faire des dessins tortue, il est conseillé d’utiliser l’éditeur
de programmes (cf. ci-dessous).</p><p><span style="font-weight:bold">Autre exemple : une boucle “oneliner” en syntaxe Xcas.</span><br>
Ouvrez le menu Programmes (Toolbox cos), puis sélectionnez l’exemple
de <code>pour</code> (curseur sur pour puis Ans)<br>

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">pour j de 1 jusque 10 faire print(j,j^2); fpour;
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>

tapez sur EXE, vous devez voir les carrés des entiers de 1 à 10.</p><p><span style="font-weight:bold">Exercice :</span> faire faire un carré à la tortue en utilisant
une boucle.</p><p><span style="font-weight:bold">Utilisation de l’éditeur</span><br>
Modifions cet exemple pour faire afficher les carrés de 1 à <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>n</mi></mrow><annotation encoding='application/x-tex'>n</annotation></semantics></math>
en utilisant la syntaxe compatible Python et
l’éditeur de programmes.
Tapez sur EXIT pour passer du shell à l’éditeur de programmes.
Si on vous demande programme ou Tortue faites OK.
Ceci ouvre l’éditeur avec une maquette de fonction
<code>def f(x):</code>
Vérifiez que la syntaxe Python
est activée (menu HOME), sinon activez-la (8).
Remplacez <code>x</code> par <code>n</code>, puis 
déplacez le curseur en fin de ligne et passez à la
ligne (EXE).
Tapez Shift-2 puis EXE (<code>for</code>), placez
un <code>j</code> entre <code>for </code> et <code>in range(</code>
puis un <code>n</code> entre les parenthèses de <code>range()</code>.
À la ligne suivante, tapez shift-3 7 (<code>print</code>)
et validez (EXE), puis tapez <code>j,j^2)</code>. Vous devriez avoir le 
programme suivant :

</p><pre class="verbatim">def f(n):
  for j in range(1,n+1):
    print(j,j^2)
  return x
</pre><p> 
<button onclick="var field=parentNode.previousSibling; var tmp=field.innerHTML;if(tmp.length==0) tmp=field.value;var t=createElement('TEXTAREA');t.style.fontSize=16;t.cols=60;t.rows=10;var tmp1=UI.ltgt(tmp);t.value=tmp1[0];tmp=UI.caseval(tmp);tmp=UI.rmquote(tmp);nextSibling.innerHTML=tmp; UI.render_canvas(nextSibling); field.parentNode.insertBefore(t,field);field.parentNode.removeChild(field);">exe</button><span></span><br>


Remplacez <code>x</code> par <code>n</code> dans <code>return</code> (ou effacez la ligne).
N.B.: pour la puissance, on peut utiliser <code>^</code> ou <code>**</code>
dans KhiCAS
(il faut utiliser <code>**</code> en Python).</p><p>Maintenant, tapez OK.
Si tout va bien, vous devez voir <code>Success</code> dans la ligne d’état.
Sinon, le numéro de ligne de la première erreur est indiqué ainsi que
le mot qui a provoqué l’erreur. Le curseur est positionné sur la ligne
où l’erreur a été détectée (il peut arriver que l’erreur soit 
située avant mais détectée un peu plus loin seulement). Si vous
utilisez la syntaxe en Python, notez que les structures de programmation
sont traduites en langage Xcas, les erreurs affichées le sont par
rapport à cette traduction (donc des mots-clefs de fin de structure
comme <code>end</code> peuvent avoir été ajoutées).</p><p>Si le programme est syntaxiquement correct, vous pouvez le sauvegarder
depuis le menu HOME. Pour l’exécuter, revenez à la
ligne de commande en tapant la touche EXIT, tapez par
exemple <code>f(10)</code>, vous devriez voir s’afficher
les carrés de 1 à 10.</p><p><span style="font-weight:bold">3ième exemple : Calcul de l’intervalle de confiance de terminale S</span><br>
En syntaxe Xcas.
On peut le saisir en ligne de commande

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">F(P,N):=[P-1.96*sqrt(P*(1-P)/N),P+1.96*sqrt(P*(1-P)/N)]
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>

On peut éviter les calculs redondants en utilisant une variable
locale (utiliser Toolbox Programmes
pour saisir fonction, local, return et ffonction)<br>

</p><pre class="verbatim">fonction F(P,N) 
  local D; 
  D:=1.96*sqrt(P*(1-P)/N); 
  return [P-D,P+D]; 
ffonction;
</pre><p> 
<button onclick="var field=parentNode.previousSibling; var tmp=field.innerHTML;if(tmp.length==0) tmp=field.value;var t=createElement('TEXTAREA');t.style.fontSize=16;t.cols=60;t.rows=10;var tmp1=UI.ltgt(tmp);t.value=tmp1[0];tmp=UI.caseval(tmp);tmp=UI.rmquote(tmp);nextSibling.innerHTML=tmp; UI.render_canvas(nextSibling); field.parentNode.insertBefore(t,field);field.parentNode.removeChild(field);">exe</button><span></span><br>

</p><p><span style="font-weight:bold">Exercice </span> Créez un fichier <code>carre.py</code> contenant
un script pour afficher un carré avec la tortue.
Créez un fichier <code>carren.py</code> 
pour afficher un carré de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>n</mi></mrow><annotation encoding='application/x-tex'>n</annotation></semantics></math> pixels, en utilisant
une fonction d’argument <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>n</mi></mrow><annotation encoding='application/x-tex'>n</annotation></semantics></math> et l’instruction <code>repete</code>.</p><p><span style="font-weight:bold">Solution </span>
Depuis l’éditeur de script, faire HOME 5 (Effacer).
Puis shift-4 <code>efface</code>.
Ajouter 4 fois <code>avance; tourne_gauche;</code>.
Appuyer sur OK pour tester. Sauvegardez (HOME 3 Sauvegarder comme).</p><p>Effacer à nouveau (HOME 5 effacer)
Puis shift-4 <code>efface</code>.
Ajouter avant la ligne <code>efface</code>
</p><pre class="verbatim">def f(n):
  for j in range(4):
    avance(n)
    tourne_gauche
</pre><p>
puis après la ligne <code>efface;</code> tapez par exemple <code>f(40)</code>
puis OK. Ensuite faire HOME 3 (Sauvegardez comme).</p><p><span style="font-weight:bold">Un exemple de fonction non algébrique : le calcul du PGCD de 2 entiers.</span><br>
Utiliser EXE pour passer à la ligne. 
En syntaxe Xcas 

</p><pre class="verbatim">fonction pgcd(a,b)
  tantque b!=0 faire
    a,b:=b,irem(a,b);
  ftantque;
  return a;
ffonction
</pre><p> 
<button onclick="var field=parentNode.previousSibling; var tmp=field.innerHTML;if(tmp.length==0) tmp=field.value;var t=createElement('TEXTAREA');t.style.fontSize=16;t.cols=60;t.rows=10;var tmp1=UI.ltgt(tmp);t.value=tmp1[0];tmp=UI.caseval(tmp);tmp=UI.rmquote(tmp);nextSibling.innerHTML=tmp; UI.render_canvas(nextSibling); field.parentNode.insertBefore(t,field);field.parentNode.removeChild(field);">exe</button><span></span><br>


Le même en syntaxe Python 

</p><pre class="verbatim">def pgcd(a,b):
  while b!=0:
    a,b=b,a % b
  return a
</pre><p> 
<button onclick="var field=parentNode.previousSibling; var tmp=field.innerHTML;if(tmp.length==0) tmp=field.value;var t=createElement('TEXTAREA');t.style.fontSize=16;t.cols=60;t.rows=10;var tmp1=UI.ltgt(tmp);t.value=tmp1[0];tmp=UI.caseval(tmp);tmp=UI.rmquote(tmp);nextSibling.innerHTML=tmp; UI.render_canvas(nextSibling); field.parentNode.insertBefore(t,field);field.parentNode.removeChild(field);">exe</button><span></span><br>


On vérifie 
<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;font-size:large">pgcd(12345,3425)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">exe</button><span></span><br>
</p><p><span style="font-weight:bold">Mise au point</span><br>
La commande <code>debug</code> permet 
d’exécuter une fonction en mode pas-à-pas, i.e.
visualiser l’évolution des variables instruction par instruction,
par exemple<br>
<code>debug(pgcd(12345,3425))</code></p>
<!--TOC subsection id="sec31" Quelques exemples-->
<h3 id="sec31" class="subsection">12.2  Quelques exemples</h3><!--SEC END --><p>
Le répertoire <code>prog</code> de l’archive 
<a href="https://www-fourier.ujf-grenoble.fr/~parisse/casio/khicasio.zip">khicasio.zip</a>
contient quelques exemples de TP pour classes de seconde de l’IREM
de Grenoble :
</p><ul class="itemize"><li class="li-itemize">
utilisation de la tortue pour introduire la programmation textuelle
et la notion de fonction (PDF+corrections fichiers py)
</li><li class="li-itemize">longueur approchée d’un arc de courbe (PDF+correction fichier py)
</li><li class="li-itemize">tableau de valeurs, recherche de minimum (enonce et morceaux
de programmes, fichier tabval.py)
</li></ul><p>
ainsi que quelques autres programmes (avec fréquemment
une représentation graphique) :
</p><ul class="itemize"><li class="li-itemize">
fréquence dans un échantillon, intervalle de fluctuations (freq.py)
</li><li class="li-itemize">le paradoxe du duc de Toscane (toscane.py)
</li><li class="li-itemize">résolution d’équation du second degré (deg2.py)
</li><li class="li-itemize">dichotomie (dicho.py)
</li><li class="li-itemize">méthode des rectangles (integr.py),
</li><li class="li-itemize">fractale de Mandelbrot (mandel.py)
</li><li class="li-itemize">un benchmark utilisé par tiplanet pour mesurer la vitesse
de l’interpréteur (qcc.py)
</li></ul>
<!--TOC subsection id="sec32" Commandes utilisables-->
<h3 id="sec32" class="subsection">12.3  Commandes utilisables</h3><!--SEC END --><p>
Contrairement aux adaptations de MicroPython proposées par
les constructeurs (dont
celui de la Numworks N0110), la programmation en (simili-)Python 
dans KhiCAS n’est pas une application indépendante. 
Vous pouvez donc utiliser tous les types
de Xcas (par exemple les rationnels) et appliquer toutes
les commandes de Xcas dans vos programmes. Ceci correspond
plus ou moins à un environnement Python avec les modules
<code>math</code>, <code>cmath</code>, <code>random</code> (plus complet
que le module <code>urandom</code> fourni par les constructeurs),
<code>scipy</code>, <code>numpy</code>, un petit module de graphiques
pixelisé 
(<code>set_pixel(x,y,c)</code>, <code>set_pixel()</code>
pour synchroniser l’affichage, <code>clear()</code>,
<code>draw_line(x1,y1,x2,y2,c)</code>, 
<code>draw_polygon([[x1,y1],[x2,y2],...],c)</code>,
<code>draw_rectangle(x,y,w,h,c)</code>, <code>draw_circle(x,y,r,c)</code>,
la couleur+epaisseur+remplissage <code>c</code> est un paramètre optionnel,
<code>draw_arc(x,y,rx,ry,t1,t2,c)</code> permet de tracer un arc
d’ellipse).
et pour remplacer <code>matplotlib</code> on peut utiliser
les commande graphiques dans un repère de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS
(<code>point</code>, <code>line</code>, <code>segment</code>, <code>circle</code>,
<code>barplot</code>, <code>histogram</code> et les commandes <code>plot...</code>).
De plus, vous pouvez travailler avec des expressions et faire
du calcul formel dessus.
Pour la liste complète des commandes
et une présentation détaillée, on renvoie à la documentation
de Xcas.</p>
<!--TOC section id="sec33" Interpréteur MicroPython intégré-->
<h2 id="sec33" class="section">13  Interpréteur MicroPython intégré</h2><!--SEC END --><p> <a id="sec:micropy"></a>
<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS est maintenant fourni avec son propre interpréteur MicroPython
(qui n’est pas identique à celui fourni par Numworks).
Pour passer dans
<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS de l’interpréteur Xcas à MicroPython et réciproquement
vous pouvez taper la commande <code>python</code> ou <code>xcas</code> dans
le shell sur une ligne vide. Ces commandes sont accessibles
dans le menu rapide shift ).</p><p>Attention, si vous lancez MicroPython après avoir travaillé
avec Xcas ou/et avec le tableur, il peut ne pas y avoir assez
de mémoire pour le tas MicroPython, dans ce cas vous risquez
de perdre votre session de travail, pensez à la sauvegarder.
Par défaut, 40K sont réservés pour MicroPython. Vous
pouvez modifier cette valeur jusqu’à 64K dans la configuration
(touche Home puis touche ln). Si vous choisissez une valeur
haute, il peut être nécessaire de quitter <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS
et de le réouvrir pour que le tas puisse être alloué
dans une zone mémoire contiguë (problème de fragmentation
du tas sinon). </p><p>Remarque : lorsque l’interpréteur Xcas est actif, si vous passez
en argument à la commande <code>xcas</code> ou <code>python</code> le
nom de variable d’une fonction que vous avez programmée, cela
affiche son texte source sous forme d’une chaine de caractères
en syntaxe Xcas ou Python. Vous pouvez donc programmer en syntaxe
Xcas et traduire ensuite en Python si vous devez vous
conformer à des règles qui imposent ce langage.</p>
<!--TOC subsection id="sec34" Les modules math, cmath, random-->
<h3 id="sec34" class="subsection">13.1  Les modules math, cmath, random</h3><!--SEC END --><p>
Ce sont les modules natifs fournis par MicroPython (<code>urandom</code>
a été renommé <code>random</code>), et qui sont
conforme au standard. D’autres modules MicroPython standard
qui ne sont pas destinés à faire des maths sont disponibles.</p>
<!--TOC subsection id="sec35" Le module graphic-->
<h3 id="sec35" class="subsection">13.2  Le module graphic</h3><!--SEC END --><p>
Il s’agit d’un module natif MicroPython qui exporte de Xcas des fonctions
de tracé pixelisés. Une partie des commandes est accessible
depuis le menu rapide shift 0.
Ce module a des synonymes, <code>kandinsky</code> et <code>casioplot</code>
afin de faciliter l’utilisation de scripts Python pour
calculatrices Numworks (Epsilon) et Casio.</p>
<!--TOC subsection id="sec36" Le module matplotl-->
<h3 id="sec36" class="subsection">13.3  Le module matplotl</h3><!--SEC END --><p>
Il s’agit d’un module natif MicroPython qui exporte de Xcas des fonctions
de tracé repéré et vise à une certaine compatibilité avec
le module <code>matplotlib</code> (ou un de ses sous-modules) sur PC.
Une partie des commandes est accessible
depuis le menu rapide shift <code>.</code></p>
<!--TOC subsection id="sec37" Le module arit-->
<h3 id="sec37" class="subsection">13.4  Le module arit</h3><!--SEC END --><p>
C’est un module natif qui exporte de Xcas
des fonctions d’arithmétique entière :
test de primalité et prochain nombre premier (par Miller-Rabin),
factorisation d’entiers pas trop gros (détection
par Pollard-rho du plus petit facteur premier, donc jusqu’à environ
9 chiffres), pgcd et identité de Bèzout, indicatrice d’Euler (si
on sait factoriser). J’y ai aussi inclus
deux fonctions de conversion liste vers chaine
de caractères pour faciliter l’enseignement d’un peu de cryptographie.</p>
<!--TOC subsection id="sec38" Le module linalg-->
<h3 id="sec38" class="subsection">13.5  Le module linalg</h3><!--SEC END --><p>
Il permet de manipuler les listes comme des vecteurs et les listes
de listes comme des matrices. Contrairement à Xcas,
Python n’est pas un langage spécifiquement adapté aux maths,
il faut utiliser des
commandes préfixées <code>add, sub, mul</code> pour effectuer
les opérations arithmétiques de base <code>+ - *</code> sur les
vecteurs et matrices représentés par des listes.</p><p>Le module <code>linalg</code> est un module natif, qui utilise Xcas
pour effectuer la quasi-totalité des calculs.</p>
<!--TOC subsection id="sec39" Le module numpy-->
<h3 id="sec39" class="subsection">13.6  Le module numpy</h3><!--SEC END --><p>
C’est une surcouche du module <code>linalg</code> qui définit une
classe <code>array</code> pour représenter les vecteurs et les matrices.
On peut alors utiliser <code>+ - *</code> pour faire les opérations
de base sur vecteurs et matrices.</p><p>Le module <code>numpy</code> n’est pas un module natif, c’est un texte
source écrit en Python. Son importation consomme donc de la mémoire
RAM. Vous pouvez écrire votre propre version de <code>numpy.py</code>
et la stocker dans le scriptstore, elle prendra alors la précédence
sur la version utilisée par défaut. Cette dernière vise à assurer
un minimum de compatibilité avec le module du même nom sur PC.
Bien que non natif, ce module est disponible en mode examen
(le texte source par défaut est intégré au code source de
l’interpréteur MicroPython).
</p><pre class="verbatim">import linalg
import math
class array: 
    def __init__(self, a): 
        self.a = a 
  
    def __add__(self, other): 
        return array(linalg.add(self.a , other.a))
  
    def __sub__(self, other): 
        return array(linalg.sub(self.a , other.a))
  
    def __mul__(self, other):
        if type(self)==array:
            if type(other)==array:
                return array(linalg.mul(self.a , other.a))
            return array(linalg.mul(self.a,other))
        return array(linalg.mul(self,other.a))
    
    def __rmul__(self, other): 
        if type(self)==array:
            if type(other)==array:
                return array(linalg.mul(self.a , other.a))
            return array(linalg.mul(self.a,other))
        return array(linalg.mul(self,other.a))

    def __matmul__(self, other):
        return __mul(self,other)

    def __getitem__(self,key):
        r=(self.a)[key]
        if type(r)==list or type(r)==tuple:
            return array(r)
        return r

    def __setitem__(self, key, value):
        if (type(value)==array):
            (self.a)[key]=value.a
        else:
            (self.a)[key]=value
        return None

    def __len__(self):
        return len(self.a)
    
    def __str__(self): 
        return 'array('+str(self.a)+')'
  
    def __repr__(self): 
        return 'array('+str(self.a)+')'
  
    def __neg__(self):
        return array(-self.a)

    def __pos__(self):
        return self
    
    def __abs__(self):
        return array(linalg.abs(self.a))

    def __round__(self):
        return array(linalg.apply(round,self.a,linalg.matrix))

    def __trunc__(self):
        return array(linalg.apply(trunc,self.a,linalg.matrix))

    def __floor__(self):
        return array(linalg.apply(floor,self.a,linalg.matrix))

    def __ceil__(self):
        return array(linalg.apply(ceil,self.a,linalg.matrix))

    def T(self):
        return array(linalg.transpose(self.a))
            
def real(x):
    if type(x)==array:
        return array(linalg.re(x.a))
    return x.real

def imag(x):
    if type(x)==array:
        return array(linalg.im(x.a))
    return x.imag

def conj(x):
    if type(x)==array:
        return array(linalg.conj(x.a))
    return linalg.conj(x)

def sin(x):
    if type(x)==array:
        return array(linalg.apply(math.sin,x.a,linalg.matrix))
    return math.sin(x)

def cos(x):
    if type(x)==array:
        return array(linalg.apply(math.cos,x.a,linalg.matrix))
    return math.cos(x)

def tan(x):
    if type(x)==array:
        return array(linalg.apply(math.tan,x.a,linalg.matrix))
    return math.tan(x)

def asin(x):
    if type(x)==array:
        return array(linalg.apply(math.asin,x.a,linalg.matrix))
    return math.asin(x)

def acos(x):
    if type(x)==array:
        return array(linalg.apply(math.acos,x.a,linalg.matrix))
    return math.acos(x)

def atan(x):
    if type(x)==array:
        return array(linalg.apply(math.atan,x.a,linalg.matrix))
    return math.atan(x)

def sinh(x):
    if type(x)==array:
        return array(linalg.apply(math.sinh,x.a,linalg.matrix))
    return math.sinh(x)

def cosh(x):
    if type(x)==array:
        return array(linalg.apply(math.cosh,x.a,linalg.matrix))
    return math.cosh(x)

def tanh(x):
    if type(x)==array:
        return array(linalg.apply(math.tanh,x.a,linalg.matrix))
    return math.tanh(x)

def exp(x):
    if type(x)==array:
        return array(linalg.apply(math.exp,x.a,linalg.matrix))
    return math.exp(x)

def log(x):
    if type(x)==array:
        return array(linalg.apply(math.log,x.a,linalg.matrix))
    return math.log(x)

def size(x):
    if type(x)==array:
        return linalg.size(x.a)
    return linalg.size(x)

def shape(x):
    if type(x)==array:
        return linalg.shape(x.a)

def dot(a,b):
    return a*b

def transpose(a):
    if type(x)==array:
        return array(linalg.transpose(x.a))

def trn(a):
    if type(x)==array:
        return array(linalg.conj(linalg.transpose(x.a)))
    return linalg.conj(linalg.transpose(x.a))

def zeros(n,m=0):
    return array(linalg.zeros(n,m))

def ones(n,m=0):
    return array(linalg.ones(n,m))

def eye(n):
    return array(linalg.eye(n))

def det(x):
    if type(x)==array:
        return linalg.det(x.a)
    return linalg.det(x)

def inv(x):
    if type(x)==array:
        return array(linalg.inv(x.a))
    return linalg.inv(x)

def solve(a,b):
    if type(a)==array:
        if type(b)==array:
            return array(linalg.solve(a.a,b.a))
        return array(linalg.solve(a.a,b))
    if type(b)==array:
        return array(linalg.solve(a,b.a))
    return linalg.solve(a,b)

def eig(a):
    if type(a)==array:
        r=linalg.eig(a.a)
        return array(r[0]),array(r[1])
    return linalg.eig(a)

def linspace(a,b,c):
    return array(linalg.linspace(a,b,c))

def arange(a,b,c=1):
    return array(linalg.arange(a,b,c))

def reshape(a,n,m=0):
    if type(n)==tuple:
        m=n[1]
        n=n[0]
    if type(a)==array:
        return array(linalg.matrix(n,m,a.a))
    return linalg.matrix(n,m,a)
</pre>
<!--TOC section id="sec40" Applications additionnelles-->
<h2 id="sec40" class="section">14  Applications additionnelles</h2><!--SEC END --><p>
Les applications additionnelles sont accessibles en tapant HOME 1.
Il y a actuellement un tableur, le tableau périodique des éléments
(d’après Maxime Friess),
et trois exemples d’addin qui peuvent servir de modèle aux
programmeurs : la suite de Syracuse (très simple), la
fractale de Mandelbrot et un jeu
de mastermind (qui peut aussi servir de passe-temps).</p>
<!--TOC section id="sec41" Le tableur-->
<h2 id="sec41" class="section">15  Le tableur</h2><!--SEC END --><p> <a id="sec:tableur"></a>
Au lancement, vous avez un tableau de 14 lignes et 4 colonnes
remplies de 0. Vous pouvez changer la dimension depuis la configuration
du tableur (touche Home, configuration), mais attention, chaque cellule
utilise de la mémoire, un peu moins de 100 octets pour une cellule
remplie d’un nombre, plusieurs centaines d’octets si elle est
remplie par une formule, et la mémoire de la Numworks est très limitée,
s’il n’y a pas assez de mémoire lors d’une allocation, vous
perdrez votre session de travail.
Pensez à faire une sauvegarde de votre session de temps en temps!</p><p>La syntaxe pour créer une formule est identique à celle d’un tableur
classique, on tape sur shift = puis on entre la formule, avec
des références relatives (par exemple <code>=a1+1</code>)
ou absolues (<code>=&#36;a&#36;1+1</code>). On peut utiliser les commandes
de Xcas ainsi que des fonctions qu’on a programmées.</p><p>Il y a des assistants de saisie spécifiques au tableur
dans les menus rapides shift 1, 2 et 3.
Par exemple pour générer des entiers consécutifs,
taper shift 3 puis OK ce qui crée une ligne de commande
contenant <code>range(</code>, il suffit de mettre un entier <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>a</mi></mrow><annotation encoding='application/x-tex'>a</annotation></semantics></math> ou deux entiers
<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>a</mi></mrow><annotation encoding='application/x-tex'>a</annotation></semantics></math> et <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>b</mi></mrow><annotation encoding='application/x-tex'>b</annotation></semantics></math> en arguments pour créer la liste des entiers entre 0 et <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>a</mi><mo>&minus;</mo><mn>1</mn></mrow><annotation encoding='application/x-tex'>a&#x2d;1</annotation></semantics></math>
ou entre <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>a</mi></mrow><annotation encoding='application/x-tex'>a</annotation></semantics></math> et <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>b</mi><mo>&minus;</mo><mn>1</mn></mrow><annotation encoding='application/x-tex'>b&#x2d;1</annotation></semantics></math> et la dispatcher sur la colonne.</p><p>Autre exemple, pour
avoir un tableau de valeurs de fonctions, se placer au début
d’une colonne vide dont la colonne à droite est aussi vide
et taper shift 3, sélectionner <code>tablefunc</code> puis passer
en argument l’expression, par exemple <code>sin(x)</code> (ou <code>f(x)</code>
si vous avez défini une fonction <code>f</code>). Vous pouvez
ensuite régler la valeur de début et le pas dans le tableur.
Pour une suite récurrente, se placer en haut d’une colonne vide
et utiliser la commande <code>tableseq</code> du menu rapide shift 3.</p><p>Pour sélectionner une plage de cellules, taper simultanément sur
shift et une touche de direction, vous pouvez ensuite
relacher shift et déplacer le curseur en fin de sélection.
Tapez OK pour valider (si vous la
passez en argument d’une formule saisie dans une cellule du tableur), ou
shift copy si vous voulez copier la sélection dans le presse-papier
pour par exemple la recopier dans le shell avec shift paste.</p><p>Si vous utilisez un des assistants de statistiques 2d, faites la
sélection des 2 colonnes avant de choisir la commande.
Par exemple, en 1ère ligne, 1ère colonne, tapez shift 3
sélectionnez <code>range</code> puis complétez en <code>range(6)</code>
comme valeurs de X
puis en face en 2ème colonne entrez des valeurs et Y.
Déplacez le curseur en 1ère ligne et en 1ère colonne,
puis shift-curseur
vers le base puis déplacements du
curseur pour rejoindre l’autre extrémité de la sélection,
puis shift 2, puis par exemple <code>polygonscatterplot</code>.
Pour voir le graphique, tapez shift 6. Pour voir sur le même graphique
la droite de régression linéaire correspondante, vous pouvez recommencer
la procédure ou bien recopier la cellule contenant
la formule de <code>polygonscatterplot</code> avec shift-copy shift-copy
et la coller avec shift paste en-dessous, puis la modifier (shift 4 OK)
en remplaçant
<code>polygonscatterplot</code> par <code>linear_regression_plot</code></p><p>Lorsqu’on utilise une plage de cellule en argument d’une commande, la
plage de cellule est aplatie en une seule liste. Si on souhaite utiliser
une matrice comme argument d’une commande, il faut reconstruire
la matrice à partir de la liste en utilisant la commande
<code>matrix(l,c,liste)</code> où <code>l,c</code> sont les dimensions
de la matrice (c’est ce que fait l’assistant <code>scatterplot</code>
du menu rapide de statistiques 2d (shift 2) si on sélectionne
la plage de cellules auparavant).</p><p>Dans le menu accessible depuis la touche HOME, vous pouvez insérer
ou effacer une ligne ou une colonne, vous pouvez aussi donner un nom
de variable au tableur, la matrice des valeurs sera alors automatiquement
sauvegardée dans cette variable, que vous pouvez utiliser ensuite depuis
le shell.</p><p>Si vous entrez dans une cellule une formule donnant un résultat vecteur
ou matrice, celle-ci sera dispatchée par défaut
dans plusieurs cellules. On peut modifier cela dans la configuration
du tableur.</p>
<!--TOC section id="sec42" Raccourcis claviers.-->
<h2 id="sec42" class="section">16  Raccourcis claviers.</h2><!--SEC END --><p> <a id="sec:clavier"></a>
</p><ul class="itemize"><li class="li-itemize">
La touche d’effacement en mode alphabétique a été modifiée
(dans tout l’OS) pour effacer et ne pas renvoyer <code>%</code>,
car cela rend la correction d’erreur de frappes très pénible. Pour
saisir <code>%</code>, tapez shift <code>/</code> (ce qui est facile
à retenir quand on programme un peu).
</li><li class="li-itemize">on peut taper alpha-shift-<code>"</code> pour saisir <code>'</code>
</li><li class="li-itemize">le caractère <code>\</code> est accessible via shift-<code>-</code>.
</li><li class="li-itemize">shift-1 à shift-6: selon le mode (Xcas ou Python)
voir les légendes
</li><li class="li-itemize">shift-7 (M) matrice, 8 complexes, 9 arithmétique entière,
<code>(</code> listes, <code>)</code> programmation,
<code>0</code> probas <code>.</code> réels,
<code>x10^</code> arithmétique polynomiale,
Si MicroPython est activé, shift 7 linalg, 8 numpy,
9 arithmétique entière, <code>(</code> listes, <code>)</code> programmation,
<code>0</code> matplotl, <code>.</code> graphic, <code>x10^</code> couleurs
</li><li class="li-itemize">Si Xcas est actif,
<code>=&gt;</code> suivi d’une unité physique effectue une conversion
d’unité, 
<code>=&gt;</code> suivi d’une fonction permet d’exécuter des actions:<br>
 <code>=&gt;*</code> écriture sous forme de produit (pour une unité, écriture
en utilisant les unités fondementales du système MKSA),<br>
 <code>=&gt;+</code> écriture sous forme de somme (pour une unité, écriture
sous forme le plus simple possible),<br>
 <code>=&gt;/</code> écriture sous forme de quotient,<br>
 <code>=&gt;sin</code>, <code>=&gt;cos</code>, <code>=&gt;tan</code>
conversion vers des sinus, cosinus ou tangentes.<br>
 <code>=&gt;,</code> permet de chronométrer une évaluation,<br>
 <code>16=&gt;=&gt;</code> écrit les entiers en base 16,
<code>10=&gt;=&gt;</code> en base 10, <code>8=&gt;=&gt;</code> en base 8
</li></ul><p>Dans l’éditeur de programmes :
</p><ul class="itemize"><li class="li-itemize">
touches curseur shiftées: déplacement en début/fin de ligne/fichier.
</li><li class="li-itemize">shift copy ou shift et touche curseur simultanément:
début de sélection. Déplacer le curseur à l’autre
extrémité puis taper sur DEL pour effacer la sélection
et la copier dans le presse-papier ou sur
shift copy pour copier la sélection sans l’effacer.
Pour coller le presse-papier, taper shift paste.
</li><li class="li-itemize">EXE: si une recherche/remplacement
de mot est active (après avoir fait Home 6),
recherche l’occurence suivante d’un mot. Sinon, passe à la ligne.
</li><li class="li-itemize">DEL efface le caractère précédent ou la sélection.
</li><li class="li-itemize">shift PASTE: copie le presse-papier
</li><li class="li-itemize">var: bascule entre l’éditeur et la figure tortue
</li><li class="li-itemize">EXIT: quitte l’éditeur et revient en ligne de commandes. On
peut revenir ensuite à l’éditeur en tapant à nouveau EXIT.
</li></ul>
<!--TOC section id="sec43" Remarques-->
<h2 id="sec43" class="section">17  Remarques</h2><!--SEC END --><p>
La mémoire vive (RAM) disponible sur la Numworks est vraiment
très faible
(espérons que ce sera modifié dans les prochains modèles!).
<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS implémente des garde-fous lorsque la mémoire est saturée,
mais il existe un petit risque que
la calculatrice reboote (comme si on appuyait sur Reset)
s’il n’y a vraiment plus de mémoire.</p><p>Il est donc conseillé de transférer vos
programmes sur un ordinateur en branchant la calculatrice
et en faisant pointer sur l’ordinateur le navigateur
Chromium ou compatible sur le site
du constructeur <a href="https://workshop.numworks.com/python">Numworks</a>
<em>avant de les tester</em>.</p><p>Il n’y
a pas pour le moment de mécanisme de sauvegarde sur la flash des
données. Ce serait bienvenu, d’une part cela libérerait un peu
de RAM, d’autre part cela permettrait d’être résistant à un crash
et d’avoir une bibliothèque bien plus importante de programmes
mais aussi de sessions compatibles Xcas, Xcas pour Firefox et <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>cas
pour Casio (qu’il serait agréable de pouvoir échanger sur le
workshop Numworks ou sur un autre espace par exemple sur tiplanet).</p><p>Certains changements de Delta affectent l’application Python
ou l’ensemble des applications :
</p><ul class="itemize"><li class="li-itemize">
La prise en compte du clavier a été un peu modifiée,
cf. la section <a href="#sec%3Aclavier">16</a>.
</li><li class="li-itemize">L’espace de travail pour les calculs hors de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS
est divisé par 2, afin de laisser de la place pour les calculs
dans <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS. Je pense que cela suffit aux besoins des applications
interactives de Epsilon, pour les calculs un peu plus gros,
vous pouvez utiliser <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS qui est générallement
plus rapide ou plus précis. Quelques exemples :
<ul class="itemize"><li class="li-itemize">
calcul numérique
<math xmlns='http://www.w3.org/1998/Math/MathML' display='block'><semantics><mrow><munderover><mo lspace="thinmathspace" rspace="thinmathspace">&Sum;</mo> <mrow><mi>n</mi><mo>=</mo><mn>1</mn></mrow> <mn>1000</mn></munderover><mi>sin</mi><mo stretchy="false">(</mo><mi>cos</mi><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mn>.5</mn><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding='application/x-tex'>\sum_{n=1}^{1000} \sin(\cos(n+.5)) </annotation></semantics></math>
<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS: 0.64s, Epsilon: 1.5s environ
(mesuré en prenant la somme jusque 10000 et en divisant par 10)
</li><li class="li-itemize">calcul matriciel exact, <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>a</mi></mrow><annotation encoding='application/x-tex'>a</annotation></semantics></math> une matrice 4,4 inversible
à coefficients entiers
entre 0 et 10, on calcule <code>det(1/a^32)</code>, il faut environ 0.1
seconde avec <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS et 5 secondes avec Epsilon.
</li><li class="li-itemize">le calcul d’une intégrale numérique généralisée telle
que <math xmlns='http://www.w3.org/1998/Math/MathML' display='block'><semantics><mrow><msubsup><mo>&Integral;</mo> <mn>0.0</mn> <mn>1</mn></msubsup><mi>ln</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mspace width="mediummathspace"/><mi>d</mi><mi>x</mi></mrow><annotation encoding='application/x-tex'>\int_{0.0}^1 \ln(x) \ dx </annotation></semantics></math>
renvoie undef avec Epsilon.
Près d’une extrémité singulière
<math xmlns='http://www.w3.org/1998/Math/MathML' display='block'><semantics><mrow><msubsup><mo>&Integral;</mo> <mn>0.001</mn> <mn>1</mn></msubsup><mi>x</mi><mi>cos</mi><mrow><mo>(</mo><mfrac><mn>1</mn><mi>x</mi></mfrac><mo>)</mo></mrow><mspace width="mediummathspace"/><mi>d</mi><mi>x</mi></mrow><annotation encoding='application/x-tex'>\int_{0.001}^1 x \cos\left(\frac{1}{x}\right) \ dx  </annotation></semantics></math>
<math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS renvoie 0.0181170904, Epsilon 0.01793743 (erreur relative 1%)
</li></ul>
</li></ul>
<!--TOC section id="sec44" Copyright, licences et remerciements-->
<h2 id="sec44" class="section">18  Copyright, licences et remerciements</h2><!--SEC END --><ul class="itemize"><li class="li-itemize">
OS <a href="https://github.com/numworks/epsilon">Epsilon</a>
de la Numworks, (c) 2019 Numworks.
Sous licence
<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode">Creative Commons Attribution-NonCommercial-
ShareAlike 4.0 International Public License</a><br>
 Modifications par Damien Nicolet et Bernard Parisse, (c) 2019
(projet Delta), sous la même licence.
</li><li class="li-itemize">Giac et <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS, noyau de calcul (c) B. Parisse et R. De Graeve, 2019.
Les calculs en entiers sont effectués avec
<a href="https://gmplib.org/">GMP</a>, les flottants multipécision
avec <a href="https://www.mpfr.org/">MPFR</a>,
l’arithmétique d’intervalle avec
<a href="https://gforge.inria.fr/projects/mpfi/">MPFI</a>
</li><li class="li-itemize">Interface de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS adaptée par B. Parisse à partir
de l’interface utilisateur du code source d’Eigenmath
créée par Gabriel Maia et de l’interface utilisateur de Xcas.<br>
 License d’utilisation de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS: GPL2.
(voir le détail
des conditions dans le fichier
<a href="https://www-fourier.ujf-grenoble.fr/~parisse/LICENSE.GPL2">LICENSE.GPL2</a> 
ou sur la page
<a href="https://www.gnu.org/licenses/old-licenses/gpl-2.0.fr.html">GPL2</a>
du site de la Free Software Foundation).
</li><li class="li-itemize">Le code source de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS ainsi que des librairies 
GMP, MPFR, MPFI et de la version modifiée de l’OS Numworks, se trouvent
<a href="https://github.com/Delta-NumWorks/delta">ici</a> ou
<a href="https://www-fourier.univ-grenoble-alpes.fr/~parisse/numworks">là</a>
</li><li class="li-itemize">Remerciements à Damien Nicolet pour le premier portage de giac
sur Numworks N100 (au prix d’une modification matérielle), pour
le portage de la newlib (librairie C/C++) sur N110 et la maintenance
des sources au format git et la compatibilité avec les sources
de Numworks. Sans lui, ce portage n’existerait pas.
Remerciement à Jean-Baptiste Boric pour tests et conseils
et à Maxime Friess pour son squelette d’application hello.
Remerciement à l’équipe de tiplanet, en particulier Xavier Andréani,
Lionel Debroux et Adrien Bertrand, pour le forum de discussion
et tout le travail de
mise en valeur de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>cas (stockages d’archives, articles, concours).
</li><li class="li-itemize">le tableau périodique des éléments est un portage de
<a href="https://github.com/M4xi1m3/nw-atom">l’application de Maxime Friess</a> 
avec son autorisation de diffusion sous licence GPL.
</li></ul>
<!--TOC section id="sec45" Développement en C/C++.-->
<h2 id="sec45" class="section">19  Développement en C/C++.</h2><!--SEC END --><p> <a id="sec:dev"></a>
Cette section s’adresse aux utilisateurs avancés qui souhaitent programmer
leur calcultrice en exploitant toute sa puissance, donc
sans être limité par la faible quantité de mémoire
disponible pour des scripts Python et la lenteur relative du
langage interprété. Le système non modifié
de la Numworks permet de le faire, mais il est difficile de
le maitriser, au-delà de modifications simples du code
existant (par exemple modifier la valeur de certains paramètres),
il faut bien connaitre C++, la programmation orienté objet
et se limiter à une librairie standard très spartiate.
Cela limite à mon avis le nombre de développeurs
et la vitesse de développement sur cette plateforme,
encore plus si on est habitué à un
environement de développement frugal, personnellement
j’utilise <code>emacs</code> comme éditeur de texte et un terminal,
les arborescences à plusieurs niveaux et les espaces de noms
imbriqués d’Epsilon sont un cauchemar. Le temps nécessaire à
la compilation d’Epsilon est d’ailleurs un indicateur de cette
complexité.</p><p>Un autre problème est que modifier
Epsilon nécessite d’utiliser la même licence de logiciel,
on ne peut donc pas développer du logiciel libre.</p><p>Damien Nicolet et moi-même avons développé des modifications
autour de Epsilon, qui permettent de lancer un firmware d’extensions
à partir de Epsilon. C’est le projet Delta, qui permet d’utiliser la
<code>newlib</code>, une implémentation complète de la libc et
de la libstdc++, et offre un SDK en langage C et en C–
(i.e. avec un paradigme
de programmation impératif très proche du C donc beaucoup
plus accessible, avec les
avantages que procurent la librairie standard C++).
Ainsi ajouter une application toute simple comme la suite
de Syracuse nécessite une dizaine de lignes de code,
programmer la fractale de Mandelbrot moins de trente lignes de code
un jeu de mastermind prend une bonne centaine de lignes (ces
trois exemples se trouvent dans le fichier <code>kadd.cc</code> du
source de <code>giac</code>) et l’interface
du tableur de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS de l’ordre d’un millier de lignes.</p><p><span style="font-weight:bold">Licences</span><br>
L’utilisation du SDK de base de l’OS (<a href="#sec%3Aos">19.4</a>) vous impose
de choisir une licence permettant d’utiliser les services de base
d’un OS propriétaire, ce que toute licence de logiciel raisonnable
devrait permettre, c’est le cas en particulier de la GPL.
L’utilisation des autres fonctions du SDK impose une licence
compatible avec la GPL.</p>
<!--TOC subsection id="sec46" Installation de l’environnement de développement.-->
<h3 id="sec46" class="subsection">19.1  Installation de l’environnement de développement.</h3><!--SEC END --><p>
Je décris l’installation sous Linux debian/ubuntu compatible
depuis un terminal avec comme shell <code>bash</code>.
On peut programmer sur d’autres OS, mais c’est plus facile sous Linux (en tout
cas c’est plus facile pour moi d’expliquer comment faire!). Si vous
travaillez habituellement sur Mac ou Windows, vous pouvez installer
une machine virtuelle, par exemple avec
<a href="https://www.virtualbox.org/wiki/Downloads">Virtualbox</a> et
y mettre une distribution Linux debian-compatible, par exemple
<a href="https://xubuntu.org/">xubuntu</a>.</p><p>On installe les packages nécessaires pour compiler giac et pour
cross-compiler pour le processeur ARM :
</p><pre class="verbatim">sudo apt-get install wget gdb gcc g++ libgmp-dev libmpfr-dev libmpfi-dev libpari-dev libgsl0-dev libxext-dev libpng-dev libjpeg-dev libreadline-dev libncurses5-dev mesa-common-dev libx11-dev libxt-dev libxft-dev libntl-dev libgl1-mesa-dev libgl-dev libao-dev hevea debhelper libfltk1.3-dev
sudo apt-get install build-essential git imagemagick libx11-dev libxext-dev libfreetype6-dev libpng-dev libjpeg-dev pkg-config gcc-arm-none-eabi binutils-arm-none-eabi dfu-util
</pre>
<!--TOC subsubsection id="sec47" Epsilon/Delta 14.4 (calculatrice), 12.3 (simulateur)-->
<h4 id="sec47" class="subsubsection">19.1.1  Epsilon/Delta 14.4 (calculatrice), 12.3 (simulateur)</h4><!--SEC END --><p>
<a id="sec:epsilon12"></a>
Pour récupérar les sources, faire
</p><pre class="verbatim">wget https://www-fourier.univ-grenoble-alpes.fr/~parisse/numworks/delta14_device.tgz
tar xvfz delta14_device.tgz
wget https://www-fourier.univ-grenoble-alpes.fr/~parisse/numworks/delta_simu.tgz
tar xvfz delta_simu.tgz 
</pre><p>
Il y a deux arborescences distinctes, une pour la calculatrice
(<code>final</code>), l’autre (<code>delta</code>)
pour avoir un environnement de développement avec possibilité
d’exécuter le code pas à pas.Cela pour deux raisons
</p><ul class="itemize"><li class="li-itemize">
le simulateur a changé dans Epsilon 14, et la nouvelle
version est inutilisable sur ma machine (affichage flou illisible),
je travaille donc avec l’ancienne version du simulateur (qui par
ailleurs utilise le même toolkit FLTK que Xcas ce qui me facilite
le travail pour adapter le simulateur pour debugguer efficacement)
</li><li class="li-itemize">le shell KhiCAS permet maintenant de choisir MicroPython comme
évaluateur. Sur la calculatrice, KhiCAS et Epsilon sont complètement
séparés donc chacun peut utiliser son propre MicroPython,
mais sur le simulateur,
il n’y a qu’une seule application, il faut donc utiliser le même
source pour le MicroPython dans Epsilon et dans KhiCAS.
</li></ul><p>
Attention à ne pas confondre le sous-rṕertoire <code>delta</code>
de <code>final</code> qui contient une version modifiée de Epsilon
14.4 pour la calculatrice avec le répertoire <code>delta</code>
qui contient une version modifiée de Epsilon 12.3.</p><p>Le répertoire <code>final</code> contient l’arborescence pour compiler
pour la calculatrice. Les librairies nécessaires
sont précompilées dans le répertoire <code>ext/n0110/lib</code>. Il
faut juste compiler Delta.
</p><pre class="verbatim">cd final/delta
make
cd ../nw-external-apps
make 
</pre><p>
Si vous voyez des messages tels que <code>... switch -mcpu=cortex-m7 conflicts...</code>, c’est que le cross-compilateur ARM de votre distribution
Linux est trop ancien. Allez sur le site du
<a href="https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/gnu-rm/downloads">ARM SDK</a>, descendez
jusqu’à faire apparaitre la version 7 (vous pouvez essayer une version
plus récente si votre distribution Linux est récente), téléchargez
pour Linux x64 et exécutez la commande<br>
<code>cd &amp;&amp; tar xvfj Downloads/gcc-arm-none-eabi-7-2018-q2-update-linux.tar.bz2</code><br>
puis ajoutez dans votre fichier <code>~/.bashrc</code> la ligne<br>
<code>export PATH=~/gcc-arm-none-eabi-7-2018-q2-update/bin:&#36;PATH</code><br>
sauvegardez, puis tapez les commandes<br>
<code>source ~/.bashrc</code><br>
<code>cd chemin_vers_final/delta</code><br>
<code>make</code><br>
<code>cd ../nw-external-apps</code><br>
<code>make apps.tar</code><br>
<code>cd ../..</code></p><p>Le fichier firmware de la version modifiée de Epsilon,
<code>epsilon.dfu</code> est dans le sous-répertoire
<code>delta/output/release/device/n0110</code> de <code>final</code>,
le fichier contenant les applications externes est <code>apps.tar</code>
dans le répertoire <code>nw-external-apps</code>.
Pour les flasher sur la calculatrice faire
</p><pre class="verbatim">dfu-util -i0 -a0 -D final/delta/output/release/device/n0110/epsilon.dfu #-s 0x90000000
dfu-util -i0 -a0 -D final/nw-external-apps/apps.tar -s 0x92000000
</pre><p>
Le premier fichier est le firmware Epsilon avec les modifications
du projet Delta. Ce projet Delta
fournit une interface pour programmer la calculatrice
en C et permet d’exécuter du code contenu
dans un fichier <code>apps.tar</code> qui est stocké dans le
deuxième firmware,</p><p>Pour compiler le simulateur, vous pouvez lancer le script
<code>delta/mkstat</code> (attention, <code>delta</code>
ne désigne pas le sous-répertoire de <code>final</code>, mais
le répertoire créé quand on a désarchivé <code>delta_simu.tgz</code>)
ou vous pouvez exécuter les instructions suivantes
</p><pre class="verbatim">cd delta/ext/giac-1.5.0/src
ln -sf config.h.numworks.gmp config.h
make -f Makefile.numworks.simulator
/bin/cp simu/libgiac.a ../../simulator/lib
cd ../../..
/bin/rm output/simulator/debug/epsilon.elf
make V=1 DEBUG=1 PLATFORM=simulator
ln -sf output/simulator/debug/epsilon.elf simu
</pre><p>
Essayez mantenant de taper <code>./simu</code> puis de lancer Khicas sur
le simulateur en tapant <code>\</code> (cette touche
permet de simuler l’appui sur la touche HOME).</p><p>Si vous modifiez le source de giac, il faut recompiler
la librairie <code>libgiac.a</code> et la copier
dans <code>final/nw-external-apps/KhiCAS</code>,
pour cela vous pouvez utiliser le script <code>mkarm</code> dans le répertoire
<code>final/ext/giac-1.6.0/src</code>.
N’oubliez pas de répercuter la modification dans le code source du
simulateur, vous pouvez aussi créer un lien symbolique pour éviter
d’oublier<br>
<code>rm -rf delta/ext/giac-1.6.0</code><br>
<code>ln -s final/delta/ext/giac-1.6.0 delta/ext</code></p><p>Attention, le support de MicroPython et de l’exécution en mode pas à pas
n’est pas compatible, à cause du code assembleur de certaines
fonctions situées dans les fichiers <code>delta/python/src/py/nlr*</code>. En
conséquence si vous sélectionnez MicroPython pour
évaluer dans KhiCAS, le simulateur plantera dès la première
évaluation. Pour contourner ce problème,
il faut compiler ces fichiers <code>nlr*</code> en mode release
puis copier les fichiers objets obtenus dans le répertoire <code>debug</code>
d’Epsilon/Delta. Pour faire cela, vous pouvez lancer le script
<code>delta/mksimu</code>, puis le script <code>delta/cpnlr</code>.
La prochaine exécution de <code>delta/mkstat</code> devrait
alors donner un exécutable <code>simu</code> qui permet d’activer
simultanément l’évaluation MicroPython et la mise au point.</p>
<!--TOC subsection id="sec48" Utilisation du débuggueur-->
<h3 id="sec48" class="subsection">19.2  Utilisation du débuggueur</h3><!--SEC END --><p>
Le simulateur peut se lancer avec le débuggueur en tapant
<code>gdb ./simu</code> ou
depuis votre éditeur de texte ou votre environnement de développement.
Par exemple si vous utilisez
<code>emacs</code>, tapez <code>Esc x gdb</code>, valider, mettre <code>simu</code>
comme nom d’exécutable, valider. Voir par exemple
<a href="https://www-fourier.univ-grenoble-alpes.fr/~parisse/info/gdb.pdf">ici</a>
un guide de prise en main d’utilisation du débuggueur avec emacs.
Vous pouvez exécuter la commande<br>
<code>cp delta/ext/giac-1.6.0/src/.gdbinit delta</code><br>
pour définir la macro <code>v</code> de <code>gdb</code> qui vous permettra
de visualiser les variables de type <code>giac::gen</code> de manière
plus parlante qu’avec la commande <code>p</code>.</p><p>Par exemple, si vous faites dans la console <code>gdb</code> la commande
<code>b khicas_addins_menu</code> (breakpoint, i.e. point d’arrêt
à cette fonction), puis <code>r</code> pour lancer
le programme, il s’interrompra
dans le menu d’affichage des applications tierces (Home 1),
vous pouvez alors exécuter ligne après ligne avec la
commande <code>n</code>, en visualisant le contenu des variables
avec la commande <code>p</code> ou <code>v</code> pour des variables Xcas de type gen.</p>
<!--TOC subsection id="sec49" Intégration avec le shell Khicas-->
<h3 id="sec49" class="subsection">19.3  Intégration avec le shell Khicas</h3><!--SEC END --><p>
Pour ajouter une application au menu <code>Home 1</code> des
applications ajoutées dans Khicas,
il faut modifier la fonction <code>khicas_addins_menu()</code>
dans <code>kadd.cc</code>. 
Incrémentez <code>smallmenu.numitems</code>,
définissez <code>smallmenuitems[j].text</code> pour
la première valeur de <code>j</code> disponible, puis dans
la boucle <code>while(1) {...}</code>, ajoutez
la définition de votre fonction ou un appel vers votre fonction
avec <code>if (smallmenu.selection==j+1)</code>.
Pour compiler et tester, cf. la fin de la section <a href="#sec%3Aepsilon12">19.1.1</a>.</p><p>L’exemple
de la suite de Syracuse vous montre comment faire entrer une valeur,
afficher un graphique repéré,
et entrer quelque chose en ligne de commande.
L’exemple de la fractale de Mandelbrot montre comment afficher un
graphique pixelisé pixel par pixel.
L’exemple du jeu de Mastermind montre
comment afficher un graphique pixelisé avec des formes plus complexes
et interagir avec l’utilisateur lorsqu’il appuie sur une touche.</p><p>Conseils :
</p><ul class="itemize"><li class="li-itemize">
Pour commencer à programmer votre propre firmware,
vous pouvez modifier un de ces exemples. Par exemple,
demander des paramètres pour la fractale. Ou changer
le nombre de couleurs disponibles ou le nombre d’essais
dans le Mastermind.
Puis ajouter une application de votre cru, par exemple
faire un écran de saisie puis afficher une courbe.
</li><li class="li-itemize">Si vous utilisez des données constantes,
n’oubliez pas de mettre le modificateur <code>const</code> pour économiser
la mémoire RAM.
</li><li class="li-itemize">Pour travailler avec des chaines de caractères
sans vous soucier des allocations mémoires,
vous pouvez utiliser <code>string</code>, pour
des tableaux de taille dynamique <code>vector&lt;&gt;</code>
(voir par exemple le site <a href="cplusplus.com">cplusplus.com</a>
pour la description des fonctions de la librairie standard C++)
</li><li class="li-itemize">Il faut être économe en mémoire,
la disponibilité sur le tas est faible (au plus 120 kilo-octets si
aucune variable KhiCAS n’est stockée en mémoire, que le tas
Micro-Python n’est pas actif et qu’il n’y a pas de tableur).
</li></ul><p>Les paragraphes qui suivent décrivent brièvement le SDK.
Pour plus de détails, il faut ensuite se référer à
<code>k_csdk.h</code> et <code>kdisplay.h/kdisplay.cc</code> pour l’interface
et aux fichiers headers de <code>giac</code> pour
toutes les fonctions de <code>giac</code>. </p>
<!--TOC subsection id="sec50" Fonctions de base de l’OS.-->
<h3 id="sec50" class="subsection">19.4  Fonctions de base de l’OS.</h3><!--SEC END --><p> <a id="sec:os"></a>
Les fonctions de bas niveau de Epsilon sont déclarées
dans <code>k_csdk.h</code>
et sont utilisables depuis un programme C et tout langage
qui s’interface avec C (donc quasiment tout langage).</p><p>Si vous voulez créer une extension
indépendante de KhiCAS, vous pouvez vous inspirer
d’une des applications de <code>final/nw-external-apps</code>,
définissez votre propre fonction <code>int main()</code>
et linkez avec votre fichier objet à la place de
<code>-lgiac</code>, dans ce cas vous
pouvez choisir n’importe quelle licence de logiciel qui peut
se lier avec une licence d’OS propriétaire.</p><p>Le clavier :
</p><ul class="itemize"><li class="li-itemize">
<code>int getkey(int allow_suspend);</code><br>
 renvoie un code touche, <code>allow_suspend</code> est non nul
si on autorise l’utilisateur à éteindre la calculatrice
(attention dans ce cas à gérer l’affichage).
Les touches sont définies comme suit, la 2ième ligne correspond
aux touches Home (jaune) et Power (noire), avec 4 codes
de touches inexistantes,
les lignes à partir de la 6ième ont un code de touche inexistant sur le
clavier.<pre class="verbatim">const short int translated_keys[]=
  {
   // non shifted
   KEY_CTRL_LEFT,KEY_CTRL_UP,KEY_CTRL_DOWN,KEY_CTRL_RIGHT,KEY_CTRL_OK,KEY_CTRL_EXIT,
   KEY_CTRL_MENU,KEY_PRGM_ACON,KEY_PRGM_ACON,9,10,11,
   KEY_CTRL_SHIFT,KEY_CTRL_ALPHA,KEY_CTRL_XTT,KEY_CTRL_VARS,KEY_CTRL_CATALOG,KEY_CTRL_DEL,
   KEY_CHAR_EXPN,KEY_CHAR_LN,KEY_CHAR_LOG,KEY_CHAR_IMGNRY,',',KEY_CHAR_POW,
   KEY_CHAR_SIN,KEY_CHAR_COS,KEY_CHAR_TAN,KEY_CHAR_PI,KEY_CHAR_ROOT,KEY_CHAR_SQUARE,
   '7','8','9','(',')',-1,
   '4','5','6','*','/',-1,
   '1','2','3','+','-',-1,
   '0','.',KEY_CHAR_EXPN10,KEY_CHAR_ANS,KEY_CTRL_EXE,-1,
   // shifted
   KEY_SHIFT_LEFT,KEY_CTRL_PAGEUP,KEY_CTRL_PAGEDOWN,KEY_SHIFT_RIGHT,KEY_CTRL_OK,KEY_CTRL_EXIT,
   KEY_CTRL_MENU,KEY_PRGM_ACON,KEY_PRGM_ACON,9,10,11,
   KEY_CTRL_SHIFT,KEY_CTRL_ALPHA,KEY_CTRL_CUT,KEY_CTRL_CLIP,KEY_CTRL_PASTE,KEY_CTRL_AC,
   KEY_CHAR_LBRCKT,KEY_CHAR_RBRCKT,KEY_CHAR_LBRACE,KEY_CHAR_RBRACE,'_',KEY_CHAR_STORE,
   KEY_CHAR_ASIN,KEY_CHAR_ACOS,KEY_CHAR_ATAN,'=','&lt;','&gt;',
   KEY_CTRL_F7,KEY_CTRL_F8,KEY_CTRL_F9,KEY_CTRL_F13,KEY_CTRL_F14,-1,
   KEY_CTRL_F4,KEY_CTRL_F5,KEY_CTRL_F6,KEY_CHAR_FACTOR,'%',-1,
   KEY_CTRL_F1,KEY_CTRL_F2,KEY_CTRL_F3,KEY_CHAR_NORMAL,'\\',-1,
   KEY_CTRL_F10,KEY_CTRL_F11,KEY_CTRL_F12,KEY_SHIFT_ANS,KEY_CTRL_EXE,-1,
   // alpha
   KEY_CTRL_LEFT,KEY_CTRL_UP,KEY_CTRL_DOWN,KEY_CTRL_RIGHT,KEY_CTRL_OK,KEY_CTRL_EXIT,
   KEY_CTRL_MENU,KEY_PRGM_ACON,KEY_PRGM_ACON,9,10,11,
   KEY_CTRL_SHIFT,KEY_CTRL_ALPHA,':',';','"',KEY_CTRL_DEL,
   'a','b','c','d','e','f',
   'g','h','i','j','k','l',
   'm','n','o','p','q',-1,
   'r','s','t','u','v',-1,
   'w','x','y','z',' ',-1,
   '?','!',KEY_CHAR_EXPN10,KEY_CHAR_ANS,KEY_CTRL_EXE,-1,
   // alpha shifted
   KEY_SHIFT_LEFT,KEY_CTRL_PAGEUP,KEY_CTRL_PAGEDOWN,KEY_SHIFT_RIGHT,KEY_CTRL_OK,KEY_CTRL_EXIT,
   KEY_CTRL_MENU,KEY_PRGM_ACON,KEY_PRGM_ACON,9,10,11,
   KEY_CTRL_SHIFT,KEY_CTRL_ALPHA,':',';','\'','%',
   'A','B','C','D','E','F',
   'G','H','I','J','K','L',
   'M','N','O','P','Q',-1,
   'R','S','T','U','V',-1,
   'W','X','Y','Z',' ',-1,
   '?','!',KEY_CHAR_EXPN10,KEY_CHAR_ANS,KEY_CTRL_EXE,-1,
  };
</pre></li><li class="li-itemize"><code>int getkey_raw(bool allow_suspend);</code><br>
 renvoie le scan code de Numworks,
de 0 à 53 pour le clavier non shifté, ajouter 54 pour shifté,
ajouter 108 pour alpha, 162 pour alpha shifté
</li><li class="li-itemize"><code>void GetKey(int * key);</code><br>
 renvoie une touche au clavier, en utilisant le même prototype
que le SDK pour calculatrices Casio.
</li><li class="li-itemize"><code>bool os_set_angle_unit(int mode);</code>
change l’unité d’angle (0 radians, 1 degrés)
</li><li class="li-itemize"><code>int os_get_angle_unit();</code>
renvoie l’unité d’angle
</li><li class="li-itemize"><code>bool isalphaactive();</code><br>
 renvoie vrai si le mode alpha est actif.
</li><li class="li-itemize"><code>bool alphawasactive();</code><br>
 renvoie vrai si le mode alpha était actif avant la dernière
frappe de touche
</li><li class="li-itemize"><code>void lock_alpha();</code><br>
 verrouille le mode alpha
</li><li class="li-itemize"><code>bool back_key_pressed();</code><br>
 renvoie vrai en cas d’appui sur la touche Back. Utile pour
permettre d’interrompre un programme. Ceci nécessite de tester
souvent l’appui sur Back. Attention, pour éviter des problèmes
lors de l’initialisation, les 400 premiers appels à cette
fonction renvoient faux.
</li><li class="li-itemize"><code>bool is_keydown(int key);</code>
</li><li class="li-itemize"><code>void reset_kbd();</code><br>
 enlève les modes shift et alpha s’ils étaient actifs.
</li></ul><p><span style="font-weight:bold">Les affichages.</span><br>
Notez que <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>y</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding='application/x-tex'>y=0</annotation></semantics></math> correspond à
la première ligne en-dessous de la ligne d’état (18 pixels de hauteur),
on a donc <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mn>0</mn><mo>&leq;</mo><mi>y</mi><mi>&lt;</mi><mn>222</mn></mrow><annotation encoding='application/x-tex'>0 \leq y&amp;lt;222</annotation></semantics></math> et <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mn>0</mn><mo>&leq;</mo><mi>x</mi><mi>&lt;</mi><mn>320</mn></mrow><annotation encoding='application/x-tex'>0\leq x &amp;lt;320</annotation></semantics></math><br>
Les couleurs utilisent un entier 16 bits au format RGB 565, on peut
convertir depuis RGB888 par
</p><pre class="verbatim">int rgb888to565(int c){
  int r=(c&gt;&gt;16)&amp;0xff,g=(c&gt;&gt;8)&amp;0xff,b=c&amp;0xff;
  return (((r*32)/256)&lt;&lt;11) | (((g*64)/256)&lt;&lt;5) | (b*32/256);
}
</pre><ul class="itemize"><li class="li-itemize">
<code>void statusline(int mode=0);</code><br>
 affiche la ligne d’état standard
</li><li class="li-itemize"><code>void statuslinemsg(const char * msg);</code><br>
 affiche une chaine de caractères dans la ligne d’état
</li><li class="li-itemize"><code>void os_fill_rect(int x,int y,int w,int h,int c);</code><br>
 remplit un rectangle avec une couleur de couleur <code>c</code> donné
en rgb565, 
</li><li class="li-itemize"><code>void os_set_pixel(int x,int y,int c);</code><br>
 affiche un pixel de couleur <code>c</code> donné en rgb565
</li><li class="li-itemize"><code>int os_get_pixel(int x,int y);</code><br>
 renvoie la couleur rgb565 d’un pixel.
</li><li class="li-itemize"><code>int os_draw_string(int x,int y,int c,int bg,const char * s,bool fake=false);</code><br>
 <code>int os_draw_string_small(int x,int y,int c,int bg,const char * s,bool fake=false);</code><br>
 écrit une chaine de caractère avec la fonte de taille normale
ou petite à
partir du pixel <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>x</mi><mo>,</mo><mi>y</mi></mrow><annotation encoding='application/x-tex'>x,y</annotation></semantics></math> en couleur <code>c</code> (rgb565 ), avec une couleur de
fonds <code>bg</code>. Renvoie la position finale de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>x</mi></mrow><annotation encoding='application/x-tex'>x</annotation></semantics></math>.
Si <code>fake</code> est <code>true</code>, il n’y a pas décriture, juste
le calcul de la position finale de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>x</mi></mrow><annotation encoding='application/x-tex'>x</annotation></semantics></math>.
</li><li class="li-itemize"><code>bool waitforvblank()</code><br>
 synchronisation écran, à appeler juste avant de faire
des opérations de tracé pour éviter le scintillement.
</li><li class="li-itemize"><code>void os_redraw();</code><br>
 signale à l’OS Numworks qu’il doit retracer l’écran en entier
</li></ul><p>Le système de fichiers.
</p><ul class="itemize"><li class="li-itemize">
<code>bool file_exists(const char * filename);</code>
</li><li class="li-itemize"><code>bool erase_file(const char * filename);</code>
</li><li class="li-itemize"><code>const char * read_file(const char * filename);</code>
</li><li class="li-itemize"><code>bool write_file(const char * filename,const char * s,size_t len=0);</code>
</li><li class="li-itemize"><code>int os_filebrowser(const char ** filenames,int maxrecords,const char * extension);</code><br>
 Place dans <code>filenames</code> la liste des noms de fichiers d’extension
<code>extension</code> 
</li></ul><p>Gestion du temps
</p><ul class="itemize"><li class="li-itemize">
<code>void os_wait_1ms(int ms);</code><br>
 attend <code>ms</code> millisecondes.
</li><li class="li-itemize"><code>double millis();</code><br>
 renvoie un nombre de millisecondes depuis le dernier démarrage.
Attention, l’horloge système ne tourne pas à la bonne vitesse
lorsque la calculatrice est éteinte, il n’est donc pas possible
de s’en servir pour afficher l’heure.
</li></ul>
<!--TOC subsection id="sec51" Commandes graphiques complémentaires-->
<h3 id="sec51" class="subsection">19.5  Commandes graphiques complémentaires</h3><!--SEC END --><ul class="itemize"><li class="li-itemize">
<code>void xcas::draw_line(int x1, int y1, int x2, int y2, int color);</code><br>
 segment de droite
</li><li class="li-itemize"><code>void xcas::draw_rectangle(int x, int y, int width, int height, int color);</code><br>
 rectangle rempli
</li><li class="li-itemize"><code>void xcas::draw_polygon(std::vector&lt; std::vector&lt;int&gt; &gt; &amp; v1,int color)</code><br>
 polygone de sommets dans la matrice de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>n</mi></mrow><annotation encoding='application/x-tex'>n</annotation></semantics></math> lignes <code>v</code>, une ligne
par sommet, chaque ligne est un vecteur de 2 entiers
(coordonnées en pixels). 
</li><li class="li-itemize"><code>void xcas::draw_filled_polygon(std::vector&lt; std::vector&lt;int&gt; &gt; &amp;L,int xmin,int xmax,int ymin,int ymax,int color);</code><br>
 polygone de sommets dans la matrice de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>n</mi></mrow><annotation encoding='application/x-tex'>n</annotation></semantics></math> lignes <code>v</code>, une ligne
par sommet, chaque ligne est un vecteur de 2 entiers
(coordonnées en pixels). Le polygone rempli est tracé
avec “clipping” dans le rectangle défini par <code>x1,y1,x2,y2</code>.
</li><li class="li-itemize"><code>void xcas::draw_circle(int xc,int yc,int r,int color);</code><br>
 cercle de centre <code>(xc,yc)</code> et rayon <code>r</code>
</li><li class="li-itemize"><code>void xcas::draw_filled_circle(int xc,int yc,int r,int color);</code><br>
 disque de centre <code>(xc,yc)</code> et rayon <code>r</code>
</li><li class="li-itemize"><code>void xcas::draw_arc(int xc,int yc,int rx,int ry,int color,double theta1, double theta2);</code><br>
 arc d’ellipse.
</li><li class="li-itemize"><code>void xcas::draw_filled_arc(int x,int y,int rx,int ry,int theta1_deg,int theta2_deg,int color,int xmin,int xmax,int ymin,int ymax,bool segment);</code><br>
 arc d’ellipse rempli, ou segment de cercle rempli avec clipping.</li></ul>
<!--TOC subsection id="sec52" Interaction avec l’UI Khicas-->
<h3 id="sec52" class="subsection">19.6  Interaction avec l’UI Khicas</h3><!--SEC END --><p>
Certaines fonctions utilisent un pointeur vers le contexte
du moteur de calcul (qui contient les variables assignées, le mode
radian/degré, etc.), de type
<code>giac::context *</code>, et dont
la valeur est en général stockée dans la variable <code>contextptr</code>
dans les fonctions d’interface de Khicas de <code>kdisplay.cc</code>
(on peut aussi passer un pointeur nul).
</p><ul class="itemize"><li class="li-itemize">
<code>int inputline(const char * msg1,const char * msg2,std::string &amp; s,bool numeric,int ypos=65,const giac::context *contextptr=0);</code>
permet d’entrer une chaine de caractères en affichant le
message <code>msg1</code> et en préremplissant la chaine à entrer avec
<code>msg2</code>. Seuls les caractères utilisables pour un nombre
sont acceptés si <code>numeric</code> est <code>true</code>. La position
verticale de la ligne de commande est ajustable en changeant la
valeur de <code>ypos</code>. Renvoie 0 si l’utilisateur a annulé en tapant
sur Back.
</li><li class="li-itemize"><code>bool inputdouble(const char * msg1,double &amp; d,const giac::context *contextptr)</code><br>
 permet d’entrer un nombre flottant en affichant le message <code>msg1</code>,
renvoir <code>false</code> si l’utilisateur a annulé en tapant sur Back.
<code>int select_item(const char ** ptr,const char * title);</code><br>
 affiche un menu à choix et renvoie le choix de l’utilisateur.
</li><li class="li-itemize"><code>int confirm(const char * msg1,const char * msg2,bool acexit=false,int y=40);</code><br>
 affiche une boite de dialogue de type OK/Annuler, avec 2 lignes
d’affichage. Si <code>acexit</code> est <code>true</code>, l’appui sur Back
renvoie -1. Sinon, l’appui sur Back renvoie l’entier
<code>KEY_CTRL_F6</code>. L’appui
sur <code>OK</code> ou <code>EXE</code> renvoie l’entier <code>KEY_CTRL_F1</code>.
</li><li class="li-itemize"><code>int giac_filebrowser(char * filename,const char * extension,const char * title);</code><br>
 affiche un menu de sélection parmi les fichiers dont l’extension
est <code>extension</code>. Si l’utilisateur sélectionne un fichier,
renvoie 1 et met le nom de fichier dans <code>filename</code>, qui doit
avoir une taille suffisante.</li><li class="li-itemize"><code>void displaygraph(const giac::gen &amp; ge, const giac::context * contextptr);</code><br>
 affiche un <code>gen</code> de type graphique (si <code>ge.is_symb_of_sommet(at_pnt)</code>)
</li><li class="li-itemize"><code>void displaylogo();</code><br>
 affiche la tortue logo
</li><li class="li-itemize"><code>giac::gen eqw(const giac::gen &amp; ge,bool editable,const giac::context * contextptr);</code><br>
 affiche une expression dans l’éditeur 2d.
</li><li class="li-itemize"><code>void add(textArea *edptr,const std::string &amp; s);</code><br>
 écrit la chaine C++ <code>s</code> vers le buffer texte pointé
par <code>edptr</code> (dans <code>edptr-&gt;elements</code>)
</li><li class="li-itemize"><code>int doTextArea(textArea* text,const giac::context * contextptr); </code><br>
 ouvre l’éditeur de texte,
renvoie 0 si l’utilisateur quitte avec la touche Back,
1 si <code>text-&gt;allowEXE</code> est à <code>true</code> et si l’utilisateur
appuie sur <code>EXE</code>, 2 si <code>text-&gt;allowF1</code> est à <code>true</code>
et l’utilisateur appuie sur F1.
</li><li class="li-itemize"><code>std::string merge_area(const std::vector&lt;textElement&gt; &amp; v);</code><br>
 renvoie la chaine C++ correspondant à <code>v</code>, si <code>edptr</code> est
un pointeur sur <code>textArea</code>, on prendra pour <code>v</code>
<code>edptr-&gt;elements</code>.
</li></ul><p>
L’internationalisation est gérée par la commande<br>
<code>const char * gettext(const char *)</code><br>
Pour ajouter une chaine en plusieurs langues, par exemple Hello,
mettez dans votre code <code>gettext("Hello")</code>, et ajoutez
au fichier <code>numworks_translate.h</code>, <em>dans l’ordre alphabétique</em>
une ligne du type<br>
<code>{"Hello",0,0/* zt */,"Bonjour" /* fr */,"Guten Tag" /* de */,0 /* es */,0 /* nl */,0 /* pt */,0},</code>
<br>
Attention, l’utilisation du fichier <code>numworks_translate.h</code>
ne peut se faire qu’avec du code GPL qui est linké avec KhiCAS
(mais rien ne vous empêche d’utiliser <code>gettext</code> dans
un programme compatible avec la GPL
avec un autre fichier de traductions en repartant de zéro).</p>
<!--TOC subsection id="sec53" Interaction avec giac-->
<h3 id="sec53" class="subsection">19.7  Interaction avec giac</h3><!--SEC END --><p>
Le type <code>giac::gen</code> permet de travailler avec tous les types
de Xcas : entier, flottant, fraction, nom de variable, expression,
fonction...
On peut construire un gen avec les types de base C
</p><pre class="verbatim">gen g(1.2),h(3);
</pre><p>
ou avec
l’interpréteur (avec une chaine de caractères), dans ce dernier
cas il faut évaluer le gen avec un appel à <code>eval</code>,
par exemple
</p><pre class="verbatim">gen g("x^4-1",contextptr);
g=eval(g,1,contextptr);
</pre><p>En général
une fonction de Xcas a un équivalent C++ avec le même nom précédé
par <code>_</code>,
et deux arguments, un de type <code>giac::gen</code>
et un deuxième
qui est un pointeur sur le contexte d’évaluation.
Lorsqu’une commande Xcas prend plusieurs arguments, il faut les grouper
en un gen de type vecteur, en utilisant une commande <code>makesequence</code>.
Par exemple <code>_randNorm(makesequence(0.0,2.0),contextptr)</code>
équivaut à la commande <code>randNorm(0.0,2.0)</code> de Xcas.
Notez que les fonctions usuelles n’ont pas de préfixe <code>_</code>.</p>
<!--TOC subsection id="sec54" Sauvegardes et restauration-->
<h3 id="sec54" class="subsection">19.8  Sauvegardes et restauration</h3><!--SEC END --><p>
Il est possible de sauvegarder l’ensemble des données de votre
calculatrice en local sur votre PC, i.e. sans connexion Internet.
Pour cela, il faut avoir installé <code>dfu-util</code>, cf. la section
<a href="#sec%3Ainstall">2</a>. Il faut ensuite récupérer les informations sur
la calculatrice avec la commande<br>
<code>dfu-util -i0 -a0 -s 0x080001c4:0x20 -U platform.info</code><br>
ce qui place dans le fichier binaire <code>platform.info</code> (de taille
32 octets) des informations sur la Numworks
(cf. <code>ion/src/shared/platform_info.cpp</code>)
</p><ul class="itemize"><li class="li-itemize">
offset 0 0xDEC00DF0
</li><li class="li-itemize">offset 4 la version (8 caractères)
</li><li class="li-itemize">offset 12 le numéro de patch (8 caractères)
</li><li class="li-itemize">offset 20 (0x14) l’adresse A de l’espace de stockage de la Numworks
</li><li class="li-itemize">offset 24 (0x18) la taille T de l’espace de stockage
</li><li class="li-itemize">offset 28 (0x1C) 0xDEC00DF0
</li></ul><p>
Ensuite en remplaçant A et T par leur valeur dans la commande<br>
<code>dfu-util -i0 -a0 -s A:T:force -U numworks.storage</code><br>
vous pouvez archiver l’ensemble des données de votre calculatrice
dans le fichier <code>numworks.storage</code>. Avec Delta, A devrait valoir
<code>0x20000b60</code>, et T <code>0x8014</code> (dont 4 octets valant
<code>0xEE0BDDBA</code> puis 32K de data puis à
nouveau les 4 octets du début, et 3 pointeurs) ce qui donne la
commande<br>
<code>rm -f numworks.storage &amp;&amp;dfu-util -i0 -a0 -s 0x20000b60:0x8014:force -U numworks.storage</code></p><p>Vous pourrez ensuite restaurer l’archive par la commande<br>
 <code>dfu-util -i0 -a0 -s A:T:force -D numworks.storage</code><br>
avec Delta<br>
<code>dfu-util -i0 -a0 -s 0x20000b60:0x8014:force -D numworks.storage</code><br>
</p>
<!--TOC section id="sec55" Quelques mots sur les calculatrices-->
<h2 id="sec55" class="section">20  Quelques mots sur les calculatrices</h2><!--SEC END --><p>
La calculatrice est devenue incontournable dans les enseignements
de mathématique
au lycée, avec trop souvent une utilisation presse-boutons,
alors qu’elle est sous-utilisée dans les études
scientifiques, partiellement en réaction. De ce fait,
les constructeurs mettent l’accent sur le développement
de fonctionnalités pour le lycée, en faisant apprendre
des séquences de touches à effectuer pour certaines
taches bien précises, plutot qu’une méthode
plus générale, un peu moins conviviale pour ces taches,
mais plus adaptable.
C’est par exemple ce qu’on retrouve dans la philosophie
des applications de Numworks, si on veut effectuer une tache
pour laquelle elles sont prévues, c’est facile et en général
intuitif, mais il
devient vite difficile de faire quelque chose qui n’est pas prévu
(par exemple simuler des données avec un programme et les utiliser
dans une des applis de statistiques, représenter graphiquement
une fonction définie par un programme, utiliser dans Calculs ou
dans Python
certaines fonctions des applications probabilité ou statistiques, ...).</p><p>Je pense que ce n’est pas adapté pour
les élèves qui doivent pouvoir expérimenter
des choses que le constructeur n’a pas implémenté parce
que cela ne correspond pas aux programmes (c’est particulièrement
vrai pour les bons élèves si on ne veut pas qu’ils s’ennuient!).
À court terme,
c’est plus facile pour enseigner d’utiliser une application
comme Fonctions, mais à long terme, c’est plus formateur
pour de futurs étudiants (au moins en sciences et en maths)
d’apprendre à utiliser un shell puissant en y tapant des commandes.
Bien sur, les deux approches doivent se complèter.
Or les élèves sont souvent tributaires du choix de modèle
demandé par leur enseignant de seconde, ils n’ont pas encore
de recul pour choisir un autre modèle que celui
demandé par l’enseignant et comprendre toutes
les conséquences du choix, en particulier si la calculatrice
ne permet pas d’y utiliser un shell puissant.
Il est donc important de pouvoir proposer pour le plus possible
de modèles populaires une alternative à la calculatrice
officielle, permettant aussi aux bons élèves d’exploiter
toutes les possibilités de leur calculatrice et
de favoriser leur curiosité.</p><p>Pour moi, une calculatrice qui
fait aimer les maths, c’est une calculatrice qui va donner envie à un
élève d’expérimenter sur sa calculatrice des questions
en prolongement du programme scolaire. À coté 
d’applications intuitives, il faut un espace de liberté
qui ne soit pas limité aux quelques fonctionnalités d’une
interface d’application. C’est le
sens de <math xmlns='http://www.w3.org/1998/Math/MathML' display='inline'><semantics><mrow><mi>&chi;</mi></mrow><annotation encoding='application/x-tex'>\chi</annotation></semantics></math>CAS, pour Numworks ici, disponible également
pour d’autres modèles
(Casio Graph 90/35eii, TI Nspire).</p><p>

</div>
<div id="controldiv" style="max-height: 400px; overflow:auto">
<span id="controlindex"></span>
<button title="Clone la derni&egrave;re commande ex&eacute;cut&eacute;ee vers Xcas pour Firefox" onclick="UI.clone()">Clone</button>
<button title="Efface la console" onclick="document.getElementById('output').innerHTML='';">Efface</button>
<button title="Increase console size" onclick="var field=document.getElementById('output'); var s=field.style.maxHeight; s=s.substr(0,s.length-2);s=eval(s)+20 ;if(s<innerHeight/2){s=s+'px';field.style.maxHeight=s; field=document.getElementById('maindiv'); s=field.style.maxHeight; s=s.substr(0,s.length-2);s=eval(s)-20; s=s+'px';field.style.maxHeight=s;}">+</button>
<button title="Decrease console size" onclick="var field=document.getElementById('output'); var s=field.style.maxHeight; s=s.substr(0,s.length-2);s=eval(s)-20 ; if(s>80){s=s+'px';field.style.maxHeight =s;field=document.getElementById('maindiv'); s=field.style.maxHeight; s=s.substr(0,s.length-2);s=eval(s)+20; s=s+'px';field.style.maxHeight=s;}">-</button>
<textarea title="Ligne de commande pour un calcul rapide" onkeypress="UI.ckenter(event,this,3)" style="width:400px;height:20px;font-size:large"></textarea><button  title="Evalue cellule precedente" onclick="UI.quick(this);">-></button><span></span>
&nbsp;&nbsp;<button onclick="var s=UI.caseval('restart;'); Module.print(s);" title="Reinitialise le moteur de calcul formel">Restart</button>
<button onclick="UI.exec(document.documentElement);" title='Cliquer ici pour executer toutes les commandes (attention cela peut etre long!)'>Exec. tout</button>
<canvas id='canvas' width=0 height=0   onmousedown="UI.canvas_pushed=true;UI.canvas_lastx=event.clientX; UI.canvas_lasty=event.clientY;"  onmouseup="UI.canvas_pushed=false;" onmousemove="UI.canvas_mousemove(event,'')"></canvas>
<div id="output" style="max-height: 80px; overflow:auto"></div>
</div>
</div>


<script language="javascript"> 
var Module = { 
        htmlcheck:true,
        htmlbuffer:'',
        ready:false,
        preRun: [],
        postRun: [],
        print: (function() {
          var element = document.getElementById('output');
          element.innerHTML='';// element.value = ''; // clear browser cache
          return function(text) {
            //console.log(text.charCodeAt(0));
            if (text.length==1 && text.charCodeAt(0)==12){ element.innerHTML=''; return; }
            if (text.length>=1 && text.charCodeAt(0)==2) {console.log('STX');Module.htmlcheck=false; htmlbuffer='';return;}
            if (text.length>=1 && text.charCodeAt(0)==3) {console.log('ETX');Module.htmlcheck=true; element.style.display='inherit'; element.innerHTML += htmlbuffer;htmlbuffer='';element.scrollTop = 99999; return;}
            if (Module.htmlcheck){
            // These replacements are necessary if you render to raw HTML 
             text = text.replace(/&/g, "&amp;");
             text = text.replace(/</g, "&lt;");
             text = text.replace(/>/g, "&gt;");
             text = text.replace('\n', '<br>', 'g');
             text += '<br>'
             element.style.display='inherit';
             element.innerHTML += text; // element.value += text + "\n";
             element.scrollTop = 99999; // focus on bottom
            } else htmlbuffer += text;
          };
        })(),
     canvas: document.getElementById('canvas'),};
Module['onRuntimeInitialized']=function(){ console.log('UI is ready'); Module.ready=true;}
</script>



<script async>
  var UI={
   detectmob:function() { 
    if( navigator.userAgent.match(/Android/i)
	|| navigator.userAgent.match(/webOS/i)
	|| navigator.userAgent.match(/iPhone/i)
	|| navigator.userAgent.match(/iPad/i)
	|| navigator.userAgent.match(/iPod/i)
	|| navigator.userAgent.match(/BlackBerry/i)
	|| navigator.userAgent.match(/Windows Phone/i)
      ) return true;
    else 
      return false;
   },
   readCookie:function(name) {
    if (window.localStorage){
      var tmp=localStorage.getItem(name);
      if (tmp!=null) return tmp;
    }
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
      var c = ca[i];
      while (c.charAt(0)==' ') c = c.substring(1,c.length);
      if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
   },
  }
  var script = document.createElement("script");
  script.type = "text/javascript";
  var webAssemblyAvailable = false;
  if (Boolean(window.chrome)){
    if (!UI.detectmob()) webAssemblyAvailable =  window.location.href.substr(0,4)!='file';
  }
  else {
    var ua = window.navigator.userAgent;
    var old_ie = ua.indexOf('MSIE ');
    var new_ie = ua.indexOf('Trident/');
    if (!UI.detectmob() && old_ie<=-1 && new_ie<=-1)
      webAssemblyAvailable =!!window.WebAssembly;
  }
  if (webAssemblyAvailable){
    var ck=UI.readCookie('xcas_wasm');
    if (ck)
      webAssemblyAvailable=(ck=='1');
  }
  if (webAssemblyAvailable) // fixme: enable
    script.src =""+"giacwasm.js";
  else
    script.src  =""+"giac.js";
  document.getElementsByTagName("head")[0].appendChild(script);
</script>




<script language="javascript">
 var UI = {
  Datestart:Date.now(),
  n2d:0,
  python:0,
  histcount:0,
  usemathjax:false,
  lastcmd:'',
  clone:function(){
    if (UI.lastcmd.length){
       var tmp=UI.giaceval('VARS(-1)');
       tmp=encodeURIComponent(tmp);
       var url='https://www-fourier.univ-grenoble-alpes.fr/~parisse/xcasfr.html'+String.fromCharCode(35)+'+'+tmp+':;&+'+UI.lastcmd;
       console.log(url);
       window.open(url,'_blank');
    }
  },
  canvas_pushed:false,
  canvas_lastx:0,
  canvas_lasty:0,
  canvas_mousemove:function(event,no){
    if (UI.canvas_pushed){
      // Module.print(event.clientX);
      if (UI.canvas_lastx!=event.clientX){
        if (event.clientX>UI.canvas_lastx)
          giac3d('r'+no);
        else
          giac3d('l'+no);
        UI.canvas_lastx=event.clientX;
      }
      if (UI.canvas_lasty!=event.clientY){
        if (event.clientY>UI.canvas_lasty)
          giac3d('d'+no);
        else
          giac3d('u'+no);
        UI.canvas_lasty=event.clientY;
      }
    }
  },  
  count_newline:function(s){
    var ss=s.length,i,res=1;
    for (i=0;i<ss;i++){
      if (s[i]=='\n') res++;
    }
    return res;
  },
  ltgt:function(s){
    var ss=s.length,i,res='',c=0;
    for (i=0;i<ss-4;i++){
      if (s[i]=='\n') c++;
      if (s[i]!='&' || s[i+2]!='t' || s[i+3]!=';'){
        res += s[i];
        continue;
      }
      if (s[i+1]=='l'){
        res += '<';
        i +=3;
        continue;
      }
      if (s[i+1]=='g'){
        res += '>';
        i +=3;
        continue;
      }
      res += s[i];
    }
    for (;i<ss;i++) res+=s[i];
    return [res,c];
  },
  rmquote:function(tmp){
    var s=tmp.length;
    if (s>2 && tmp.charCodeAt(0)==34 && tmp.charCodeAt(s-1)==34)
      tmp=tmp.substr(1,s-2);
    return tmp;
  },
  renderhelp: function (s) {
    var pos0 = s.search("</b>");
    //console.log(s);
    var found = (s.substr(pos0 + 7, 20) != "Best match has score");
    var lh = s.substr(3, pos0 - 3);
    var unlocalized_cmd = lh;
    var sorig = s;
    pos1 = s.search("<br>");
    if (pos1 < 0) return sorig;
    var explication = s.substr(0, pos1);
    s = s.substr(pos1 + 4, s.length - pos1 - 4);
    pos1 = s.search("<br>");
    if (pos1 < 0) return sorig;
    var syntaxe = s.substr(0, pos1);
    s = s.substr(pos1 + 4, s.length - pos1 - 4);
    pos1 = s.search("<br>");
    if (pos1 < 0) return sorig;
    var voiraussi = s.substr(0, pos1);
    var examples = s.substr(pos1 + 4, s.length - pos1 - 4);
    s = '';//'<b>'+unlocalized_cmd+':</b> ';
    if (found)
      s += explication + '<br>Voir aussi: ' +voiraussi+'<br><b>Exemples : </b>'+examples;
    else
      s += explication.substr(0, pos0);
    return s;
  },   
  quickmode:0,
  quick:function(field){
    var tmp1=field.previousSibling.value,tmp;
    if (tmp1=='python' || tmp1=='xcas'){
      UI.quickmode=(tmp1=='python');
      tmp='Type python or xcas to change mode';
    }
    else {
     if (UI.quickmode){
        tmp=UI.pythoneval(tmp1);
     }
     else {
       tmp=UI.caseval(tmp1);
       tmp=UI.rmquote(tmp); 
       tmp=UI.latexeval(tmp);
     }
    }
    Module.print(String.fromCharCode(2));
    Module.print("<tt>");
    Module.print(tmp1);
    Module.print("</tt><br>&nbsp;&nbsp;");
    if (tmp.length>3 && tmp.substr(0,3)=='<b>'){ 
       Module.print(UI.renderhelp(tmp)); tmp='';
    } else Module.print(tmp);
    Module.print("<br>");
    Module.print(String.fromCharCode(3));
    field.nextSibling.innerHTML='&nbsp;'+tmp;
   //UI.render_canvas(nextSibling);  
  },
  giaceval:function(text){
     if (UI.python) text='@@'+text;
     if (!Module.ready){ window.setTimeout(UI.giaceval,100,text); return " ... ";}
     var dogiaceval=Module.cwrap('caseval',  'string', ['string']);
     return dogiaceval(text);
  },
  micropy_initialized:0,
  micropy_heapsize:4*1024*1024,
  python_output:"",
  clean_for_html: function(text){
    text = text.replace(/&/g, "&amp;");
    text = text.replace(/</g, "&lt;");
    text = text.replace(/>/g, "&gt;");
    text = text.replace(/\n/g, '<br>');
    return text;
  },    
  add_python_output:function(s){
    UI.python_output += s;
    //console.log(s);//console.log(UI.python_output);
  },
  mpeval:function(text){
     if (!Module.ready){ window.setTimeout(UI.mpeval,100,text); return " ... ";}
     if (text=='.') return UI.giaceval('avance(0)');
     if (text==',') return UI.giaceval('show(0)');
     if (text==';') return UI.giaceval('show_pixels(0)');
     if (UI.micropy_initialized==0){
        var init = Module.cwrap('mp_js_init', 'null', ['number']);
        UI.micropy_initialized=1;
        init(UI.micropy_heapsize);
     }
     UI.python_output="";
     var dompeval=Module.cwrap('mp_js_do_str', 'number', ['string']);
     dompeval(text);
     return UI.python_output;
  },
  script_eval:function(text,f){
    UI.lastcmd=text;
    var s="non evalu&eacute;",err;
    try {
       s= f(text);
    } catch (err) { s=err.message;}
    var is_2d=s.length>4 && s.substr(0,4)=='gr2d';
    if (is_2d){
      s = '<canvas id="gr2d_'+UI.n2d+'" width=400 height=250>'+s+'</canvas>';
      //console.log(UI.n2d,s);
      UI.n2d++;
    }
    var is_3d=s.length>5 && s.substr(0,5)=='gl3d ';
    if (is_3d){
	var n3d=s.substr(5,s.length-5);
	s = '<canvas id="gl3d_'+n3d+'" onmousedown="UI.canvas_pushed=true;UI.canvas_lastx=event.clientX; UI.canvas_lasty=event.clientY;" onmouseup="UI.canvas_pushed=false;" onmousemove="UI.canvas_mousemove(event,'+n3d+')" width=400 height=250></canvas>';
    }
   //console.log(s);
    return s;
  },
  caseval:function(text){
    if (text=='.') return UI.caseval('avance(0)');
    if (text==',') return UI.caseval('show(0)');
    if (text==';') return UI.caseval('show_pixels(0)');
    return UI.script_eval(text,UI.giaceval);
  },
  pythoneval:function(text){
    return UI.script_eval(text,UI.mpeval);
  },
  pourcentmod:function(a,b){
    return a-Math.floor(a/b)*b;
  },
  color_list: ['black',
    'red',
    'green',
    'yellow',
    'blue',
    'magenta',
    'cyan',
    'white',
    'silver',
    'gray',
    'maroon',
    'purple',
    'fuchsia',
    'lime',
    'olive',
    'navy',
    'teal',
    'aqua',
    'antiquewhite',
    'aquamarine',
    'azure',
    'beige',
    'bisque',
    'blanchedalmond',
    'blueviolet',
    'brown',
    'burlywood',
    'cadetblue',
    'chartreuse',
    'chocolate',
    'coral',
    'cornflowerblue',
    'cornsilk',
    'crimson',
    'cyan',
    'darkblue',
    'darkcyan',
    'darkgoldenrod',
    'darkgray',
    'darkgreen',
    'darkgrey',
    'darkkhaki',
    'darkmagenta',
    'darkolivegreen',
    'darkorange',
    'darkorchid',
    'darkred',
    'darksalmon',
    'darkseagreen',
    'darkslateblue',
    'darkslategray',
    'darkslategrey',
    'darkturquoise',
    'darkviolet',
    'deeppink',
    'deepskyblue',
    'dimgray',
    'dimgrey',
    'dodgerblue',
    'firebrick',
    'floralwhite',
    'forestgreen',
    'gainsboro',
    'ghostwhite',
    'gold',
    'goldenrod',
    'greenyellow',
    'grey',
    'honeydew',
    'hotpink',
    'indianred',
    'indigo',
    'ivory',
    'khaki',
    'lavender',
    'lavenderblush',
    'lawngreen',
    'lemonchiffon',
    'lightblue',
    'lightcoral',
    'lightcyan',
    'lightgoldenrodyellow',
    'lightgray',
    'lightgreen',
    'lightgrey',
    'lightpink',
    'lightsalmon',
    'lightseagreen',
    'lightskyblue',
    'lightslategray',
    'lightslategrey',
    'lightsteelblue',
    'lightyellow',
    'limegreen',
    'linen',
    'mediumaquamarine',
    'mediumblue',
    'mediumorchid',
    'mediumpurple',
    'mediumseagreen',
    'mediumslateblue',
    'mediumspringgreen',
    'mediumturquoise',
    'mediumvioletred',
    'midnightblue',
    'mintcream',
    'mistyrose',
    'moccasin',
    'navajowhite',
    'oldlace',
    'olivedrab',
    'orangered',
    'orchid',
    'palegoldenrod',
    'palegreen',
    'paleturquoise',
    'palevioletred',
    'papayawhip',
    'peachpuff',
    'peru',
    'pink',
    'plum',
    'powderblue',
    'rosybrown',
    'royalblue',
    'saddlebrown',
    'salmon',
    'sandybrown',
    'seagreen',
    'seashell',
    'sienna',
    'skyblue',
    'slateblue',
    'slategray',
    'slategrey',
    'snow',
    'springgreen',
    'steelblue',
    'tan',
    'thistle',
    'tomato',
    'turquoise',
    'violet',
    'wheat',
    'whitesmoke',
    'yellowgreen'],
  arc_en_ciel: function (k) {
    var r, g, b;
    k += 21;
    k = pourcentmod(k,126);
    if (k < 0)
      k += 126;
    if (k < 21) {
      r = 251;
      g = 0;
      b = 12 * k;
    }
    if (k >= 21 && k < 42) {
      r = 251 - (12 * (k - 21));
      g = 0;
      b = 251;
    }
    if (k >= 42 && k < 63) {
      r = 0;
      g = (k - 42) * 12;
      b = 251;
    }
    if (k >= 63 && k < 84) {
      r = 0;
      g = 251;
      b = 251 - (k - 63) * 12;
    }
    if (k >= 84 && k < 105) {
      r = (k - 84) * 12;
      g = 251;
      b = 0;
    }
    if (k >= 105 && k < 126) {
      r = 251;
      g = 251 - (k - 105) * 12;
      b = 0;
    }
    return 'rgb(' + r + ',' + g + ',' + b + ')';
  },
  turtle_color: function (c) {
    if (c >= 0x100) {
      if (c < 0x17e)
        return UI.arc_en_ciel(c);
      var r=8*((c>>11) & 0x1f);
      var g=4*((c>>5) & 0x3f);
      var b=8*(c & 0x1f);
      return 'rgb(' + r + ',' + g + ',' + b + ')';
    }
    return UI.color_list[c];
  },
  pixon_draw: function (id, s) {
    var v = eval(s);
    if (!Array.isArray(v)) return;
    //console.log(v[0], v.length);
    var canvas = document.getElementById(id);
    var l = v.length, w = 0, h = 0;
    if (l < 2) return;
    var scale = v[0];
    for (var k = 1; k < l; k++) {
      var cur = v[k];
      var x = cur[0], y = cur[1];
      if (cur.length==3 && typeof cur[2]!="number"){
	x+=100;
	y+=16;
      }
      if (cur.length==4) {
        var tmp = cur[3];
	if (typeof tmp=="number"){
          if (tmp > 0) y += tmp; else x -= tmp;
	} else {
	  x+=100;
	  y+=16;
	}
      }
      //console.log(cur,x,y);
      if (x > w) w = x;
      if (y > h) h = y;
    }
    w = (w + 1) * scale;
    h = (h + 1) * scale;
    canvas.width = w;
    canvas.height = h;
    //console.log(h,w);
    if (canvas.getContext) {
      var ctx = canvas.getContext('2d');
      for (var k = 1; k < l; k++) {
        var cur = v[k], cl;
        //console.log(cur);
        if (!Array.isArray(cur) || (cl = cur.length) < 2) continue;
        // cur[0]=x, cur[1]=y, cur[2]=color, cur[3]=w if +, h if -
        var x = cur[0] * scale;
        var y = cur[1] * scale;
	if (cl>2 && typeof cur[2]=="string"){
	  console.log(cur[2]);
	  ctx.font = '16px serif';
	  ctx.fillStyle = 'black';
	  ctx.fillText(cur[2],x,y+16,100);
	  continue;
	}
        ctx.fillStyle = (cl > 2) ? UI.turtle_color(cur[2]) : 'black';
        if (cl < 4) {
          ctx.fillRect(x, y, scale, scale);
          continue;
        }
	if (typeof cur[3]=="string"){
	  ctx.font = '16px serif';
	  ctx.fillText(cur[3],x,y+16,100);
	  continue;
	}
        var h = cur[3] * scale, w = scale;
        if (h < 0) {
          w = -h;
          h = scale;
        }
        ctx.fillRect(x, y, w, h);
      }
    }
  },
  turtle_dx: 0, // shift frame
  turtle_dy: 0,
  turtle_z: 1,  // zoom factor
  turtle_maillage: 1,
  turtle_draw: function (id, s) {
    if (s.length < 7) return;
    s = s.substr(5, s.length - 6);
    if (s.length > 7 && s.substr(s, 6) == "pixon(") {
      UI.pixon_draw(id, s.substr(6, s.length - 7));
      return;
    }
    if (s.length < 6 || s.substr(s, 5) != "logo(")
      return;
    s = s.substr(5, s.length - 6);
    //console.log(s);
    var v = eval(s);
    if (!Array.isArray(v)) return;
    //console.log(v[0]);
    var canvas = document.getElementById(id);
    var w = canvas.width, h = canvas.height;
    if (canvas.getContext) {
      var ctx = canvas.getContext('2d');
      var turtlezoom = UI.turtle_z, turtlex = UI.turtle_dx, turtley = UI.turtle_dy;
      // maillage
      if (UI.turtle_maillage & 3) {
        ctx.fillStyle = 'black';
        var xdecal = Math.floor(turtlex / 10.0) * 10;
        var ydecal = Math.floor(turtley / 10.0) * 10;
        if ((UI.turtle_maillage & 0x3) == 1) {
          for (var i = xdecal; i < w + xdecal; i += 10) {
            for (var j = ydecal; j < h + ydecal; j += 10) {
              var X = Math.floor((i - turtlex) * turtlezoom + .5);
              var Y = Math.floor((j - turtley) * turtlezoom + .5);
              // console.log(X,Y);
              ctx.fillRect(X, h - Y, 1, 1);
            }
          }
        } else {
          var dj = Math.sqrt(3.0) * 10, i0 = xdecal;
          for (var j = ydecal; j < h + ydecal; j += dj) {
            var J = Math.floor(h - (j - turtley) * turtlezoom);
            for (var i = i0; i < w + xdecal; i += 10) {
              ctx.fillRect(Math.floor((i - turtlex) * turtlezoom + .5), J, 1, 1);
            }
            i0 += dj;
            while (i0 >= 10)
              i0 -= 10;
          }
        }
      }
      var l = v.length, i;
      // montre la position et le cap (v[l-1])
      var prec = v[l - 1];
      ctx.font = '16px serif';
      ctx.fillStyle = 'yellow';
      ctx.fillRect(w - 40, 0, 40, 50);
      ctx.fillStyle = 'black';
      ctx.fillText('x:' + prec[0], w - 40, 15);
      ctx.fillText('y:' + prec[1], w - 40, 31);
      ctx.fillText('t:' + prec[2], w - 40, 49);
      // v[i]=[x(0),y(1),cap(2),status(3),r(4),chaine(5)],
      // couleur=status >> 11
      // longueur_tortue= (status>>3)&0xff
      // direct=status&4 (vrai si angle dans le sens trigo)
      // visible=status&2
      // crayon baisse=status&1
      // si r>0 arc/disque rayon=r & 0x1ff, theta1=(r >> 9) & 0x1ff, theta2=(r >> 18) & 0x1ff
      //        rempli=(r>>27)&0x1
      // si r<0 ligne polygonale extremite v[i] origine v[i+r] (r<0)
      for (k = 1; k < l; k++) {
        prec = v[k - 1];
        var cur = v[k];
        var preccouleur = prec[3] >> 11; // -> FIXME colors
        var curcouleur = prec[3] >> 11; // -> FIXME colors
        if (cur[5].length) {
          ctx.font = cur[4] + 'px serif';
          ctx.strokeStyle = ctx.fillStyle = UI.turtle_color(curcouleur);
          ctx.fillText(cur[5], turtlezoom * (cur[0] - turtlex), h - turtlezoom * (cur[1] - turtley));
          continue;
        }
        var radius = cur[4], precradius = prec[4];
        var x1 = Math.floor(turtlezoom * (prec[0] - turtlex) + .5),
            y1 = Math.floor(turtlezoom * (prec[1] - turtley) + .5),
            x2 = Math.floor(turtlezoom * (cur[0] - turtlex) + .5),
            y2 = Math.floor(turtlezoom * (cur[1] - turtley) + .5);
        if (radius > 0) {
          var r = radius & 0x1ff, theta1, theta2, rempli, x, y, R, angle;
          theta1 = prec[2]+ ((radius >> 9) & 0x1ff);
          theta2 = prec[2] + ((radius >> 18) & 0x1ff);
          rempli = (radius >> 27) & 1;
	  var seg = (radius >> 28) & 1;
          R = Math.floor(turtlezoom * r + .5);
          angle1 = Math.PI / 180 * (theta1 - 90);
          angle2 = Math.PI / 180 * (theta2 - 90);
          x = Math.floor(turtlezoom * (cur[0] - turtlex - r * Math.cos(angle2)) + .5);
          y = Math.floor(turtlezoom * (cur[1] - turtley - r * Math.sin(angle2)) + .5);
          ctx.beginPath();
	  if (seg)
            ctx.moveTo(x2, h - y2);
	  else {
            ctx.moveTo(x, h - y);
            ctx.lineTo(x2, h - y2);
	  }
	  //console.log(x,y,x1,y1,angle1,angle2);
          ctx.arc(x, h - y, R, -angle2,-angle1);
          ctx.closePath();
          ctx.strokeStyle = ctx.fillStyle = UI.turtle_color(curcouleur);
          if (rempli)
            ctx.fill();
          else
            ctx.stroke();
          continue;
        }
        if (prec[3] & 1) {
          ctx.strokeStyle = ctx.fillStyle = UI.turtle_color(preccouleur);
          ctx.beginPath();
          ctx.moveTo(x1, h - y1);
          ctx.lineTo(x2, h - y2);
          ctx.closePath();
          ctx.stroke();
        }
        if (radius < -1 && k + radius >= 0) {
          ctx.strokeStyle = ctx.fillStyle = UI.turtle_color(curcouleur);
          ctx.beginPath();
          var x0 = Math.floor(turtlezoom * (cur[0] - turtlex) + .5), y0 = Math.floor(turtlezoom * (cur[1] - turtley) + .5);
          //console.log('begin',x0,y0);
          ctx.moveTo(x0, h - y0);
          for (var i = -1; i >= radius; i--) {
            prec = v[k + i];
            var x = Math.floor(turtlezoom * (prec[0] - turtlex) + .5);
            var y = Math.floor(turtlezoom * (prec[1] - turtley) + .5);
            //console.log(i,x,y);
            ctx.lineTo(x, h - y);
          }
          //console.log('end',x0,y0);
          //ctx.lineTo(x0,h-y0);
          ctx.closePath();
          ctx.fill(); // automatically close path
        }
      }
      var cur = v[l - 1];
      if (cur[3] & 2) {
        // dessin de la tortue
        var x = Math.floor(turtlezoom * (cur[0] - turtlex) + .5);
        var y = Math.floor(turtlezoom * (cur[1] - turtley) + .5);
        var cost = Math.cos(cur[2] * Math.PI / 180);
        var sint = Math.sin(cur[2] * Math.PI / 180);
        var turtle_length = (cur[3] >> 3) & 0xff;
        var Dx = Math.floor(turtlezoom * turtle_length * cost / 2 + .5);
        var Dy = Math.floor(turtlezoom * turtle_length * sint / 2 + .5);
        //console.log('tortue',cur,w,h,turtlezoom,x,y,Dx,Dy);
        ctx.strokeStyle = ctx.fillStyle = UI.turtle_color(curcouleur);
        ctx.beginPath();
        ctx.moveTo(x + Dy, h - (y - Dx));
        ctx.lineTo(x - Dy, h - (y + Dx));
        ctx.closePath();
        ctx.stroke();
        if (!(cur[3] & 1))
          ctx.strokeStyle = ctx.fillStyle = UI.turtle_color(curcouleur + 1);
        ctx.beginPath();
        ctx.moveTo(x + Dy, h - (y - Dx));
        ctx.lineTo(x + 3 * Dx, h - (y + 3 * Dy));
        ctx.closePath();
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(x - Dy, h - (y + Dx));
        ctx.lineTo(x + 3 * Dx, h - (y + 3 * Dy));
        ctx.closePath();
        ctx.stroke();
      }
    }
  },
  render_canvas:function(field){
   var n=field.id;
   if (n && n.length>4 && n.substr(0,4)=='gr2d'){
     var s=field.innerHTML;
     //console.log(s);
     UI.turtle_draw(n, s);
   }
   if (n && n.length>5 && n.substr(0,5)=='gl3d_'){
    Module.print(n);
    var n3d=n.substr(5,n.length-5);
    giac3d(n3d);
    return;
   }
   var f=field.firstChild;
   for (;f;f=f.nextSibling){
     UI.render_canvas(f);
   }
  },
  eval_form: function(field){
    UI.giaceval('assume('+field.name.value+'=round('+field.valname.value+',12))');
    var s=UI.caseval(field.prog.value);
    var is_svg=s.substr(1,4)=='<svg';
    if (is_svg) field.parentNode.lastChild.innerHTML=s.substr(1,s.length-2);
    else field.parentNode.lastChild.innerHTML=s;
    UI.render_canvas(field.parentNode.lastChild);
  },
  latexeval:function(text){
    var tmp=text;
    if (tmp.length>5 && tmp.substr(0,5)=='gl3d_') return tmp;
    if (tmp.length>10 && tmp.substr(0,10)=='GIAC_ERROR') return '"'+tmp.substr(11,tmp.length-11)+'"';
    if (tmp.length>5 && tmp.substr(1,4)=='<svg') return tmp.substr(1,tmp.length-2);
    if (tmp.length>5 && tmp.substr(0,4)=='<svg') return tmp;
    if (tmp.length>3 && tmp.substr(0,3)=='<b>') return tmp;
     if (UI.usemathjax){
       tmp=UI.giaceval('latex(quote('+tmp+'))');
       var dollar=String.fromCharCode(36);
       tmp=dollar+dollar+tmp.substr(1,tmp.length-2)+dollar+dollar;
       return tmp;
     }
     tmp=UI.giaceval('mathml(quote('+tmp+',1))');
     tmp=tmp.substr(1,tmp.length-2);
    return tmp;   
  },
  ckenter:function(event,field,mode){
    var key = event.keyCode;
    if (key != 13 || event.shiftKey) return true;
   if (mode==3){ UI.quick(field.nextSibling); event.preventDefault(); field.select(); return true; }
    var tmp=field.value;
   Module.print(tmp);
    tmp=UI.caseval(tmp);
    if (mode==1){
      tmp=UI.rmquote(tmp); 
   }
   if (mode==2){
     tmp=UI.latexeval(tmp);
   }
   field.nextSibling.nextSibling.innerHTML=tmp;
   UI.render_canvas(field.nextSibling.nextSibling);
   if (UI.usemathjax) MathJax.Hub.Queue(["Typeset",MathJax.Hub,field.nextSibling.nextSibling]);
   if (event.preventDefault) event.preventDefault();
    return false;
  },
  exec: function(field){
     if (field.nodeName=="BUTTON" && field.innerHTML!='Clone' && field.innerHTML!='Restart' && field.innerHTML!='Exec. tout' ){
        field.click();
        return;
     }
     var f=field.firstChild;
     while (f){
       UI.exec(f);
       f=f.nextSibling;
     }
   },
  execonload: function(field){
     if (!Module.ready){ 
         //console.log('execonload ', field.innerHTML);
         window.setTimeout(UI.execonload, 100, field); 
     }
     var f=field.nextSibling;
     if (f && f.innerHTML=="onload" && field.nodeName=="BUTTON"){
        field.click();
        return;
     }
     f=field.firstChild;
     while (f){
       UI.execonload(f);
       f=f.nextSibling;
     }
   },
  textarealtgt: function(field){
     if (field.nodeName=="TEXTAREA"){
        var tmp=UI.ltgt(field.value);
        field.value=tmp[0];
        //field.style.height=20*(tmp[1]+1)+'px';
        field.rows=tmp[1]+1;
        //console.log(tmp,field.rows);
        return;
     }
     var f=field.firstChild;
     while (f){
       UI.textarealtgt(f);
       f=f.nextSibling;
     }
   }
 };
 window.onload = function(e){
   var isFirefox = typeof InstallTrigger !== 'undefined';   // Firefox 1.0+
   var isSafari = Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0;
  var ua = window.navigator.userAgent;
  var old_ie = ua.indexOf('MSIE ');
  var new_ie = ua.indexOf('Trident/');
  if ((!isFirefox && !isSafari) || (old_ie > -1) || (new_ie > -1) || window.chrome){
     UI.usemathjax=true;
     alert("Votre navigateur ne supporte MathML, on utilise MathJax pour l'affichage 2d.  Les calculs seraient plus rapides et les resultats seraient mieux affiches avec Firefox.");
  }
  if (UI.usemathjax){
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  }
  var elem= document.getElementById('controlindex');
  elem.innerHTML='<hr><a href="'+String.fromCharCode(35)+'sec1">Table</a>, <a href="'+String.fromCharCode(35)+'sec2">Index</a>'+elem.innerHTML;
  elem=document.getElementById('maindiv');
  if (elem.style.maxHeight=='500px')
    elem.style.maxHeight=(window.innerHeight-120)+'px';
  elem= document.getElementById('maindiv');
  elem.style.maxHeight=(window.innerHeight-150)+'px';
  giac3d = Module.cwrap('_ZN4giac13giac_rendererEPKc','number', ['string']);
  UI.giaceval('set_language(1);');
  //UI.giaceval('factor(x^4-1)');
  //UI.giaceval('sin(x+y)+f(t)');
  UI.textarealtgt(document.documentElement);
  window.setTimeout(UI.execonload, 1000, document.documentElement); // UI.execonload(document.documentElement);
  document.getElementById('output').innerHTML='';
 // if (confirm('Executer les commandes?')) UI.exec(document.documentElement);
 };
</script>


</p><!--BEGIN NOTES document-->
<hr class="footnoterule"><dl class="thefootnotes"><dt class="dt-thefootnotes">
<a id="note1" href="#text1">1</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">sous Linux,
vérifiez que
<a href="http://dfu-util.sourceforge.net/">dfu-util</a> 
est bien installé et que le fichier
<a href="https://www-fourier.univ-grenoble-alpes.fr/~parisse/numworks/50-numworks-calculator.rules"><span style="font-family:monospace">50-numworks-calculator.rules</span></a> a été copié dans <code>/etc/udev/rules.d</code></div></dd></dl>
<!--END NOTES-->
<!--CUT END -->
<!--HTMLFOOT-->
Retour à la page principale de <a href="http://www-fourier.ujf-grenoble.fr/~parisse/giac_fr.html">Giac/Xcas</a>.<!--ENDHTML-->
<!--FOOTER-->
<hr style="height:2"></body>
</html>
