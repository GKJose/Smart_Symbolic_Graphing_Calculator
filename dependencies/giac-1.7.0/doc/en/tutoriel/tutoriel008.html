<!DOCTYPE html>
<html >
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="generator" content="hevea 2.29+5 of 2017-05-18">
<link rel="stylesheet" type="text/css" href="tutoriel.css">
<title>Programming</title>
</head>
<body >
<a href="tutoriel007.html"><img src="previous_motif.gif" alt="Previous"></a>
<a href="index.html"><img src="contents_motif.gif" alt="Up"></a>
<a href="tutoriel009.html"><img src="next_motif.gif" alt="Next"></a>
<hr>
<h2 id="sec39" class="section">7&#XA0;&#XA0;Programming</h2>
<h3 id="sec40" class="subsection">7.1&#XA0;&#XA0;The language</h3>
<div class="center">
<table border=1  style="border-spacing:0;" class="cellpadding1"><tr><td style="text-align:center;border:solid 1px;white-space:nowrap"  colspan=2><span style="font-weight:bold">Instructions for </span><span style="font-weight:bold"><span style="font-family:monospace">Xcas</span></span></td></tr>
<tr><td style="vertical-align:top;text-align:left;border:solid 1px;" ><span style="font-family:monospace">a:=2;</span></td><td style="vertical-align:top;text-align:left;border:solid 1px;" >assignment </td></tr>
<tr><td style="vertical-align:top;text-align:left;border:solid 1px;" ><span style="font-family:monospace">input("a=",a);</span></td><td style="vertical-align:top;text-align:left;border:solid 1px;" >input expression </td></tr>
<tr><td style="vertical-align:top;text-align:left;border:solid 1px;" ><span style="font-family:monospace">textinput("a=",a);</span></td><td style="vertical-align:top;text-align:left;border:solid 1px;" >string input </td></tr>
<tr><td style="vertical-align:top;text-align:left;border:solid 1px;" ><span style="font-family:monospace">print("a=",a);</span></td><td style="vertical-align:top;text-align:left;border:solid 1px;" >output</td></tr>
<tr><td style="vertical-align:top;text-align:left;border:solid 1px;" ><span style="font-family:monospace">return(a);</span></td><td style="vertical-align:top;text-align:left;border:solid 1px;" >return value</td></tr>
<tr><td style="vertical-align:top;text-align:left;border:solid 1px;" ><span style="font-family:monospace">break;</span></td><td style="vertical-align:top;text-align:left;border:solid 1px;" >break out of loop</td></tr>
<tr><td style="vertical-align:top;text-align:left;border:solid 1px;" ><span style="font-family:monospace">continue;</span></td><td style="vertical-align:top;text-align:left;border:solid 1px;" >go to the next iteration</td></tr>
<tr><td style="vertical-align:top;text-align:left;border:solid 1px;" ><span style="font-family:monospace">if (&lt;condition&gt;) </span><span style="font-family:monospace">&lt;inst&gt;</span><span style="font-family:monospace">;</span></td><td style="vertical-align:top;text-align:left;border:solid 1px;" >if&#X2026;then</td></tr>
<tr><td style="vertical-align:top;text-align:left;border:solid 1px;" ><span style="font-family:monospace">if (&lt;condition&gt;) </span><span style="font-family:monospace">&lt;inst1&gt;</span><span style="font-family:monospace"> else </span><span style="font-family:monospace">&lt;inst2&gt;</span><span style="font-family:monospace">;</span></td><td style="vertical-align:top;text-align:left;border:solid 1px;" >	 if&#X2026;then &#X2026;else</td></tr>
<tr><td style="vertical-align:top;text-align:left;border:solid 1px;" ><span style="font-family:monospace">for (j:= a;j&lt;=b;j++) </span><span style="font-family:monospace">&lt;inst&gt;</span><span style="font-family:monospace">;</span></td><td style="vertical-align:top;text-align:left;border:solid 1px;" >for loop</td></tr>
<tr><td style="vertical-align:top;text-align:left;border:solid 1px;" ><span style="font-family:monospace">for (j:= a;j&lt;=b;j:=j+p) </span><span style="font-family:monospace">&lt;inst&gt;</span><span style="font-family:monospace">;</span></td><td style="vertical-align:top;text-align:left;border:solid 1px;" >for loop</td></tr>
<tr><td style="vertical-align:top;text-align:left;border:solid 1px;" ><span style="font-family:monospace">repeat &lt;inst&gt; until &lt;condition&gt;;</span></td><td style="vertical-align:top;text-align:left;border:solid 1px;" >repeat loop</td></tr>
<tr><td style="vertical-align:top;text-align:left;border:solid 1px;" ><span style="font-family:monospace">while (&lt;condition&gt;) </span><span style="font-family:monospace">&lt;inst&gt;</span><span style="font-family:monospace">;</span></td><td style="vertical-align:top;text-align:left;border:solid 1px;" >while loop</td></tr>
<tr><td style="vertical-align:top;text-align:left;border:solid 1px;" ><span style="font-family:monospace">do &lt;inst1&gt; if (&lt;condition&gt;) break;&lt;inst2&gt; od;</span></td><td style="vertical-align:top;text-align:left;border:solid 1px;" >do loop</td></tr>
</table>
</div><p>
<a id="hevea_default342"></a>
<a id="hevea_default343"></a>
<a id="hevea_default344"></a>
<a id="hevea_default345"></a></p><div class="center">
<table border=1  style="border-spacing:0;" class="cellpadding1"><tr><td style="text-align:center;border:solid 1px;white-space:nowrap"  colspan=2><span style="font-weight:bold">Boolean operators</span></td></tr>
<tr><td style="vertical-align:top;text-align:left;border:solid 1px;" ><span style="font-family:monospace">==</span></td><td style="vertical-align:top;text-align:left;border:solid 1px;" >test for equality</td></tr>
<tr><td style="vertical-align:top;text-align:left;border:solid 1px;" ><span style="font-family:monospace">!=</span></td><td style="vertical-align:top;text-align:left;border:solid 1px;" >test for inequality</td></tr>
<tr><td style="vertical-align:top;text-align:left;border:solid 1px;" ><span style="font-family:monospace">&lt;</span></td><td style="vertical-align:top;text-align:left;border:solid 1px;" >test for strictly less than</td></tr>
<tr><td style="vertical-align:top;text-align:left;border:solid 1px;" ><span style="font-family:monospace">&gt;</span></td><td style="vertical-align:top;text-align:left;border:solid 1px;" >test for strictly greater than</td></tr>
<tr><td style="vertical-align:top;text-align:left;border:solid 1px;" ><span style="font-family:monospace">&lt;=</span></td><td style="vertical-align:top;text-align:left;border:solid 1px;" >tes for less than or equal</td></tr>
<tr><td style="vertical-align:top;text-align:left;border:solid 1px;" ><span style="font-family:monospace">&gt;=</span></td><td style="vertical-align:top;text-align:left;border:solid 1px;" >test for greater than or equal to</td></tr>
<tr><td style="vertical-align:top;text-align:left;border:solid 1px;" ><span style="font-family:monospace">&amp;&amp;</span>, <span style="font-family:monospace">and</span></td><td style="vertical-align:top;text-align:left;border:solid 1px;" >infixed &#X201C;and&#X201D;</td></tr>
<tr><td style="vertical-align:top;text-align:left;border:solid 1px;" ><span style="font-family:monospace">||</span>, <span style="font-family:monospace">or</span></td><td style="vertical-align:top;text-align:left;border:solid 1px;" >infixed &#X201C;or&#X201D;</td></tr>
<tr><td style="vertical-align:top;text-align:left;border:solid 1px;" ><span style="font-family:monospace">true</span></td><td style="vertical-align:top;text-align:left;border:solid 1px;" >boolean true (same as 1)</td></tr>
<tr><td style="vertical-align:top;text-align:left;border:solid 1px;" ><span style="font-family:monospace">false</span></td><td style="vertical-align:top;text-align:left;border:solid 1px;" >boolean false (same as 0)</td></tr>
<tr><td style="vertical-align:top;text-align:left;border:solid 1px;" ><span style="font-family:monospace">not</span>, <span style="font-family:monospace">!</span></td><td style="vertical-align:top;text-align:left;border:solid 1px;" >&#X201C;not&#X201D;</td></tr>
</table>
</div><p>
<a id="hevea_default346"></a>
<a id="hevea_default347"></a>
<a id="hevea_default348"></a>
<a id="hevea_default349"></a>
<a id="hevea_default350"></a>
<a id="hevea_default351"></a>
<a id="hevea_default352"></a>
<a id="hevea_default353"></a></p><p>You can extend <span style="font-family:monospace">Xcas</span> by adding desired functions with its
built-in programming language. The main features of the language are:</p><ul class="itemize"><li class="li-itemize">
It is a functional language. The argument of a function can
be another function; in which case you can either give the name of
a function or the definition of the function. If 
<span style="font-family:monospace">f(x) := x^2</span>, then
<span style="font-family:monospace">function_diff(f)</span> is the same as
<span style="font-family:monospace">function_diff(x-&gt;x^2)</span>.</li><li class="li-itemize">There is no distinction between a program and a function. A
function returns the value of the last evaluated statement or what
follows the reserved word <span style="font-family:monospace">return</span>.</li><li class="li-itemize">The language is untyped. Any variable can take on any value; the
only different types of variables are global variables, which are
not declared, and local variables, which are declared at the
beginning of a function.
</li></ul><p>A function declaration looks like
</p><pre class="verbatim">   function_name (var1, var2, ...) := {
   local var_loc1, var_loc2, ... ;
     statement1;
     statement2;
     ...
   }
</pre><p>
The syntax is similar to <span style="font-family:monospace">C++</span>, although many variants are
recognized, particularly in compatibility mode.
Recall that <span style="font-family:monospace">i</span> is &#X221A;<span style="text-decoration:overline">&#X2212;1</span> and cannot be used for a loop
variable. 
The conditional tests are Booleans, which are the results of the usual
Boolean operators.</p><p>A program can capture runtime errors with a
<span style="font-family:monospace">try</span>&#X2013;<span style="font-family:monospace">catch</span> construction, which takes the form
</p><pre class="verbatim">   try 
     {
      block to catch errors
     }
   catch (variable)
     {
      block to execute when an error is caught
     }
</pre><p>
For example, the following will catch an error caused by incorrect
matrix multiplication:
</p><pre class="verbatim">   try 
     { A := idn(2) * idn(3) }
   catch (error)
     { print("The error is " + error) }
</pre>
<h3 id="sec41" class="subsection">7.2&#XA0;&#XA0;Some examples</h3>
<p>To write a program, it is a good idea to use the program editor that
comes with <span style="font-family:monospace">Xcas</span>, which provides a template and commands
helpful for writing programs. You can open this editor with the
<span style="font-family:monospace">New Program</span> item in the <span style="font-family:monospace">Prg</span> menu or the
<span style="font-family:monospace">Alt+p</span> key.</p><p>Consider the following program, which takes two integers and returns the
quotient and remainder of the Euclidean division algorithm (like the
<span style="font-family:monospace">iquorem</span> function).
</p><pre class="verbatim">   idiv2(a,b) := {
     local q,r;
     if (b != 0) {
       q := iquo(a,b);
       r := irem(a,b);
       }
     else {
       q := 0;
       r := a;
       }
     return [q,r];
   }
</pre><p>
If you enter this into the editor, you can test it with the
<span style="font-family:monospace">OK</span> button. You can then use the function in the command
line; if you enter
</p><blockquote class="quote"><span style="font-family:monospace">idiv2(25,15)
</span></blockquote><p>
you will get
</p><table class="display dcenter"><tr style="vertical-align:middle"><td class="dcell">
[1,10]
</td></tr>
</table><p>
You can save it in a file; the name <span style="font-family:monospace">idiv2.cxx</span> would be a good
name. You can then use it in later session with the command
</p><blockquote class="quote"><span style="font-family:monospace">read("idiv2.cxx")
</span></blockquote><p>
or by opening it in the program editor and validating it with the
<span style="font-family:monospace">OK</span> button.</p><p>Here are some more programs that you can play with. This first one
computes the GCD of two integers iteratively.
</p><pre class="verbatim">   pgcdi(a,b) := {
     local r;
     while (b != 0) {
       r := irem(a,b);
       a := b;
       b := r;
       }
     return a;
   }:;
</pre><p>
The second one computes the GCD recursively.
</p><pre class="verbatim">   pgcdr(a,b) := {
     if (b == 0) return a;
     return pgcdr(b, irem(a,b));
   }:;
</pre><p>If a program doesn&#X2019;t work the way you expect, you can run it in
step-by-step mode with the debug command. For more details, consult
the <span style="font-family:monospace">Interface</span> item of the <span style="font-family:monospace">Help</span> menu. For example,
you can start the debugging by typing
</p><blockquote class="quote"><span style="font-family:monospace">debug(idiv2(25,15))
</span></blockquote><p>
The debugger will automatically display the values of the parameters
<span style="font-family:monospace">a</span> and <span style="font-family:monospace">b</span> and local variables <span style="font-family:monospace">q</span> and
<span style="font-family:monospace">r</span> when executing the program line by line with the
<span style="font-family:monospace">sst</span> button.</p>
<h3 id="sec42" class="subsection">7.3&#XA0;&#XA0;Programming style</h3>
<p>The <span style="font-family:monospace">Xcas</span> programming language is interpreted, not compiled.
The run time of an <span style="font-family:monospace">Xcas</span> program is affected by the number of
instructions rather than the number of lines. </p><p>The speed of a program does not always match up with the clarity of
the program; compromises are often necessary. For the most part, the
calculation time isn&#X2019;t an issue; interpreted languages are often used
to test algorithms and create models. Full scale applications are
written in a compiled language like <span style="font-family:monospace">C++</span>. A <span style="font-family:monospace">C++</span> can
use <span style="font-family:monospace">giac</span> for the formal calculations.</p><p>When you are trying to write a fast program, you may want to take into
account the number of instructions and the speed of the instructions.
For example, it is in general faster to create lists and sequences
than it is to program loops. Recall than in <span style="font-family:monospace">Xcas</span> you can
find out how long it takes to run a command by entering
</p><blockquote class="quote"><span style="font-family:monospace">time(</span><span style="font-family:monospace"><span style="font-style:italic">command</span></span><span style="font-family:monospace">)
</span></blockquote>
<hr>
<a href="tutoriel007.html"><img src="previous_motif.gif" alt="Previous"></a>
<a href="index.html"><img src="contents_motif.gif" alt="Up"></a>
<a href="tutoriel009.html"><img src="next_motif.gif" alt="Next"></a>
</body>
</html>
